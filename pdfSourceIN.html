<html><head><meta charset="UTF-8"><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-bash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-json.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-none.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-ts.min.js"></script><style>
        .article {
            position: relative;
            padding-bottom: 24px;
        }
        

        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        

        .center-text {
            text-align: center;
        }
        

        .code-block {
            overflow: hidden;
            position: relative;
            padding: 0;
            border-radius: 8px;
            font-variant-ligatures: none;
            background-color: rgba(25, 25, 28, .05);
            word-break: break-all;
        }
        

        .container {
            max-width: 100%;
            overflow: hidden;
            page-break-inside: avoid;
            display: block;
        }
        

        .control {
            color: #19191c;
            font-size: 16px;
            font-weight: 670;
        }
        

        .detached {
            margin-block-start: 0;
            margin-block-end: 0;
            margin-bottom: 8px;
        }
        

        .emphasis {
            color: inherit;
            font-weight: inherit;
            font-style: italic;
        }
        

        .header-row {
            background: #e6e6e6;
        }
        

        .image {
            max-width: 100%;
            max-height: 90vh;
            width: auto;
        }
        

        .image-container {
            max-width: 100vw;
        }
        

        .image-size {
            height: auto;
        }
        

        .inline-code {
            border-radius: 4px;
            display: inline;
            padding: 2px 1px;
            font-family: JetBrains Sans,monospace;
            background: #e6e6e6;
        }
        

        .list {
            list-style-type: disc;
            padding-left: 0;
            margin-left: 15px;
        }
        

        .list-decimal {
            list-style-type: decimal;
        }
        

        .list-item {
            margin-top: 6px;
            margin-bottom: 6px;
            margin-left: 4px;
        }
        

        .main-title {
            padding-bottom: 24px;
            margin-top: 0;
            font-size: 40px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        

        .prism {
            page-break-inside: avoid;
        }
        
        /* PrismJS 1.29.0
https://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript+abap+abnf+actionscript+ada+agda+al+antlr4+apacheconf+apex+apl+applescript+aql+arduino+arff+armasm+arturo+asciidoc+aspnet+asm6502+asmatmel+autohotkey+autoit+avisynth+avro-idl+awk+bash+basic+batch+bbcode+bbj+bicep+birb+bison+bnf+bqn+brainfuck+brightscript+bro+bsl+c+csharp+cpp+cfscript+chaiscript+cil+cilkc+cilkcpp+clojure+cmake+cobol+coffeescript+concurnas+csp+cooklang+coq+crystal+css-extras+csv+cue+cypher+d+dart+dataweave+dax+dhall+diff+django+dns-zone-file+docker+dot+ebnf+editorconfig+eiffel+ejs+elixir+elm+etlua+erb+erlang+excel-formula+fsharp+factor+false+firestore-security-rules+flow+fortran+ftl+gml+gap+gcode+gdscript+gedcom+gettext+gherkin+git+glsl+gn+linker-script+go+go-module+gradle+graphql+groovy+haml+handlebars+haskell+haxe+hcl+hlsl+hoon+http+hpkp+hsts+ichigojam+icon+icu-message-format+idris+ignore+inform7+ini+io+j+java+javadoc+javadoclike+javastacktrace+jexl+jolie+jq+jsdoc+js-extras+json+json5+jsonp+jsstacktrace+js-templates+julia+keepalived+keyman+kotlin+kumir+kusto+latex+latte+less+lilypond+liquid+lisp+livescript+llvm+log+lolcode+lua+magma+makefile+markdown+markup-templating+mata+matlab+maxscript+mel+mermaid+metafont+mizar+mongodb+monkey+moonscript+n1ql+n4js+nand2tetris-hdl+naniscript+nasm+neon+nevod+nginx+nim+nix+nsis+objectivec+ocaml+odin+opencl+openqasm+oz+parigp+parser+pascal+pascaligo+psl+pcaxis+peoplecode+perl+php+phpdoc+php-extras+plant-uml+plsql+powerquery+powershell+processing+prolog+promql+properties+protobuf+pug+puppet+pure+purebasic+purescript+python+qsharp+q+qml+qore+r+racket+cshtml+jsx+tsx+reason+regex+rego+renpy+rescript+rest+rip+roboconf+robotframework+ruby+rust+sas+sass+scss+scala+scheme+shell-session+smali+smalltalk+smarty+sml+solidity+solution-file+soy+sparql+splunk-spl+sqf+sql+squirrel+stan+stata+iecst+stylus+supercollider+swift+systemd+t4-templating+t4-cs+t4-vb+tap+tcl+tt2+textile+toml+tremor+turtle+twig+typescript+typoscript+unrealscript+uorazor+uri+v+vala+vbnet+velocity+verilog+vhdl+vim+visual-basic+warpscript+wasm+web-idl+wgsl+wiki+wolfram+wren+xeora+xml-doc+xojo+xquery+yaml+yang+zig&plugins=highlight-keywords */
code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:16px;margin:0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

        

        :root {
            width: 95%;
            max-width: 95vw;
            padding: 0 0 0 30px;
        }
        
        body {
            font-family: JetBrains Sans,serif;
        }
        
        a {
            overflow-wrap: anywhere;
            width: 100vw;
        }
        
        
        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff) format("woff");
            font-weight: 300;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff) format("woff");
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff) format("woff");
            font-weight: 600;
            font-style: normal;
        }
        
        
        code {
            display: inline;
            word-break: break-word;
            font-size: 15px;
            line-height: inherit;
            font-variant-ligatures: none;
            font-family: JetBrains Sans,monospace;
            white-space: pre-line;
            overflow-wrap: break-word;
        }
        
        figcaption {
            margin-top: 5px;
        }
        
        h2 {
            padding-top: 16px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h3 {
            padding-top: 8px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h4 {
            padding-top: 4px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        p {
            padding: 0;
            border: 0;
            line-height: 25px;
            margin-block-start: 0;
            margin-block-end: 0;
            padding-bottom: 8px;
        }
        
        div {
            display: block;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            page-break-inside: avoid;
        }
        
        th, td {
            border: 1px solid #c4c4c4;
            padding: 10px;
            text-align: left;
            word-break: break-all;
        }
        
        .entry {
            display: grid;
            grid-template-columns: auto max-content;
            grid-template-areas: "chapter page";
            align-items: end;
            gap: 0 .25rem;
            line-height: 25px;
        }
        
        .toc-link-container{
            grid-area: chapter;
            position: relative;
            overflow: hidden;
        }
        
        .toc-link{
            text-decoration: none;
            color: black;
        }
        
        .toc-link-container::after {
            position: absolute;
            padding-left: .25ch;
            content: " . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ";
            text-align: right;
        }
        
        .page {
            grid-area: page;
            width: 30px;
            text-align: right;
        }
        

        .table-wrapper {
            overflow: hidden;
            box-sizing: border-box;
            font: inherit;
        }
        

        .topic {
            page-break-before: always;
        }
        </style></head><body><div><section class="topic"><div><article class="article"><h1 class="main-title">Table of contents</h1><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1911855018">1. Introduction</a></div><div class="page">2</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-442002659">2. Getting Started</a></div><div class="page">6</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1559139746">3. Node Package managers</a></div><div class="page">11</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1175139288">3.1 PnPm Cheatsheet</a></div><div class="page">20</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-2011891282">4. Typescript Configuration</a></div><div class="page">24</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#215822030">5. Modules</a></div><div class="page">30</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-920554112">6. Node.js Globals</a></div><div class="page">37</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1815655717">7. HTTP Module</a></div><div class="page">42</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#2035172722">7.1 Install OpenSSL on Windows</a></div><div class="page">48</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#343909646">8. File System Module</a></div><div class="page">51</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-916870042">9. Node.js Events</a></div><div class="page">58</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1267330066">10. Node.js Errors</a></div><div class="page">65</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1051841038">11. Node intergration with Databases</a></div><div class="page">71</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1587952552">11.1 Node.js Database Integration Approaches</a></div><div class="page">74</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1140773481">11.1.1 Using Query Builders and Raw Queries</a></div><div class="page">76</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1164361118">11.1.2 Using ORM (Object-Relational Mapping)</a></div><div class="page">83</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1580950209">12. Worker Threads in Node.JS (Multithreading)</a></div><div class="page">86</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-956173336">12.1 Implementing worker threads</a></div><div class="page">91</div></div></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1911855018">1. Introduction</h1><section><h2 id="-1911855018#what-is-node-js" data-toc="what-is-node-js#1-Introduction.md-what-is-node-js">What is Node.js?</h2><div class="container"><figure class="image-container"><img class="center image image-size" id="-1911855018#-shkrfi_6" alt="node_logo.png" title="node_logo.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/node_logo.png" width="1920" height="600"><figcaption class="center-text">node_logo.png</figcaption></figure></div><p id="-1911855018#-shkrfi_7"><span class="control" id="-1911855018#-shkrfi_11">Node.js</span> is an open-source, cross-platform JavaScript runtime environment that allows developers to build server-side and network applications using JavaScript. It is built on Chrome's V8 JavaScript engine, enabling fast and scalable development. Unlike traditional JavaScript, which typically runs in the browser, Node.js executes JavaScript code outside of the browser, making it ideal for backend development, real-time applications, and much more.</p><p id="-1911855018#-shkrfi_8">Key features of Node.js:</p><ul class="list" id="-1911855018#-shkrfi_9" start="1"><li class="list-item" id="-1911855018#-shkrfi_12"><p>Asynchronous and event-driven</p></li><li class="list-item" id="-1911855018#-shkrfi_13"><p>Non-blocking I/O model</p></li><li class="list-item" id="-1911855018#-shkrfi_14"><p>Lightweight and efficient</p></li><li class="list-item" id="-1911855018#-shkrfi_15"><p>Uses the same language (JavaScript) on both frontend and backend</p></li></ul><div class="detached code-block" id="-1911855018#-shkrfi_10"><pre><code class="language-javascript">// A simple Node.js server in TypeScript

import * as http from 'http';

const server = http.createServer((req, res) =&gt; {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello, World!\n');
});

server.listen(3000, () =&gt; {
  console.log('Server running at http://localhost:3000/');
});</code></pre></div></section><section><h2 id="-1911855018#why-node-js" data-toc="why-node-js#1-Introduction.md-why-node-js">Why Node.js?</h2><p id="-1911855018#-shkrfi_16">Node.js is widely adopted for a variety of reasons, making it one of the most popular tools for backend development:</p><ol class="list list-decimal" id="-1911855018#-shkrfi_17" type="1" start="1"><li class="list-item" id="-1911855018#-shkrfi_20"><p id="-1911855018#-shkrfi_25"><span class="control" id="-1911855018#-shkrfi_26">Single Language for Fullstack Development</span>: With Node.js, developers can use JavaScript for both the frontend and backend, making it easier for full-stack development and reducing the context switching between different languages.</p></li><li class="list-item" id="-1911855018#-shkrfi_21"><p id="-1911855018#-shkrfi_27"><span class="control" id="-1911855018#-shkrfi_28">Fast Execution with V8 Engine</span>: The V8 engine, which powers Node.js, compiles JavaScript to native machine code, providing highly efficient execution.</p></li><li class="list-item" id="-1911855018#-shkrfi_22"><p id="-1911855018#-shkrfi_29"><span class="control" id="-1911855018#-shkrfi_30">Non-blocking, Asynchronous Model</span>: Node.js uses an event-driven, non-blocking I/O model, which allows it to handle many connections concurrently without being resource-intensive. This makes Node.js particularly suitable for I/O-heavy applications, like web servers or real-time applications.</p></li><li class="list-item" id="-1911855018#-shkrfi_23"><p id="-1911855018#-shkrfi_31"><span class="control" id="-1911855018#-shkrfi_32">Large Ecosystem</span>: The Node Package Manager (NPM) is the largest ecosystem of open-source libraries, which makes adding functionalities like database interaction, authentication, or real-time communication easy.</p></li><li class="list-item" id="-1911855018#-shkrfi_24"><p id="-1911855018#-shkrfi_33"><span class="control" id="-1911855018#-shkrfi_34">Scalability</span>: Node.js is designed with scalability in mind, allowing developers to build applications that handle numerous requests efficiently.</p></li></ol><div class="detached code-block" id="-1911855018#-shkrfi_18"><pre><code class="language-javascript">// Demonstrating non-blocking behavior in Node.js
import * as fs from 'fs';

console.log('Start reading file...');
fs.readFile('example.txt', 'utf-8', (err, data) =&gt; {
  if (err) throw err;
  console.log('File content:', data);
});
console.log('Do other work while file is being read.');</code></pre></div><p id="-1911855018#-shkrfi_19">In the above example, Node.js doesn't block the execution while reading the file, allowing the server to perform other tasks.</p></section><section><h2 id="-1911855018#what-can-node-js-do" data-toc="what-can-node-js-do#1-Introduction.md-what-can-node-js-do">What Can Node.js Do?</h2><p id="-1911855018#-shkrfi_35">Node.js can be used for a wide range of applications, making it a versatile tool in modern web development. Here are some common use cases:</p><ol class="list list-decimal" id="-1911855018#-shkrfi_36" type="1" start="1"><li class="list-item" id="-1911855018#-shkrfi_41"><p id="-1911855018#-shkrfi_46"><span class="control" id="-1911855018#-shkrfi_47">Web Servers</span>: Node.js is commonly used to build web servers. Its ability to handle multiple requests simultaneously with non-blocking I/O makes it highly efficient for web applications.</p></li><li class="list-item" id="-1911855018#-shkrfi_42"><p id="-1911855018#-shkrfi_48"><span class="control" id="-1911855018#-shkrfi_49">API Development</span>: Node.js is an excellent choice for building RESTful APIs and microservices, thanks to its speed and the extensive support for libraries through NPM.</p></li><li class="list-item" id="-1911855018#-shkrfi_43"><p id="-1911855018#-shkrfi_50"><span class="control" id="-1911855018#-shkrfi_51">Real-time Applications</span>: Real-time features such as chat applications, live data streaming, and collaborative tools can be efficiently built using Node.js. Libraries like Socket.io make it easy to implement WebSocket-based communication.</p></li><li class="list-item" id="-1911855018#-shkrfi_44"><p id="-1911855018#-shkrfi_52"><span class="control" id="-1911855018#-shkrfi_53">Command Line Tools</span>: You can use Node.js to write command-line tools and scripts that automate tasks. With access to file systems, processes, and child processes, Node.js can handle various automation tasks.</p></li><li class="list-item" id="-1911855018#-shkrfi_45"><p id="-1911855018#-shkrfi_54"><span class="control" id="-1911855018#-shkrfi_55">Serverless Functions</span>: Many cloud providers offer serverless computing using Node.js as the runtime. This allows you to write lightweight functions that automatically scale and handle HTTP requests.</p></li></ol><div class="detached code-block" id="-1911855018#-shkrfi_37"><pre><code class="language-javascript">// Simple REST API with Node.js and Express in TypeScript

import express from 'express';

const app = express();
const port = 3000;

app.get('/', (req, res) =&gt; {
  res.send('Hello, World!');
});

app.get('/api', (req, res) =&gt; {
  res.json({ message: 'Welcome to the API!' });
});

app.listen(port, () =&gt; {
  console.log(`Server is running at http://localhost:${port}`);
});</code></pre></div><p id="-1911855018#-shkrfi_38">With the above example, you can create a simple web server that responds to different routes. This is a very basic example of how Node.js can power web applications or APIs.</p><p id="-1911855018#-shkrfi_40">This introduction sets the stage for understanding Node.js by explaining its core concepts, benefits, and practical use cases.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-442002659">2. Getting Started</h1><section><h2 id="-442002659#download-node-js" data-toc="download-node-js#2-Getting-Started.md-download-node-js">Download Node.js</h2><p id="-442002659#-liff0r_6">To get started with Node.js, you'll first need to download and install it on your system. Node.js comes with its package manager, <span class="control" id="-442002659#-liff0r_14">npm</span> (Node Package Manager), which allows you to install libraries and dependencies for your project.</p><ol class="list list-decimal" id="-442002659#-liff0r_7" type="1" start="1"><li class="list-item" id="-442002659#-liff0r_15"><p id="-442002659#-liff0r_19">Visit the official Node.js website: https://nodejs.org/ (<a href="https://nodejs.org/">https://nodejs.org/</a>)</p></li><li class="list-item" id="-442002659#-liff0r_16"><p id="-442002659#-liff0r_21">You'll see two versions available:</p><ul class="list" id="-442002659#-liff0r_22" start="1"><li class="list-item" id="-442002659#-liff0r_23"><p><span class="control" id="-442002659#-liff0r_25">LTS (Long Term Support)</span>: This version is recommended for most users as it is stable and gets security updates for a longer time.</p></li><li class="list-item" id="-442002659#-liff0r_24"><p><span class="control" id="-442002659#-liff0r_26">Current</span>: This is the latest version with new features, but it may not be as stable as the LTS version.</p></li></ul></li><li class="list-item" id="-442002659#-liff0r_17"><p id="-442002659#-liff0r_27">Download the appropriate installer for your operating system (Windows, macOS, or Linux).</p></li><li class="list-item" id="-442002659#-liff0r_18"><p id="-442002659#-liff0r_28">Run the installer and follow the setup instructions.</p></li></ol><p id="-442002659#-liff0r_8">Once installed, you can verify the installation by opening your terminal (or Command Prompt) and typing:</p><div class="detached code-block" id="-442002659#-liff0r_9"><pre><code class="language-bash">node -v</code></pre></div><p id="-442002659#-liff0r_10">This should display the version of Node.js installed.</p><p id="-442002659#-liff0r_11">You can also verify npm by running:</p><div class="detached code-block" id="-442002659#-liff0r_12"><pre><code class="language-bash">npm -v</code></pre></div><p id="-442002659#-liff0r_13">This will show the version of npm that was installed alongside Node.js.</p></section><section><h2 id="-442002659#command-line-interface-cli" data-toc="command-line-interface-cli#2-Getting-Started.md-command-line-interface-cli">Command Line Interface (CLI)</h2><p id="-442002659#-liff0r_29">Node.js provides a simple command-line interface (CLI) for running JavaScript and TypeScript code. You can interact with Node.js through your terminal or command prompt.</p><section><h3 id="-442002659#1-running-node-js-repl-read-eval-print-loop" data-toc="1-running-node-js-repl-read-eval-print-loop#2-Getting-Started.md-1-running-node-js-repl-read-eval-print-loop">1. Running Node.js REPL (Read-Eval-Print Loop)</h3><p id="-442002659#-liff0r_33">Node.js comes with a REPL, which allows you to execute JavaScript code interactively.</p><p id="-442002659#-liff0r_34">To start the REPL, just type <span class="inline-code" id="-442002659#-liff0r_37">node</span> in your terminal and press Enter:</p><div class="detached code-block" id="-442002659#-liff0r_35"><pre><code class="language-bash">$ node
Welcome to Node.js v16.13.0.
Type &quot;.help&quot; for more information.
&gt; console.log('Hello, Node.js!');
Hello, Node.js!
&gt;</code></pre></div><p id="-442002659#-liff0r_36">Here, you can execute any JavaScript code, and Node.js will evaluate it immediately. To exit the REPL, type <span class="inline-code" id="-442002659#-liff0r_38">.exit</span> or press <span class="inline-code" id="-442002659#-liff0r_39">Ctrl + C</span> twice.</p></section><section><h3 id="-442002659#2-running-node-js-scripts" data-toc="2-running-node-js-scripts#2-Getting-Started.md-2-running-node-js-scripts">2. Running Node.js Scripts</h3><p id="-442002659#-liff0r_40">To execute a JavaScript or TypeScript file with Node.js, you can use the following command:</p><div class="detached code-block" id="-442002659#-liff0r_41"><pre><code class="language-bash">node &lt;filename.js&gt;</code></pre></div><p id="-442002659#-liff0r_42">For example, if you have a file <span class="inline-code" id="-442002659#-liff0r_48">app.js</span> that contains:</p><div class="detached code-block" id="-442002659#-liff0r_43"><pre><code class="language-javascript">console.log('Hello, World!');</code></pre></div><p id="-442002659#-liff0r_44">You can run it with:</p><div class="detached code-block" id="-442002659#-liff0r_45"><pre><code class="language-bash">node app.js</code></pre></div><p id="-442002659#-liff0r_46">This will output:</p><div class="detached code-block" id="-442002659#-liff0r_47"><pre><code class="language-none">Hello, World!</code></pre></div></section><section><h3 id="-442002659#3-installing-global-packages" data-toc="3-installing-global-packages#2-Getting-Started.md-3-installing-global-packages">3. Installing Global Packages</h3><p id="-442002659#-liff0r_49">Node.js also uses npm for package management. You can install Node.js packages globally (so they are accessible anywhere) using npm:</p><div class="detached code-block" id="-442002659#-liff0r_50"><pre><code class="language-bash">npm install -g typescript</code></pre></div><p id="-442002659#-liff0r_51">In this example, we installed <span class="control" id="-442002659#-liff0r_52">TypeScript</span> globally, allowing you to use the <span class="inline-code" id="-442002659#-liff0r_53">tsc</span> (TypeScript Compiler) command.</p></section></section><section><h2 id="-442002659#initiate-the-node-js-file" data-toc="initiate-the-node-js-file#2-Getting-Started.md-initiate-the-node-js-file">Initiate the Node.js File</h2><p id="-442002659#-liff0r_54">Before creating your first Node.js project, it&rsquo;s a good practice to set up a project directory and initialize it using npm. This will allow you to manage your dependencies and set up your project structure.</p><section><h3 id="-442002659#1-create-a-new-project-directory" data-toc="1-create-a-new-project-directory#2-Getting-Started.md-1-create-a-new-project-directory">1. Create a New Project Directory</h3><p id="-442002659#-liff0r_60">Open your terminal and create a new directory for your project:</p><div class="detached code-block" id="-442002659#-liff0r_61"><pre><code class="language-bash">mkdir my-node-app
cd my-node-app</code></pre></div></section><section><h3 id="-442002659#2-initialize-the-project-with-npm" data-toc="2-initialize-the-project-with-npm#2-Getting-Started.md-2-initialize-the-project-with-npm">2. Initialize the Project with npm</h3><p id="-442002659#-liff0r_62">To initialize a new Node.js project, use the following command:</p><div class="detached code-block" id="-442002659#-liff0r_63"><pre><code class="language-bash">npm init</code></pre></div><p id="-442002659#-liff0r_64">This command will ask you several questions about your project (like project name, version, entry point, etc.), but you can skip through them by pressing Enter or manually configure them.</p><p id="-442002659#-liff0r_65">Alternatively, you can use the <span class="inline-code" id="-442002659#-liff0r_70">-y</span> flag to accept the default settings:</p><div class="detached code-block" id="-442002659#-liff0r_66"><pre><code class="language-bash">npm init -y</code></pre></div><p id="-442002659#-liff0r_67">This will generate a <span class="inline-code" id="-442002659#-liff0r_71">package.json</span> file, which is a configuration file that stores metadata about your project, including dependencies, scripts, and more.</p><p id="-442002659#-liff0r_68">The <span class="inline-code" id="-442002659#-liff0r_72">package.json</span> file will look something like this:</p><div class="detached code-block" id="-442002659#-liff0r_69"><pre><code class="language-json">{
  &quot;name&quot;: &quot;my-node-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}</code></pre></div></section><section><h3 id="-442002659#3-create-your-first-node-js-file" data-toc="3-create-your-first-node-js-file#2-Getting-Started.md-3-create-your-first-node-js-file">3. Create Your First Node.js File</h3><p id="-442002659#-liff0r_73">Now, create a new file called <span class="inline-code" id="-442002659#-liff0r_77">index.ts</span> (or <span class="inline-code" id="-442002659#-liff0r_78">index.js</span> if you&rsquo;re using plain JavaScript):</p><div class="detached code-block" id="-442002659#-liff0r_74"><pre><code class="language-bash">touch index.ts</code></pre></div><p id="-442002659#-liff0r_75">Inside this file, you can write your first Node.js code using TypeScript:</p><div class="detached code-block" id="-442002659#-liff0r_76"><pre><code class="language-javascript">const message: string = 'Hello, TypeScript with Node.js!';
console.log(message);</code></pre></div></section><section><h3 id="-442002659#4-run-the-typescript-file" data-toc="4-run-the-typescript-file#2-Getting-Started.md-4-run-the-typescript-file">4. Run the TypeScript File</h3><p id="-442002659#-liff0r_79">To run TypeScript with Node.js, you need to transpile the TypeScript code into JavaScript using the TypeScript compiler (<span class="inline-code" id="-442002659#-liff0r_88">tsc</span>).</p><p id="-442002659#-liff0r_80">First, install TypeScript as a dev dependency:</p><div class="detached code-block" id="-442002659#-liff0r_81"><pre><code class="language-bash">npm install typescript --save-dev</code></pre></div><p id="-442002659#-liff0r_82">You can now compile the <span class="inline-code" id="-442002659#-liff0r_89">index.ts</span> file into JavaScript:</p><div class="detached code-block" id="-442002659#-liff0r_83"><pre><code class="language-bash">npx tsc index.ts</code></pre></div><p id="-442002659#-liff0r_84">This will generate a JavaScript file (<span class="inline-code" id="-442002659#-liff0r_90">index.js</span>), which can then be executed using Node.js:</p><div class="detached code-block" id="-442002659#-liff0r_85"><pre><code class="language-bash">node index.js</code></pre></div><p id="-442002659#-liff0r_86">The output will be:</p><div class="detached code-block" id="-442002659#-liff0r_87"><pre><code class="language-none">Hello, TypeScript with Node.js!</code></pre></div></section><section><h3 id="-442002659#5-automate-the-compilation-and-running-optional" data-toc="5-automate-the-compilation-and-running-optional#2-Getting-Started.md-5-automate-the-compilation-and-running-optional">5. Automate the Compilation and Running (Optional)</h3><p id="-442002659#-liff0r_91">To make the process of compiling and running TypeScript easier, you can add a script to your <span class="inline-code" id="-442002659#-liff0r_98">package.json</span>:</p><div class="detached code-block" id="-442002659#-liff0r_92"><pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;tsc &amp;&amp; node index.js&quot;
  }
}</code></pre></div><p id="-442002659#-liff0r_93">Now, you can compile and run your project with one command:</p><div class="detached code-block" id="-442002659#-liff0r_94"><pre><code class="language-bash">npm start</code></pre></div><p id="-442002659#-liff0r_95">This will compile the TypeScript and run the generated JavaScript file.</p><p id="-442002659#-liff0r_97">This section guides you through the process of downloading and setting up Node.js, familiarizing you with the command line interface, and creating your first Node.js project.</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1559139746">3. Node Package managers</h1><p id="-1559139746#-1dvv58_3">Node.js uses various package managers to handle external libraries and dependencies, which are essential for building modern applications. These package managers simplify the process of installing, updating, and managing the libraries your project requires. In this section, we'll cover what a package is, and introduce the most commonly used package managers: <span class="control" id="-1559139746#-1dvv58_9">NPM</span>, <span class="control" id="-1559139746#-1dvv58_10">PnPm</span>, and <span class="control" id="-1559139746#-1dvv58_11">Yarn</span>.</p><section><h2 id="-1559139746#what-is-a-package" data-toc="what-is-a-package#3-Node-Package-managers.md-what-is-a-package">What is a Package?</h2><p id="-1559139746#-1dvv58_12">In the Node.js ecosystem, a <span class="control" id="-1559139746#-1dvv58_20">package</span> refers to a reusable piece of code or library that performs a specific task or provides specific functionality. Packages are distributed as modules, which can include utilities, frameworks, middleware, or even entire applications.</p><p id="-1559139746#-1dvv58_13">A typical package may consist of:</p><ul class="list" id="-1559139746#-1dvv58_14" start="1"><li class="list-item" id="-1559139746#-1dvv58_21"><p>JavaScript/TypeScript code</p></li><li class="list-item" id="-1559139746#-1dvv58_22"><p>A <span class="inline-code" id="-1559139746#-1dvv58_24">package.json</span> file containing metadata (name, version, dependencies, etc.)</p></li><li class="list-item" id="-1559139746#-1dvv58_23"><p>Additional resources like README files, license agreements, and configuration files</p></li></ul><p id="-1559139746#-1dvv58_15">Packages can be installed locally (only available to the project) or globally (available system-wide). They are often hosted in package registries like the official <span class="control" id="-1559139746#-1dvv58_25">npm registry</span>.</p><p id="-1559139746#-1dvv58_16">Example of a <span class="inline-code" id="-1559139746#-1dvv58_26">package.json</span> file:</p><div class="detached code-block" id="-1559139746#-1dvv58_17"><pre><code class="language-json">{
  &quot;name&quot;: &quot;my-node-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;A simple Node.js app&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;dependencies&quot;: {
    &quot;express&quot;: &quot;^4.17.1&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;typescript&quot;: &quot;^4.4.3&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node index.js&quot;,
    &quot;build&quot;: &quot;tsc&quot;
  }
}</code></pre></div><p id="-1559139746#-1dvv58_18">In this example, the <span class="inline-code" id="-1559139746#-1dvv58_27">express</span> package is listed as a runtime dependency, while <span class="inline-code" id="-1559139746#-1dvv58_28">typescript</span> is a development dependency.</p></section><section><h2 id="-1559139746#npm-node-package-manager" data-toc="npm-node-package-manager#3-Node-Package-managers.md-npm-node-package-manager">NPM (Node Package Manager)</h2><p id="-1559139746#-1dvv58_29"><span class="control" id="-1559139746#-1dvv58_33">NPM (Node Package Manager)</span> is the default package manager for Node.js, and it comes pre-installed when you install Node.js. NPM allows developers to easily share and reuse code and manage dependencies.</p><section><h3 id="-1559139746#key-features" data-toc="key-features#3-Node-Package-managers.md-key-features">Key Features:</h3><ul class="list" id="-1559139746#-1dvv58_34" start="1"><li class="list-item" id="-1559139746#-1dvv58_35"><p><span class="control" id="-1559139746#-1dvv58_39">Largest Package Registry</span>: NPM has the largest repository of open-source Node.js libraries available for installation.</p></li><li class="list-item" id="-1559139746#-1dvv58_36"><p><span class="control" id="-1559139746#-1dvv58_40">Dependency Management</span>: It manages both direct and transitive dependencies through a <span class="inline-code" id="-1559139746#-1dvv58_41">package.json</span> file.</p></li><li class="list-item" id="-1559139746#-1dvv58_37"><p><span class="control" id="-1559139746#-1dvv58_42">Scripts</span>: NPM allows you to define custom scripts in <span class="inline-code" id="-1559139746#-1dvv58_43">package.json</span> to automate tasks like testing, building, or deploying.</p></li><li class="list-item" id="-1559139746#-1dvv58_38"><p><span class="control" id="-1559139746#-1dvv58_44">Versioning</span>: NPM makes it easy to update or lock dependencies to specific versions, ensuring that your project uses stable versions of packages.</p></li></ul></section><section><h3 id="-1559139746#common-npm-commands" data-toc="common-npm-commands#3-Node-Package-managers.md-common-npm-commands">Common NPM Commands:</h3><ul class="list" id="-1559139746#-1dvv58_45" start="1"><li class="list-item" id="-1559139746#-1dvv58_46"><p id="-1559139746#-1dvv58_52">Install a package locally:</p><div class="detached code-block" id="-1559139746#-1dvv58_53"><pre><code class="language-bash">npm install &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_47"><p id="-1559139746#-1dvv58_54">Install a package globally:</p><div class="detached code-block" id="-1559139746#-1dvv58_55"><pre><code class="language-bash">npm install -g &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_48"><p id="-1559139746#-1dvv58_56">Add a package as a development dependency:</p><div class="detached code-block" id="-1559139746#-1dvv58_57"><pre><code class="language-bash">npm install &lt;package-name&gt; --save-dev</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_49"><p id="-1559139746#-1dvv58_58">Install all dependencies listed in <span class="inline-code" id="-1559139746#-1dvv58_60">package.json</span>:</p><div class="detached code-block" id="-1559139746#-1dvv58_59"><pre><code class="language-bash">npm install</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_50"><p id="-1559139746#-1dvv58_61">Remove a package:</p><div class="detached code-block" id="-1559139746#-1dvv58_62"><pre><code class="language-bash">npm uninstall &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_51"><p id="-1559139746#-1dvv58_63">Running a custom script defined in <span class="inline-code" id="-1559139746#-1dvv58_65">package.json</span>:</p><div class="detached code-block" id="-1559139746#-1dvv58_64"><pre><code class="language-bash">npm run &lt;script-name&gt;</code></pre></div></li></ul></section><section><h3 id="-1559139746#example" data-toc="example#3-Node-Package-managers.md-example">Example:</h3><div class="detached code-block" id="-1559139746#-1dvv58_66"><pre><code class="language-bash">npm install express</code></pre></div><p id="-1559139746#-1dvv58_67">This command installs <span class="inline-code" id="-1559139746#-1dvv58_69">express</span>, a web framework, and updates <span class="inline-code" id="-1559139746#-1dvv58_70">package.json</span> with the new dependency.</p></section></section><section><h2 id="-1559139746#c-pnpm" data-toc="c-pnpm#3-Node-Package-managers.md-c-pnpm">c. PnPm</h2><p id="-1559139746#-1dvv58_71"><span class="control" id="-1559139746#-1dvv58_73">PnPm</span> is an alternative package manager for Node.js that aims to optimize disk space and speed. It addresses some of the inefficiencies of NPM and Yarn by storing package dependencies in a shared, central directory, and linking them into each project. This can significantly reduce disk usage, especially when multiple projects have similar dependencies.</p><section><h3 id="-1559139746#key-features" data-toc="key-features#3-Node-Package-managers.md-key-features">Key Features:</h3><ul class="list" id="-1559139746#-1dvv58_74" start="1"><li class="list-item" id="-1559139746#-1dvv58_75"><p><span class="control" id="-1559139746#-1dvv58_78">Efficient Disk Usage</span>: PnPm uses a content-addressable storage to store every package only once, even if multiple projects depend on different versions of the package.</p></li><li class="list-item" id="-1559139746#-1dvv58_76"><p><span class="control" id="-1559139746#-1dvv58_79">Performance</span>: It is often faster than both NPM and Yarn, especially for monorepo projects.</p></li><li class="list-item" id="-1559139746#-1dvv58_77"><p><span class="control" id="-1559139746#-1dvv58_80">Strict Dependency Management</span>: PnPm ensures that the dependency tree is more predictable, catching issues like missing or incompatible peer dependencies early on.</p></li></ul></section></section><section><h2 id="-1559139746#installing-pnpm" data-toc="installing-pnpm#3-Node-Package-managers.md-installing-pnpm">Installing PNPM</h2><p id="-1559139746#-1dvv58_82">PNPM is a fast, disk space-efficient package manager for Node.js. More information on https://pnpm.io/installation (<a href="https://pnpm.io/installation">https://pnpm.io/installation</a>)</p><ol class="list list-decimal" id="-1559139746#-1dvv58_83" type="1" start="1"><li class="list-item" id="-1559139746#-1dvv58_89"><p><span class="control" id="-1559139746#-1dvv58_90">Install PNPM</span>:</p></li></ol><ul class="list" id="-1559139746#-1dvv58_84" start="1"><li class="list-item" id="-1559139746#-1dvv58_91"><p id="-1559139746#-1dvv58_93">Using Powershell:</p><div class="detached code-block" id="-1559139746#-1dvv58_94"><pre><code class="language-bash">Invoke-WebRequest https://get.pnpm.io/install.ps1 -UseBasicParsing | Invoke-Expression</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_92"><p id="-1559139746#-1dvv58_95">On POSIX systems, you can use curl or wget:</p><div class="detached code-block" id="-1559139746#-1dvv58_96"><pre><code class="language-bash">curl -fsSL https://get.pnpm.io/install.sh | sh -</code></pre></div><p id="-1559139746#-1dvv58_97">If you don't have curl installed, you would like to use wget:</p><div class="detached code-block" id="-1559139746#-1dvv58_98"><pre><code class="language-bash">wget -qO- https://get.pnpm.io/install.sh | sh -</code></pre></div></li></ul><ol class="list list-decimal" id="-1559139746#-1dvv58_85" type="1" start="2"><li class="list-item" id="-1559139746#-1dvv58_99"><p id="-1559139746#-1dvv58_101"><span class="control" id="-1559139746#-1dvv58_104">Verify Installation</span>: After the installation completes, verify it by typing:</p><div class="detached code-block" id="-1559139746#-1dvv58_102"><pre><code class="language-bash">pnpm -v</code></pre></div><p id="-1559139746#-1dvv58_103">This should display the installed PNPM version.</p></li><li class="list-item" id="-1559139746#-1dvv58_100"><p id="-1559139746#-1dvv58_105"><span class="control" id="-1559139746#-1dvv58_107">Updating pnpm</span>: To update pnpm, run the <span class="inline-code" id="-1559139746#-1dvv58_108">self-update</span> command:</p><div class="detached code-block" id="-1559139746#-1dvv58_106"><pre><code class="language-bash">pnpm self-update</code></pre></div></li></ol><p id="-1559139746#-1dvv58_86">To install Node.js with PNPM on your system, follow the steps below:</p></section><section><h2 id="-1559139746#installing-node-js" data-toc="installing-node-js#3-Node-Package-managers.md-installing-node-js">Installing Node.js</h2><p id="-1559139746#-1dvv58_110">Node.js is a JavaScript runtime that allows you to run JavaScript code on your server or local machine. Here's how to install it:</p><section><h3 id="-1559139746#use" data-toc="use#3-Node-Package-managers.md-use">use</h3><ul class="list" id="-1559139746#-1dvv58_114" start="1"><li class="list-item" id="-1559139746#-1dvv58_122"><p>Install and use the specified version of Node.js. Install the LTS version of Node.js:</p></li></ul><div class="detached code-block" id="-1559139746#-1dvv58_115"><pre><code class="language-bash">pnpm env use --global lts</code></pre></div><ul class="list" id="-1559139746#-1dvv58_116" start="1"><li class="list-item" id="-1559139746#-1dvv58_123"><p>Or if you prefer a specific Install Node.js v16:</p></li></ul><div class="detached code-block" id="-1559139746#-1dvv58_117"><pre><code class="language-bash">pnpm env use --global 16</code></pre></div><section><h4 id="-1559139746#common-pnpm-commands" data-toc="common-pnpm-commands#3-Node-Package-managers.md-common-pnpm-commands">Common PnPm Commands:</h4><ul class="list" id="-1559139746#-1dvv58_124" start="1"><li class="list-item" id="-1559139746#-1dvv58_125"><p id="-1559139746#-1dvv58_129">Install a package locally:</p><div class="detached code-block" id="-1559139746#-1dvv58_130"><pre><code class="language-bash">pnpm install &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_126"><p id="-1559139746#-1dvv58_131">Install a package globally:</p><div class="detached code-block" id="-1559139746#-1dvv58_132"><pre><code class="language-bash">pnpm add -g &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_127"><p id="-1559139746#-1dvv58_133">Add a development dependency:</p><div class="detached code-block" id="-1559139746#-1dvv58_134"><pre><code class="language-bash">pnpm add &lt;package-name&gt; --save-dev</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_128"><p id="-1559139746#-1dvv58_135">Install all dependencies listed in <span class="inline-code" id="-1559139746#-1dvv58_137">package.json</span>:</p><div class="detached code-block" id="-1559139746#-1dvv58_136"><pre><code class="language-bash">pnpm install</code></pre></div></li></ul></section><section><h4 id="-1559139746#example" data-toc="example#3-Node-Package-managers.md-example">Example:</h4><div class="detached code-block" id="-1559139746#-1dvv58_138"><pre><code class="language-bash">pnpm install express</code></pre></div><p id="-1559139746#-1dvv58_139">This command installs <span class="inline-code" id="-1559139746#-1dvv58_140">express</span>, just like NPM, but PnPm will link the dependencies in an optimized way, saving disk space.</p></section><section><h4 id="-1559139746#advantages" data-toc="advantages#3-Node-Package-managers.md-advantages">Advantages:</h4><ul class="list" id="-1559139746#-1dvv58_141" start="1"><li class="list-item" id="-1559139746#-1dvv58_143"><p>Faster installation times in larger projects.</p></li><li class="list-item" id="-1559139746#-1dvv58_144"><p>Prevents projects from installing unnecessary duplicate dependencies.</p></li><li class="list-item" id="-1559139746#-1dvv58_145"><p>Strictness in dependency resolution ensures fewer conflicts.</p></li></ul></section><section><h4 id="-1559139746#d-yarn" data-toc="d-yarn#3-Node-Package-managers.md-d-yarn">d. Yarn</h4><p id="-1559139746#-1dvv58_146"><span class="control" id="-1559139746#-1dvv58_151">Yarn</span> is another package manager that was originally created by Facebook to address some performance and security concerns they found in NPM. Yarn improves on speed and consistency, offering a lockfile system and better offline support.</p><section><h5 id="-1559139746#key-features" data-toc="key-features#3-Node-Package-managers.md-key-features">Key Features:</h5><ul class="list" id="-1559139746#-1dvv58_152" start="1"><li class="list-item" id="-1559139746#-1dvv58_153"><p><span class="control" id="-1559139746#-1dvv58_157">Fast Installation</span>: Yarn caches every package it downloads, so it never needs to download the same package again.</p></li><li class="list-item" id="-1559139746#-1dvv58_154"><p><span class="control" id="-1559139746#-1dvv58_158">Lockfile for Consistency</span>: Yarn generates a <span class="inline-code" id="-1559139746#-1dvv58_159">yarn.lock</span> file to ensure that all developers working on a project install exactly the same package versions.</p></li><li class="list-item" id="-1559139746#-1dvv58_155"><p><span class="control" id="-1559139746#-1dvv58_160">Parallel Installations</span>: Yarn installs packages in parallel, which can significantly reduce installation times.</p></li><li class="list-item" id="-1559139746#-1dvv58_156"><p><span class="control" id="-1559139746#-1dvv58_161">Offline Mode</span>: Once a package is installed, it can be reinstalled without an internet connection, thanks to Yarn&rsquo;s caching system.</p></li></ul></section><section><h5 id="-1559139746#common-yarn-commands" data-toc="common-yarn-commands#3-Node-Package-managers.md-common-yarn-commands">Common Yarn Commands:</h5><ul class="list" id="-1559139746#-1dvv58_162" start="1"><li class="list-item" id="-1559139746#-1dvv58_163"><p id="-1559139746#-1dvv58_167">Install a package locally:</p><div class="detached code-block" id="-1559139746#-1dvv58_168"><pre><code class="language-bash">yarn add &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_164"><p id="-1559139746#-1dvv58_169">Install a package globally:</p><div class="detached code-block" id="-1559139746#-1dvv58_170"><pre><code class="language-bash">yarn global add &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_165"><p id="-1559139746#-1dvv58_171">Add a development dependency:</p><div class="detached code-block" id="-1559139746#-1dvv58_172"><pre><code class="language-bash">yarn add &lt;package-name&gt; --dev</code></pre></div></li><li class="list-item" id="-1559139746#-1dvv58_166"><p id="-1559139746#-1dvv58_173">Install all dependencies listed in <span class="inline-code" id="-1559139746#-1dvv58_175">package.json</span>:</p><div class="detached code-block" id="-1559139746#-1dvv58_174"><pre><code class="language-bash">yarn install</code></pre></div></li></ul></section><section><h5 id="-1559139746#example" data-toc="example#3-Node-Package-managers.md-example">Example:</h5><div class="detached code-block" id="-1559139746#-1dvv58_176"><pre><code class="language-bash">yarn add express</code></pre></div><p id="-1559139746#-1dvv58_177">This command adds <span class="inline-code" id="-1559139746#-1dvv58_178">express</span> as a dependency to your project using Yarn.</p></section><section><h5 id="-1559139746#advantages" data-toc="advantages#3-Node-Package-managers.md-advantages">Advantages:</h5><ul class="list" id="-1559139746#-1dvv58_179" start="1"><li class="list-item" id="-1559139746#-1dvv58_181"><p><span class="control" id="-1559139746#-1dvv58_184">Faster</span> than NPM due to parallel package installation.</p></li><li class="list-item" id="-1559139746#-1dvv58_182"><p><span class="control" id="-1559139746#-1dvv58_185">Offline Mode</span> allows reinstallation of previously installed packages without an internet connection.</p></li><li class="list-item" id="-1559139746#-1dvv58_183"><p><span class="control" id="-1559139746#-1dvv58_186">Deterministic</span>: The <span class="inline-code" id="-1559139746#-1dvv58_187">yarn.lock</span> file ensures that every installation will result in the same file structure.</p></li></ul></section></section></section><section><h3 id="-1559139746#comparison" data-toc="comparison#3-Node-Package-managers.md-comparison">Comparison</h3><p id="-1559139746#-1dvv58_188"><span class="control" id="-1559139746#-1dvv58_193">Common Commands</span></p><div class="table-wrapper detached"><table id="-1559139746#-1dvv58_189"><tr class="header-row" id="-1559139746#-1dvv58_194"><th id="-1559139746#-1dvv58_205"><p><span class="control" id="-1559139746#-1dvv58_209">COMMAND</span></p></th><th id="-1559139746#-1dvv58_206"><p><span class="control" id="-1559139746#-1dvv58_210">NPM</span></p></th><th id="-1559139746#-1dvv58_207"><p><span class="control" id="-1559139746#-1dvv58_211">PNPM</span></p></th><th id="-1559139746#-1dvv58_208"><p><span class="control" id="-1559139746#-1dvv58_212">YARN</span></p></th></tr><tr class="" id="-1559139746#-1dvv58_195"><td id="-1559139746#-1dvv58_213"><p><span class="control" id="-1559139746#-1dvv58_217">init</span></p></td><td id="-1559139746#-1dvv58_214"><p><span class="inline-code" id="-1559139746#-1dvv58_218">npm init</span></p></td><td id="-1559139746#-1dvv58_215"><p><span class="inline-code" id="-1559139746#-1dvv58_219">pnpm init</span></p></td><td id="-1559139746#-1dvv58_216"><p><span class="inline-code" id="-1559139746#-1dvv58_220">yarn init</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_196"><td id="-1559139746#-1dvv58_221"><p><span class="control" id="-1559139746#-1dvv58_225">install from package.json</span></p></td><td id="-1559139746#-1dvv58_222"><p><span class="inline-code" id="-1559139746#-1dvv58_226">npm install</span></p></td><td id="-1559139746#-1dvv58_223"><p><span class="inline-code" id="-1559139746#-1dvv58_227">pnpm install</span></p></td><td id="-1559139746#-1dvv58_224"><p><span class="inline-code" id="-1559139746#-1dvv58_228">yarn</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_197"><td id="-1559139746#-1dvv58_229"><p><span class="control" id="-1559139746#-1dvv58_233">add package</span></p></td><td id="-1559139746#-1dvv58_230"><p><span class="inline-code" id="-1559139746#-1dvv58_234">npm install &lt;package&gt; [--location=global]</span></p></td><td id="-1559139746#-1dvv58_231"><p><span class="inline-code" id="-1559139746#-1dvv58_235">pnpm add &lt;package&gt; [--global]</span></p></td><td id="-1559139746#-1dvv58_232"><p><span class="inline-code" id="-1559139746#-1dvv58_236">yarn add &lt;package&gt;</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_198"><td id="-1559139746#-1dvv58_237"><p><span class="control" id="-1559139746#-1dvv58_241">add package as devDependencies</span></p></td><td id="-1559139746#-1dvv58_238"><p><span class="inline-code" id="-1559139746#-1dvv58_242">npm install &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#-1dvv58_239"><p><span class="inline-code" id="-1559139746#-1dvv58_243">pnpm add &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#-1dvv58_240"><p><span class="inline-code" id="-1559139746#-1dvv58_244">yarn add &lt;package&gt; --dev</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_199"><td id="-1559139746#-1dvv58_245"><p><span class="control" id="-1559139746#-1dvv58_249">remove package</span></p></td><td id="-1559139746#-1dvv58_246"><p><span class="inline-code" id="-1559139746#-1dvv58_250">npm uninstall &lt;package&gt; [--location=global]</span></p></td><td id="-1559139746#-1dvv58_247"><p><span class="inline-code" id="-1559139746#-1dvv58_251">pnpm uninstall &lt;package&gt; [--global]</span></p></td><td id="-1559139746#-1dvv58_248"><p><span class="inline-code" id="-1559139746#-1dvv58_252">yarn [global] remove &lt;package&gt;</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_200"><td id="-1559139746#-1dvv58_253"><p><span class="control" id="-1559139746#-1dvv58_257">remove package as devDependencies</span></p></td><td id="-1559139746#-1dvv58_254"><p><span class="inline-code" id="-1559139746#-1dvv58_258">npm uninstall &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#-1dvv58_255"><p><span class="inline-code" id="-1559139746#-1dvv58_259">pnpm uninstall &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#-1dvv58_256"><p><span class="inline-code" id="-1559139746#-1dvv58_260">yarn remove &lt;package&gt; --dev</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_201"><td id="-1559139746#-1dvv58_261"><p><span class="control" id="-1559139746#-1dvv58_265">audit vulnerable dependencies</span></p></td><td id="-1559139746#-1dvv58_262"><p><span class="inline-code" id="-1559139746#-1dvv58_266">npm list --depth 0 [--location=global]</span></p></td><td id="-1559139746#-1dvv58_263"><p><span class="inline-code" id="-1559139746#-1dvv58_267">pnpm list --depth 0 [--global]</span></p></td><td id="-1559139746#-1dvv58_264"><p><span class="inline-code" id="-1559139746#-1dvv58_268">yarn [global] list --depth 0</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_202"><td id="-1559139746#-1dvv58_269"><p><span class="control" id="-1559139746#-1dvv58_273">Run</span></p></td><td id="-1559139746#-1dvv58_270"><p><span class="inline-code" id="-1559139746#-1dvv58_274">npm run &lt;script-name&gt;</span></p></td><td id="-1559139746#-1dvv58_271"><p><span class="inline-code" id="-1559139746#-1dvv58_275">pnpm run &lt;script-name&gt;</span></p></td><td id="-1559139746#-1dvv58_272"><p><span class="inline-code" id="-1559139746#-1dvv58_276">yarn run &lt;script-name&gt;</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_203"><td id="-1559139746#-1dvv58_277"><p><span class="control" id="-1559139746#-1dvv58_281">build</span></p></td><td id="-1559139746#-1dvv58_278"><p><span class="inline-code" id="-1559139746#-1dvv58_282">npm build</span></p></td><td id="-1559139746#-1dvv58_279"><p><span class="inline-code" id="-1559139746#-1dvv58_283">pnpm build</span></p></td><td id="-1559139746#-1dvv58_280"><p><span class="inline-code" id="-1559139746#-1dvv58_284">yarn build</span></p></td></tr><tr class="" id="-1559139746#-1dvv58_204"><td id="-1559139746#-1dvv58_285"><p><span class="control" id="-1559139746#-1dvv58_289">test</span></p></td><td id="-1559139746#-1dvv58_286"><p><span class="inline-code" id="-1559139746#-1dvv58_290">npm test</span></p></td><td id="-1559139746#-1dvv58_287"><p><span class="inline-code" id="-1559139746#-1dvv58_291">pnpm test</span></p></td><td id="-1559139746#-1dvv58_288"><p><span class="inline-code" id="-1559139746#-1dvv58_292">yarn test</span></p></td></tr></table></div><p id="-1559139746#-1dvv58_190"><span class="control" id="-1559139746#-1dvv58_293">Features</span></p><div class="table-wrapper detached"><table id="-1559139746#-1dvv58_191"><tr class="header-row" id="-1559139746#-1dvv58_294"><th id="-1559139746#-1dvv58_300"><p>Feature</p></th><th id="-1559139746#-1dvv58_301"><p>NPM</p></th><th id="-1559139746#-1dvv58_302"><p>PnPm</p></th><th id="-1559139746#-1dvv58_303"><p>Yarn</p></th></tr><tr class="" id="-1559139746#-1dvv58_295"><td id="-1559139746#-1dvv58_304"><p><span class="control" id="-1559139746#-1dvv58_308">Speed</span></p></td><td id="-1559139746#-1dvv58_305"><p>Standard</p></td><td id="-1559139746#-1dvv58_306"><p>Very fast</p></td><td id="-1559139746#-1dvv58_307"><p>Fast</p></td></tr><tr class="" id="-1559139746#-1dvv58_296"><td id="-1559139746#-1dvv58_309"><p><span class="control" id="-1559139746#-1dvv58_313">Disk Usage</span></p></td><td id="-1559139746#-1dvv58_310"><p>Can be heavy on disk space</p></td><td id="-1559139746#-1dvv58_311"><p>Optimized with central storage</p></td><td id="-1559139746#-1dvv58_312"><p>Efficient with caching</p></td></tr><tr class="" id="-1559139746#-1dvv58_297"><td id="-1559139746#-1dvv58_314"><p><span class="control" id="-1559139746#-1dvv58_318">Offline Mode</span></p></td><td id="-1559139746#-1dvv58_315"><p>Limited</p></td><td id="-1559139746#-1dvv58_316"><p>No, but faster for cached files</p></td><td id="-1559139746#-1dvv58_317"><p>Yes</p></td></tr><tr class="" id="-1559139746#-1dvv58_298"><td id="-1559139746#-1dvv58_319"><p><span class="control" id="-1559139746#-1dvv58_323">Dependency Tree</span></p></td><td id="-1559139746#-1dvv58_320"><p>Standard</p></td><td id="-1559139746#-1dvv58_321"><p>Strict</p></td><td id="-1559139746#-1dvv58_322"><p>Flexible but with lockfiles</p></td></tr><tr class="" id="-1559139746#-1dvv58_299"><td id="-1559139746#-1dvv58_324"><p><span class="control" id="-1559139746#-1dvv58_328">Parallel Installs</span></p></td><td id="-1559139746#-1dvv58_325"><p>No</p></td><td id="-1559139746#-1dvv58_326"><p>Yes</p></td><td id="-1559139746#-1dvv58_327"><p>Yes</p></td></tr></table></div><p id="-1559139746#-1dvv58_192">In conclusion, NPM, PnPm, and Yarn all have their strengths and weaknesses, and your choice of package manager depends on your specific needs. <span class="control" id="-1559139746#-1dvv58_329">NPM</span> is the default and easiest to use, <span class="control" id="-1559139746#-1dvv58_330">PnPm</span> optimizes disk space and speed for large projects, and <span class="control" id="-1559139746#-1dvv58_331">Yarn</span> offers performance improvements and more deterministic installs.</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1175139288">3.1 PnPm Cheatsheet</h1><p id="-1175139288#l7hukq_3">Here's a cheat sheet for using PNPM to perform common tasks. PNPM is a fast and efficient package manager for Node.js projects, and this guide will help you get started with some of the most frequently used commands.</p><section><h2 id="-1175139288#1-initialization" data-toc="1-initialization#3-1-PnPm-Cheatsheet.md-1-initialization">1. Initialization</h2><ul class="list" id="-1175139288#l7hukq_15" start="1"><li class="list-item" id="-1175139288#l7hukq_17"><p id="-1175139288#l7hukq_18"><span class="control" id="-1175139288#l7hukq_20">Initialize a new project (create <span class="inline-code" id="-1175139288#l7hukq_21">package.json</span>):</span></p><div class="detached code-block" id="-1175139288#l7hukq_19"><pre><code class="language-bash">pnpm init</code></pre></div></li></ul></section><section><h2 id="-1175139288#2-installing-packages" data-toc="2-installing-packages#3-1-PnPm-Cheatsheet.md-2-installing-packages">2. Installing Packages</h2><ul class="list" id="-1175139288#l7hukq_23" start="1"><li class="list-item" id="-1175139288#l7hukq_25"><p id="-1175139288#l7hukq_30"><span class="control" id="-1175139288#l7hukq_32">Install all dependencies listed in <span class="inline-code" id="-1175139288#l7hukq_33">package.json</span>:</span></p><div class="detached code-block" id="-1175139288#l7hukq_31"><pre><code class="language-bash">pnpm install</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_26"><p id="-1175139288#l7hukq_34"><span class="control" id="-1175139288#l7hukq_36">Install a specific package (e.g., <span class="inline-code" id="-1175139288#l7hukq_37">lodash</span>):</span></p><div class="detached code-block" id="-1175139288#l7hukq_35"><pre><code class="language-bash">pnpm add lodash</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_27"><p id="-1175139288#l7hukq_38"><span class="control" id="-1175139288#l7hukq_42">Install a package as a development dependency:</span></p><div class="detached code-block" id="-1175139288#l7hukq_39"><pre><code class="language-bash">pnpm add eslint --save-dev</code></pre></div><p id="-1175139288#l7hukq_40">or</p><div class="detached code-block" id="-1175139288#l7hukq_41"><pre><code class="language-bash">pnpm add -D eslint</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_28"><p id="-1175139288#l7hukq_43"><span class="control" id="-1175139288#l7hukq_45">Install a specific version of a package:</span></p><div class="detached code-block" id="-1175139288#l7hukq_44"><pre><code class="language-bash">pnpm add lodash@4.17.20</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_29"><p id="-1175139288#l7hukq_46"><span class="control" id="-1175139288#l7hukq_48">Install dependencies without modifying <span class="inline-code" id="-1175139288#l7hukq_49">package.json</span> (useful for CI/CD):</span></p><div class="detached code-block" id="-1175139288#l7hukq_47"><pre><code class="language-bash">pnpm install --frozen-lockfile</code></pre></div></li></ul></section><section><h2 id="-1175139288#3-removing-packages" data-toc="3-removing-packages#3-1-PnPm-Cheatsheet.md-3-removing-packages">3. Removing Packages</h2><ul class="list" id="-1175139288#l7hukq_51" start="1"><li class="list-item" id="-1175139288#l7hukq_53"><p id="-1175139288#l7hukq_54"><span class="control" id="-1175139288#l7hukq_56">Uninstall a package:</span></p><div class="detached code-block" id="-1175139288#l7hukq_55"><pre><code class="language-bash">pnpm remove lodash</code></pre></div></li></ul></section><section><h2 id="-1175139288#4-running-scripts" data-toc="4-running-scripts#3-1-PnPm-Cheatsheet.md-4-running-scripts">4. Running Scripts</h2><ul class="list" id="-1175139288#l7hukq_58" start="1"><li class="list-item" id="-1175139288#l7hukq_60"><p id="-1175139288#l7hukq_62"><span class="control" id="-1175139288#l7hukq_66">Run a script defined in <span class="inline-code" id="-1175139288#l7hukq_67">package.json</span>:</span></p><div class="detached code-block" id="-1175139288#l7hukq_63"><pre><code class="language-bash">pnpm run &lt;script_name&gt;</code></pre></div><p id="-1175139288#l7hukq_64">Example:</p><div class="detached code-block" id="-1175139288#l7hukq_65"><pre><code class="language-bash">pnpm run build</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_61"><p id="-1175139288#l7hukq_68"><span class="control" id="-1175139288#l7hukq_72">Run a package binary without installing it globally:</span></p><div class="detached code-block" id="-1175139288#l7hukq_69"><pre><code class="language-bash">pnpm dlx &lt;package_name&gt;</code></pre></div><p id="-1175139288#l7hukq_70">Example:</p><div class="detached code-block" id="-1175139288#l7hukq_71"><pre><code class="language-bash">pnpm dlx create-react-app my-app</code></pre></div></li></ul></section><section><h2 id="-1175139288#5-working-with-global-packages" data-toc="5-working-with-global-packages#3-1-PnPm-Cheatsheet.md-5-working-with-global-packages">5. Working with Global Packages</h2><ul class="list" id="-1175139288#l7hukq_74" start="1"><li class="list-item" id="-1175139288#l7hukq_76"><p id="-1175139288#l7hukq_78"><span class="control" id="-1175139288#l7hukq_80">Install a package globally:</span></p><div class="detached code-block" id="-1175139288#l7hukq_79"><pre><code class="language-bash">pnpm add -g eslint</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_77"><p id="-1175139288#l7hukq_81"><span class="control" id="-1175139288#l7hukq_83">List globally installed packages:</span></p><div class="detached code-block" id="-1175139288#l7hukq_82"><pre><code class="language-bash">pnpm list -g --depth 0</code></pre></div></li></ul></section><section><h2 id="-1175139288#6-managing-dependencies" data-toc="6-managing-dependencies#3-1-PnPm-Cheatsheet.md-6-managing-dependencies">6. Managing Dependencies</h2><ul class="list" id="-1175139288#l7hukq_85" start="1"><li class="list-item" id="-1175139288#l7hukq_87"><p id="-1175139288#l7hukq_89"><span class="control" id="-1175139288#l7hukq_91">Update all dependencies to the latest versions:</span></p><div class="detached code-block" id="-1175139288#l7hukq_90"><pre><code class="language-bash">pnpm update --latest</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_88"><p id="-1175139288#l7hukq_92"><span class="control" id="-1175139288#l7hukq_94">Install dependencies without running <span class="inline-code" id="-1175139288#l7hukq_95">preinstall</span> and <span class="inline-code" id="-1175139288#l7hukq_96">postinstall</span> scripts:</span></p><div class="detached code-block" id="-1175139288#l7hukq_93"><pre><code class="language-bash">pnpm install --ignore-scripts</code></pre></div></li></ul></section><section><h2 id="-1175139288#7-managing-the-pnpm-cache" data-toc="7-managing-the-pnpm-cache#3-1-PnPm-Cheatsheet.md-7-managing-the-pnpm-cache">7. Managing the PNPM Cache</h2><ul class="list" id="-1175139288#l7hukq_98" start="1"><li class="list-item" id="-1175139288#l7hukq_100"><p id="-1175139288#l7hukq_101"><span class="control" id="-1175139288#l7hukq_103">Clear the PNPM cache:</span></p><div class="detached code-block" id="-1175139288#l7hukq_102"><pre><code class="language-bash">pnpm cache clean</code></pre></div></li></ul></section><section><h2 id="-1175139288#8-workspaces" data-toc="8-workspaces#3-1-PnPm-Cheatsheet.md-8-workspaces">8. Workspaces</h2><ul class="list" id="-1175139288#l7hukq_105" start="1"><li class="list-item" id="-1175139288#l7hukq_107"><p id="-1175139288#l7hukq_110"><span class="control" id="-1175139288#l7hukq_112">Create a new workspace:</span></p><div class="detached code-block" id="-1175139288#l7hukq_111"><pre><code class="language-bash">pnpm init</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_108"><p id="-1175139288#l7hukq_113"><span class="control" id="-1175139288#l7hukq_115">Add a package to a workspace:</span></p><div class="detached code-block" id="-1175139288#l7hukq_114"><pre><code class="language-bash">pnpm add &lt;package_name&gt; -w</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_109"><p id="-1175139288#l7hukq_116"><span class="control" id="-1175139288#l7hukq_120">Run a command in all workspace packages:</span></p><div class="detached code-block" id="-1175139288#l7hukq_117"><pre><code class="language-bash">pnpm -r &lt;command&gt;</code></pre></div><p id="-1175139288#l7hukq_118">Example:</p><div class="detached code-block" id="-1175139288#l7hukq_119"><pre><code class="language-bash">pnpm -r build</code></pre></div></li></ul></section><section><h2 id="-1175139288#9-linking-packages" data-toc="9-linking-packages#3-1-PnPm-Cheatsheet.md-9-linking-packages">9. Linking Packages</h2><ul class="list" id="-1175139288#l7hukq_122" start="1"><li class="list-item" id="-1175139288#l7hukq_124"><p id="-1175139288#l7hukq_126"><span class="control" id="-1175139288#l7hukq_128">Link a package globally:</span></p><div class="detached code-block" id="-1175139288#l7hukq_127"><pre><code class="language-bash">pnpm link</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_125"><p id="-1175139288#l7hukq_129"><span class="control" id="-1175139288#l7hukq_131">Link a package locally within a project:</span></p><div class="detached code-block" id="-1175139288#l7hukq_130"><pre><code class="language-bash">pnpm link &lt;package_name&gt;</code></pre></div></li></ul></section><section><h2 id="-1175139288#10-miscellaneous" data-toc="10-miscellaneous#3-1-PnPm-Cheatsheet.md-10-miscellaneous">10. Miscellaneous</h2><ul class="list" id="-1175139288#l7hukq_133" start="1"><li class="list-item" id="-1175139288#l7hukq_135"><p id="-1175139288#l7hukq_137"><span class="control" id="-1175139288#l7hukq_139">Check for outdated packages:</span></p><div class="detached code-block" id="-1175139288#l7hukq_138"><pre><code class="language-bash">pnpm outdated</code></pre></div></li><li class="list-item" id="-1175139288#l7hukq_136"><p id="-1175139288#l7hukq_140"><span class="control" id="-1175139288#l7hukq_142">List all installed packages:</span></p><div class="detached code-block" id="-1175139288#l7hukq_141"><pre><code class="language-bash">pnpm list</code></pre></div></li></ul></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-2011891282">4. Typescript Configuration</h1><section><h2 id="-2011891282#typescript-configuration-for-a-node-js-app-with-tsx" data-toc="typescript-configuration-for-a-node-js-app-with-tsx#Typescript-Configuration.md-typescript-configuration-for-a-node-js-app-with-tsx">TypeScript Configuration for a Node.js App with tsx</h2><p id="-2011891282#-ay4ely_13">To configure TypeScript in a Node.js project, and add <span class="inline-code" id="-2011891282#-ay4ely_15">tsx</span> (a tool that allows running TypeScript files without needing to transpile manually), we need to make sure the project has the appropriate dependencies and configurations in place. Additionally, we'll create scripts for starting, developing, and building the app.</p></section><section><h2 id="-2011891282#1-setting-up-the-node-js-app" data-toc="1-setting-up-the-node-js-app#Typescript-Configuration.md-1-setting-up-the-node-js-app">1. Setting Up the Node.js App</h2><p id="-2011891282#-ay4ely_16">Start by initializing a new Node.js project if you haven't done so already:</p><div class="detached code-block" id="-2011891282#-ay4ely_17"><pre><code class="language-bash">mkdir my-node-app
cd my-node-app
npm init -y</code></pre></div></section><section><h2 id="-2011891282#2-installing-dependencies" data-toc="2-installing-dependencies#Typescript-Configuration.md-2-installing-dependencies">2. Installing Dependencies</h2><p id="-2011891282#-ay4ely_18">Next, you'll need to install TypeScript, <span class="inline-code" id="-2011891282#-ay4ely_21">tsx</span>, and types for Node.js:</p><div class="detached code-block" id="-2011891282#-ay4ely_19"><pre><code class="language-bash">npm install typescript tsx @types/node --save-dev</code></pre></div><ul class="list" id="-2011891282#-ay4ely_20" start="1"><li class="list-item" id="-2011891282#-ay4ely_22"><p><span class="control" id="-2011891282#-ay4ely_25">typescript</span>: The TypeScript compiler (to compile <span class="inline-code" id="-2011891282#-ay4ely_26">.ts</span> files to JavaScript).</p></li><li class="list-item" id="-2011891282#-ay4ely_23"><p><span class="control" id="-2011891282#-ay4ely_27">tsx</span>: A package that allows you to run TypeScript and JSX (React) files directly without needing to compile.</p></li><li class="list-item" id="-2011891282#-ay4ely_24"><p><span class="control" id="-2011891282#-ay4ely_28">@types/node</span>: Provides TypeScript definitions for Node.js modules (like <span class="inline-code" id="-2011891282#-ay4ely_29">http</span>, <span class="inline-code" id="-2011891282#-ay4ely_30">fs</span>, etc.).</p></li></ul></section><section><h2 id="-2011891282#3-creating-the-tsconfig-json" data-toc="3-creating-the-tsconfig-json#Typescript-Configuration.md-3-creating-the-tsconfig-json">3. Creating the tsconfig.json</h2><p id="-2011891282#-ay4ely_32">TypeScript requires a <span class="inline-code" id="-2011891282#-ay4ely_38">tsconfig.json</span> file for configuration. This file tells the TypeScript compiler how to transpile the <span class="inline-code" id="-2011891282#-ay4ely_39">.ts</span> files. You can create it by running the following command:</p><div class="detached code-block" id="-2011891282#-ay4ely_33"><pre><code class="language-bash">npx tsc --init</code></pre></div><p id="-2011891282#-ay4ely_34">Then, modify the <span class="inline-code" id="-2011891282#-ay4ely_40">tsconfig.json</span> file to suit a typical Node.js environment:</p><p id="-2011891282#-ay4ely_35"><span class="control" id="-2011891282#-ay4ely_41"><span class="inline-code" id="-2011891282#-ay4ely_42">tsconfig.json</span></span>:</p><div class="detached code-block" id="-2011891282#-ay4ely_36"><pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES6&quot;,                     // Target ES6 or later to support modern JavaScript features
    &quot;module&quot;: &quot;CommonJS&quot;,                 // Use CommonJS modules for Node.js
    &quot;rootDir&quot;: &quot;./src&quot;,                   // Source files location
    &quot;outDir&quot;: &quot;./dist&quot;,                   // Output directory for compiled files
    &quot;esModuleInterop&quot;: true,              // Enables support for `import` in CommonJS
    &quot;strict&quot;: true,                       // Enables strict type-checking options
    &quot;skipLibCheck&quot;: true,                 // Skips type checking of declaration files
    &quot;moduleResolution&quot;: &quot;node&quot;,           // For resolving node modules
    &quot;resolveJsonModule&quot;: true,            // Enable importing `.json` files
    &quot;allowSyntheticDefaultImports&quot;: true, // Allow default imports from modules
    &quot;forceConsistentCasingInFileNames&quot;: true // Ensure consistent casing in file names
  },
  &quot;include&quot;: [&quot;src/**/*.ts&quot;],             // Include all TypeScript files in the `src` folder
  &quot;exclude&quot;: [&quot;node_modules&quot;]             // Exclude `node_modules`
}</code></pre></div></section><section><h2 id="-2011891282#4-project-structure" data-toc="4-project-structure#Typescript-Configuration.md-4-project-structure">4. Project Structure</h2><p id="-2011891282#-ay4ely_43">Here's an example of how your project structure should look:</p><div class="detached code-block" id="-2011891282#-ay4ely_44"><pre><code class="language-none">/my-node-app
  ├── /src
  │     ├── index.ts
  ├── /dist                  # Will be generated after build
  ├── package.json
  ├── tsconfig.json
  └── node_modules</code></pre></div></section><section><h2 id="-2011891282#5-creating-scripts-for-start-dev-and-build" data-toc="5-creating-scripts-for-start-dev-and-build#Typescript-Configuration.md-5-creating-scripts-for-start-dev-and-build">5. Creating Scripts for Start, Dev, and Build</h2><p id="-2011891282#-ay4ely_45">Next, let's modify the <span class="inline-code" id="-2011891282#-ay4ely_49">package.json</span> file to include scripts for starting, developing, and building the app:</p><p id="-2011891282#-ay4ely_46"><span class="control" id="-2011891282#-ay4ely_50"><span class="inline-code" id="-2011891282#-ay4ely_51">package.json</span></span>:</p><div class="detached code-block" id="-2011891282#-ay4ely_47"><pre><code class="language-json">{
  &quot;name&quot;: &quot;my-node-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;main&quot;: &quot;dist/index.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node dist/index.js&quot;,              // Start the compiled JavaScript code
    &quot;dev&quot;: &quot;tsx watch src/index.ts&quot;,            // Start the app in development mode with hot-reloading
    &quot;build&quot;: &quot;tsc&quot;                              // Compile TypeScript files to JavaScript
  },
  &quot;devDependencies&quot;: {
    &quot;@types/node&quot;: &quot;^18.0.0&quot;,
    &quot;tsx&quot;: &quot;^3.12.7&quot;,
    &quot;typescript&quot;: &quot;^4.4.3&quot;
  }
}</code></pre></div><section><h3 id="-2011891282#explanation-of-the-scripts" data-toc="explanation-of-the-scripts#Typescript-Configuration.md-explanation-of-the-scripts">Explanation of the scripts:</h3><ul class="list" id="-2011891282#-ay4ely_52" start="1"><li class="list-item" id="-2011891282#-ay4ely_53"><p id="-2011891282#-ay4ely_56"><span class="control" id="-2011891282#-ay4ely_57"><span class="inline-code" id="-2011891282#-ay4ely_60">start</span></span>: This runs the app using <span class="inline-code" id="-2011891282#-ay4ely_58">node</span> after the TypeScript files have been compiled to JavaScript (found in the <span class="inline-code" id="-2011891282#-ay4ely_59">dist</span> directory).</p></li><li class="list-item" id="-2011891282#-ay4ely_54"><p id="-2011891282#-ay4ely_61"><span class="control" id="-2011891282#-ay4ely_62"><span class="inline-code" id="-2011891282#-ay4ely_65">dev</span></span>: This runs the app directly with <span class="inline-code" id="-2011891282#-ay4ely_63">tsx</span>, allowing you to start the TypeScript app in development mode without needing to compile first. <span class="inline-code" id="-2011891282#-ay4ely_64">tsx watch</span> enables hot-reloading so that the server automatically reloads whenever you make changes.</p></li><li class="list-item" id="-2011891282#-ay4ely_55"><p id="-2011891282#-ay4ely_66"><span class="control" id="-2011891282#-ay4ely_67"><span class="inline-code" id="-2011891282#-ay4ely_71">build</span></span>: This runs the TypeScript compiler (<span class="inline-code" id="-2011891282#-ay4ely_68">tsc</span>), which compiles the TypeScript files from the <span class="inline-code" id="-2011891282#-ay4ely_69">src</span> directory into JavaScript in the <span class="inline-code" id="-2011891282#-ay4ely_70">dist</span> directory.</p></li></ul></section></section><section><h2 id="-2011891282#6-example-typescript-file" data-toc="6-example-typescript-file#Typescript-Configuration.md-6-example-typescript-file">6. Example TypeScript File</h2><p id="-2011891282#-ay4ely_72">Now, let's create a simple <span class="inline-code" id="-2011891282#-ay4ely_75">index.ts</span> file in the <span class="inline-code" id="-2011891282#-ay4ely_76">src</span> folder to demonstrate the setup:</p><p id="-2011891282#-ay4ely_73"><span class="control" id="-2011891282#-ay4ely_77"><span class="inline-code" id="-2011891282#-ay4ely_78">src/index.ts</span></span>:</p><div class="detached code-block" id="-2011891282#-ay4ely_74"><pre><code class="language-javascript">import http from 'http';

const hostname = 'localhost';
const port = 3000;

const server = http.createServer((req, res) =&gt; {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello, TypeScript with Node.js!\n');
});

server.listen(port, hostname, () =&gt; {
  console.log(`Server running at http://${hostname}:${port}/`);
});</code></pre></div></section><section><h2 id="-2011891282#7-running-the-app" data-toc="7-running-the-app#Typescript-Configuration.md-7-running-the-app">7. Running the App</h2><section><h3 id="-2011891282#development-mode" data-toc="development-mode#Typescript-Configuration.md-development-mode">Development Mode:</h3><p id="-2011891282#-ay4ely_81">To run the app in development mode with hot-reloading (using <span class="inline-code" id="-2011891282#-ay4ely_84">tsx</span>), run:</p><div class="detached code-block" id="-2011891282#-ay4ely_82"><pre><code class="language-bash">npm run dev</code></pre></div><p id="-2011891282#-ay4ely_83">This will start the server, and any changes made to your TypeScript files will automatically restart the server.</p></section><section><h3 id="-2011891282#build-and-start" data-toc="build-and-start#Typescript-Configuration.md-build-and-start">Build and Start:</h3><p id="-2011891282#-ay4ely_85">To compile your TypeScript code to JavaScript and then run the app:</p><ol class="list list-decimal" id="-2011891282#-ay4ely_86" type="1" start="1"><li class="list-item" id="-2011891282#-ay4ely_88"><p id="-2011891282#-ay4ely_90">First, build the app:</p><div class="detached code-block" id="-2011891282#-ay4ely_91"><pre><code class="language-bash">npm run build</code></pre></div><p id="-2011891282#-ay4ely_92">This will transpile the TypeScript files and output them to the <span class="inline-code" id="-2011891282#-ay4ely_93">dist</span> directory.</p></li><li class="list-item" id="-2011891282#-ay4ely_89"><p id="-2011891282#-ay4ely_94">Then, run the app:</p><div class="detached code-block" id="-2011891282#-ay4ely_95"><pre><code class="language-bash">npm start</code></pre></div></li></ol><p id="-2011891282#-ay4ely_87">This will execute the compiled JavaScript files in the <span class="inline-code" id="-2011891282#-ay4ely_96">dist</span> directory.</p></section></section><section><h2 id="-2011891282#summary" data-toc="summary#Typescript-Configuration.md-summary">Summary</h2><ol class="list list-decimal" id="-2011891282#-ay4ely_97" type="1" start="1"><li class="list-item" id="-2011891282#-ay4ely_99"><p><span class="control" id="-2011891282#-ay4ely_103">Install Dependencies</span>: Install <span class="inline-code" id="-2011891282#-ay4ely_104">typescript</span>, <span class="inline-code" id="-2011891282#-ay4ely_105">tsx</span>, and <span class="inline-code" id="-2011891282#-ay4ely_106">@types/node</span> to set up TypeScript and run TypeScript files in Node.js without manual compilation.</p></li><li class="list-item" id="-2011891282#-ay4ely_100"><p><span class="control" id="-2011891282#-ay4ely_107"><span class="inline-code" id="-2011891282#-ay4ely_110">tsconfig.json</span></span>: Configure TypeScript settings for a Node.js project with <span class="inline-code" id="-2011891282#-ay4ely_108">&quot;module&quot;: &quot;CommonJS&quot;</span> and <span class="inline-code" id="-2011891282#-ay4ely_109">&quot;target&quot;: &quot;ES6&quot;</span>.</p></li><li class="list-item" id="-2011891282#-ay4ely_101"><p><span class="control" id="-2011891282#-ay4ely_111">Scripts</span>: </p><ul class="list" id="-2011891282#-ay4ely_112" start="1"><li class="list-item" id="-2011891282#-ay4ely_113"><p><span class="inline-code" id="-2011891282#-ay4ely_116">start</span>: Runs the compiled app using <span class="inline-code" id="-2011891282#-ay4ely_117">node</span>.</p></li><li class="list-item" id="-2011891282#-ay4ely_114"><p><span class="inline-code" id="-2011891282#-ay4ely_118">dev</span>: Runs the app directly in TypeScript with <span class="inline-code" id="-2011891282#-ay4ely_119">tsx</span> in watch mode.</p></li><li class="list-item" id="-2011891282#-ay4ely_115"><p><span class="inline-code" id="-2011891282#-ay4ely_120">build</span>: Compiles TypeScript files to JavaScript.</p></li></ul></li><li class="list-item" id="-2011891282#-ay4ely_102"><p><span class="control" id="-2011891282#-ay4ely_121">Project Structure</span>: Keep TypeScript source files in a <span class="inline-code" id="-2011891282#-ay4ely_122">src</span> directory and output compiled files into a <span class="inline-code" id="-2011891282#-ay4ely_123">dist</span> directory.</p></li></ol><p id="-2011891282#-ay4ely_98">This setup provides an efficient workflow for TypeScript development in a Node.js environment, leveraging <span class="inline-code" id="-2011891282#-ay4ely_124">tsx</span> for development and <span class="inline-code" id="-2011891282#-ay4ely_125">tsc</span> for building production-ready code.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="215822030">5. Modules</h1><p id="215822030#cigg6c_3">Here&rsquo;s the updated version of the <span class="control" id="215822030#cigg6c_12">Modules</span> documentation that uses <span class="control" id="215822030#cigg6c_13">TypeScript</span> to illustrate how to work with modules in both <span class="control" id="215822030#cigg6c_14">CommonJS</span> and <span class="control" id="215822030#cigg6c_15">ES6</span> formats.</p><p id="215822030#cigg6c_5">Node.js supports two module systems: <span class="control" id="215822030#cigg6c_16">CommonJS</span> (the original module system used by Node.js) and <span class="control" id="215822030#cigg6c_17">ES6 Modules</span> (the standardized modern module system). This document illustrates how to use modules in <span class="control" id="215822030#cigg6c_18">TypeScript</span>, with examples for both module systems.</p><section><h2 id="215822030#what-is-a-module-in-node-js" data-toc="what-is-a-module-in-node-js#4-Modules.md-what-is-a-module-in-node-js">What is a Module in Node.js?</h2><p id="215822030#cigg6c_19">A <span class="control" id="215822030#cigg6c_23">module</span> in Node.js is a reusable block of code that can be imported into other parts of your application. Modules can contain functions, objects, or entire classes that are encapsulated for reuse across multiple files.</p><p id="215822030#cigg6c_20">Key points:</p><ul class="list" id="215822030#cigg6c_21" start="1"><li class="list-item" id="215822030#cigg6c_24"><p><span class="control" id="215822030#cigg6c_27">CommonJS</span>: The traditional module system for Node.js.</p></li><li class="list-item" id="215822030#cigg6c_25"><p><span class="control" id="215822030#cigg6c_28">ES6 Modules</span>: A modern, standardized JavaScript module system.</p></li><li class="list-item" id="215822030#cigg6c_26"><p><span class="control" id="215822030#cigg6c_29">TypeScript</span>: TypeScript adds static typing to JavaScript, enhancing modules with strong types.</p></li></ul></section><section><h2 id="215822030#built-in-modules" data-toc="built-in-modules#4-Modules.md-built-in-modules">Built-in Modules</h2><p id="215822030#cigg6c_30">Node.js provides built-in modules that offer useful utilities such as working with files, creating HTTP servers, handling paths, and more. You can include and use these modules directly in TypeScript.</p><p id="215822030#cigg6c_31">Here&rsquo;s how you can use built-in modules in TypeScript:</p><div class="detached code-block" id="215822030#cigg6c_32"><pre><code class="language-javascript">import * as http from 'http';
import * as fs from 'fs';

const server = http.createServer((req, res) =&gt; {
  fs.readFile('index.html', (err, data) =&gt; {
    if (err) {
      res.writeHead(404, { 'Content-Type': 'text/plain' });
      res.end('File Not Found');
    } else {
      res.writeHead(200, { 'Content-Type': 'text/html' });
      res.end(data);
    }
  });
});

server.listen(8080, () =&gt; {
  console.log('Server running at http://localhost:8080/');
});</code></pre></div></section><section><h2 id="215822030#include-modules" data-toc="include-modules#4-Modules.md-include-modules">Include Modules</h2><p id="215822030#cigg6c_34">TypeScript supports both CommonJS and ES6 module systems. Here&rsquo;s how to include modules in each system.</p><section><h3 id="215822030#1-commonjs-syntax-in-typescript" data-toc="1-commonjs-syntax-in-typescript#4-Modules.md-1-commonjs-syntax-in-typescript">1. CommonJS Syntax in TypeScript</h3><p id="215822030#cigg6c_37">You can use <span class="inline-code" id="215822030#cigg6c_39">require()</span> to import modules in a <span class="control" id="215822030#cigg6c_40">CommonJS</span> format:</p><div class="detached code-block" id="215822030#cigg6c_38"><pre><code class="language-javascript">const http = require('http');  // CommonJS syntax</code></pre></div></section><section><h3 id="215822030#2-es6-module-syntax-in-typescript" data-toc="2-es6-module-syntax-in-typescript#4-Modules.md-2-es6-module-syntax-in-typescript">2. ES6 Module Syntax in TypeScript</h3><p id="215822030#cigg6c_41">You can use <span class="inline-code" id="215822030#cigg6c_45">import</span> in TypeScript to leverage <span class="control" id="215822030#cigg6c_46">ES6 Modules</span>:</p><div class="detached code-block" id="215822030#cigg6c_42"><pre><code class="language-javascript">import * as http from 'http';  // ES6 module syntax</code></pre></div><p id="215822030#cigg6c_43">TypeScript automatically understands the syntax and compiles it into appropriate module systems based on your configuration.</p></section></section><section><h2 id="215822030#create-your-own-modules" data-toc="create-your-own-modules#4-Modules.md-create-your-own-modules">Create Your Own Modules</h2><p id="215822030#cigg6c_47">In TypeScript, you can create custom modules in both <span class="control" id="215822030#cigg6c_50">CommonJS</span> and <span class="control" id="215822030#cigg6c_51">ES6</span> formats. When using TypeScript, you&rsquo;ll also benefit from static typing and type definitions for better clarity and error-checking.</p><section><h3 id="215822030#1-create-a-commonjs-module-in-typescript" data-toc="1-create-a-commonjs-module-in-typescript#4-Modules.md-1-create-a-commonjs-module-in-typescript">1. Create a CommonJS Module in TypeScript</h3><p id="215822030#cigg6c_52">In <span class="control" id="215822030#cigg6c_54">CommonJS</span>, you define and export functions or objects using <span class="inline-code" id="215822030#cigg6c_55">module.exports</span>. TypeScript supports this syntax and compiles it accordingly.</p><section><h4 id="215822030#example-commonjs-module-in-typescript" data-toc="example-commonjs-module-in-typescript#4-Modules.md-example-commonjs-module-in-typescript">Example: CommonJS Module in TypeScript</h4><p id="215822030#cigg6c_56"><span class="control" id="215822030#cigg6c_59">mathOperations.ts</span>:</p><div class="detached code-block" id="215822030#cigg6c_57"><pre><code class="language-javascript">function add(a: number, b: number): number {
  return a + b;
}

function subtract(a: number, b: number): number {
  return a - b;
}

module.exports = {
  add,
  subtract
};</code></pre></div><p id="215822030#cigg6c_58">In this example, the <span class="inline-code" id="215822030#cigg6c_60">add</span> and <span class="inline-code" id="215822030#cigg6c_61">subtract</span> functions are defined and exported using <span class="inline-code" id="215822030#cigg6c_62">module.exports</span>. You can include these functions in other files using <span class="inline-code" id="215822030#cigg6c_63">require()</span>.</p></section></section><section><h3 id="215822030#2-create-an-es6-module-in-typescript" data-toc="2-create-an-es6-module-in-typescript#4-Modules.md-2-create-an-es6-module-in-typescript">2. Create an ES6 Module in TypeScript</h3><p id="215822030#cigg6c_64">With <span class="control" id="215822030#cigg6c_66">ES6 modules</span>, TypeScript allows you to use the <span class="inline-code" id="215822030#cigg6c_67">export</span> keyword to export functionality. This is more modern and aligns with JavaScript&rsquo;s ES6 standards.</p><section><h4 id="215822030#example-es6-module-in-typescript" data-toc="example-es6-module-in-typescript#4-Modules.md-example-es6-module-in-typescript">Example: ES6 Module in TypeScript</h4><p id="215822030#cigg6c_68"><span class="control" id="215822030#cigg6c_72">mathOperations.ts</span>:</p><div class="detached code-block" id="215822030#cigg6c_69"><pre><code class="language-javascript">export function add(a: number, b: number): number {
  return a + b;
}

export function subtract(a: number, b: number): number {
  return a - b;
}</code></pre></div><p id="215822030#cigg6c_70">Here, the <span class="inline-code" id="215822030#cigg6c_73">export</span> keyword is used to expose the <span class="inline-code" id="215822030#cigg6c_74">add</span> and <span class="inline-code" id="215822030#cigg6c_75">subtract</span> functions to other files.</p></section></section></section><section><h2 id="215822030#include-your-own-module" data-toc="include-your-own-module#4-Modules.md-include-your-own-module">Include Your Own Module</h2><p id="215822030#cigg6c_76">Once you&rsquo;ve created your custom module, you can include it in other files. TypeScript supports importing both <span class="control" id="215822030#cigg6c_81">CommonJS</span> and <span class="control" id="215822030#cigg6c_82">ES6</span> modules.</p><section><h3 id="215822030#1-including-a-commonjs-module-in-typescript" data-toc="1-including-a-commonjs-module-in-typescript#4-Modules.md-1-including-a-commonjs-module-in-typescript">1. Including a CommonJS Module in TypeScript</h3><p id="215822030#cigg6c_83">To include a <span class="control" id="215822030#cigg6c_87">CommonJS</span> module in TypeScript, use <span class="inline-code" id="215822030#cigg6c_88">require()</span>:</p><p id="215822030#cigg6c_84"><span class="control" id="215822030#cigg6c_89">app.ts</span>:</p><div class="detached code-block" id="215822030#cigg6c_85"><pre><code class="language-javascript">const math = require('./mathOperations');

const result = math.add(10, 5);
console.log(`Addition result: ${result}`);</code></pre></div><p id="215822030#cigg6c_86">In this example, we use <span class="inline-code" id="215822030#cigg6c_90">require()</span> to import the <span class="inline-code" id="215822030#cigg6c_91">mathOperations.ts</span> file and then use the <span class="inline-code" id="215822030#cigg6c_92">add</span> function from the imported module.</p></section><section><h3 id="215822030#2-including-an-es6-module-in-typescript" data-toc="2-including-an-es6-module-in-typescript#4-Modules.md-2-including-an-es6-module-in-typescript">2. Including an ES6 Module in TypeScript</h3><p id="215822030#cigg6c_93">To include an <span class="control" id="215822030#cigg6c_97">ES6 module</span> in TypeScript, use <span class="inline-code" id="215822030#cigg6c_98">import</span>:</p><p id="215822030#cigg6c_94"><span class="control" id="215822030#cigg6c_99">app.ts</span>:</p><div class="detached code-block" id="215822030#cigg6c_95"><pre><code class="language-javascript">import { add, subtract } from './mathOperations';

console.log(`Addition: ${add(10, 5)}`);
console.log(`Subtraction: ${subtract(10, 5)}`);</code></pre></div><p id="215822030#cigg6c_96">Here, we use the <span class="inline-code" id="215822030#cigg6c_100">import</span> syntax to bring in the <span class="inline-code" id="215822030#cigg6c_101">add</span> and <span class="inline-code" id="215822030#cigg6c_102">subtract</span> functions from <span class="inline-code" id="215822030#cigg6c_103">mathOperations.ts</span>. TypeScript&rsquo;s static typing ensures that only the exported members are accessible, and type checking is enforced.</p></section><section><h3 id="215822030#folder-structure" data-toc="folder-structure#4-Modules.md-folder-structure">Folder Structure:</h3><p id="215822030#cigg6c_104">Your project might have the following folder structure when working with modules in TypeScript:</p><div class="detached code-block" id="215822030#cigg6c_105"><pre><code class="language-none">/my-project
  ├── /modules
  │     └── mathOperations.ts
  ├── app.ts
  └── tsconfig.json</code></pre></div><p id="215822030#cigg6c_106">In this structure, you can import your custom modules like this:</p><div class="detached code-block" id="215822030#cigg6c_107"><pre><code class="language-javascript">import { add } from './modules/mathOperations';  // ES6</code></pre></div><div class="detached code-block" id="215822030#cigg6c_108"><pre><code class="language-javascript">const math = require('./modules/mathOperations');  // CommonJS</code></pre></div></section><section><h3 id="215822030#tsconfig-json-configuration" data-toc="tsconfig-json-configuration#4-Modules.md-tsconfig-json-configuration">tsconfig.json Configuration:</h3><p id="215822030#cigg6c_109">To ensure TypeScript compiles your code correctly, you&rsquo;ll need a <span class="inline-code" id="215822030#cigg6c_115">tsconfig.json</span> file, which defines TypeScript compiler options, including how to handle modules.</p><p id="215822030#cigg6c_110">Here&rsquo;s an example configuration:</p><p id="215822030#cigg6c_111"><span class="control" id="215822030#cigg6c_116">tsconfig.json</span>:</p><div class="detached code-block" id="215822030#cigg6c_112"><pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
     &quot;target&quot;: &quot;ES6&quot;, /* Set the JavaScript language version for emitted JavaScript and include compatible library declarations. */
     &quot;module&quot;: &quot;CommonJS&quot;, /* Specify what module code is generated. */
     &quot;rootDir&quot;: &quot;./src&quot;, /* Specify the root folder within your source files. */
     &quot;outDir&quot;: &quot;./dist&quot;, /* Specify an output folder for all emitted files. */
     &quot;forceConsistentCasingInFileNames&quot;: true, /* Ensure that casing is correct in imports. */
     &quot;esModuleInterop&quot;: true, /* Emit additional JavaScript to ease support for importing CommonJS modules. This enables 'allowSyntheticDefaultImports' for type compatibility. */
     &quot;strict&quot;: true, /* Enable all strict type-checking options. */
     &quot;skipLibCheck&quot;: true /* Skip type checking all .d.ts files. */
  },
  &quot;include&quot;: [&quot;./**/*.ts&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;]
}</code></pre></div><p id="215822030#cigg6c_113">This configuration ensures that TypeScript compiles <span class="inline-code" id="215822030#cigg6c_117">.ts</span> files into the <span class="inline-code" id="215822030#cigg6c_118">dist</span> directory, and it compiles based on the module system you specify (<span class="inline-code" id="215822030#cigg6c_119">commonjs</span> or <span class="inline-code" id="215822030#cigg6c_120">esnext</span> for ES6).</p></section></section><section><h2 id="215822030#summary" data-toc="summary#4-Modules.md-summary">Summary:</h2><ol class="list list-decimal" id="215822030#cigg6c_121" type="1" start="1"><li class="list-item" id="215822030#cigg6c_123"><p id="215822030#cigg6c_129"><span class="control" id="215822030#cigg6c_131">What is a Module?</span></p><ul class="list" id="215822030#cigg6c_130" start="1"><li class="list-item" id="215822030#cigg6c_132"><p>A reusable block of code in Node.js. Modules help organize code efficiently.</p></li></ul></li><li class="list-item" id="215822030#cigg6c_124"><p id="215822030#cigg6c_133"><span class="control" id="215822030#cigg6c_135">Built-in Modules</span>:</p><ul class="list" id="215822030#cigg6c_134" start="1"><li class="list-item" id="215822030#cigg6c_136"><p>Node.js provides various built-in modules like <span class="inline-code" id="215822030#cigg6c_137">http</span>, <span class="inline-code" id="215822030#cigg6c_138">fs</span>, and <span class="inline-code" id="215822030#cigg6c_139">path</span>.</p></li></ul></li><li class="list-item" id="215822030#cigg6c_125"><p id="215822030#cigg6c_140"><span class="control" id="215822030#cigg6c_142">Include Modules</span>:</p><ul class="list" id="215822030#cigg6c_141" start="1"><li class="list-item" id="215822030#cigg6c_143"><p>Use <span class="inline-code" id="215822030#cigg6c_145">require()</span> for <span class="control" id="215822030#cigg6c_146">CommonJS</span> modules.</p></li><li class="list-item" id="215822030#cigg6c_144"><p>Use <span class="inline-code" id="215822030#cigg6c_147">import</span> for <span class="control" id="215822030#cigg6c_148">ES6</span> modules.</p></li></ul></li><li class="list-item" id="215822030#cigg6c_126"><p id="215822030#cigg6c_149"><span class="control" id="215822030#cigg6c_151">Create Your Own Modules</span>:</p><ul class="list" id="215822030#cigg6c_150" start="1"><li class="list-item" id="215822030#cigg6c_152"><p><span class="control" id="215822030#cigg6c_154">CommonJS</span>: Use <span class="inline-code" id="215822030#cigg6c_155">module.exports</span> to export code.</p></li><li class="list-item" id="215822030#cigg6c_153"><p><span class="control" id="215822030#cigg6c_156">ES6</span>: Use the <span class="inline-code" id="215822030#cigg6c_157">export</span> keyword to export code.</p></li></ul></li><li class="list-item" id="215822030#cigg6c_127"><p id="215822030#cigg6c_158"><span class="control" id="215822030#cigg6c_160">Include Your Own Module</span>:</p><ul class="list" id="215822030#cigg6c_159" start="1"><li class="list-item" id="215822030#cigg6c_161"><p><span class="control" id="215822030#cigg6c_163">CommonJS</span>: Use <span class="inline-code" id="215822030#cigg6c_164">require()</span> to import modules.</p></li><li class="list-item" id="215822030#cigg6c_162"><p><span class="control" id="215822030#cigg6c_165">ES6</span>: Use <span class="inline-code" id="215822030#cigg6c_166">import</span> to bring in modules.</p></li></ul></li><li class="list-item" id="215822030#cigg6c_128"><p id="215822030#cigg6c_167"><span class="control" id="215822030#cigg6c_169">TypeScript Integration</span>:</p><ul class="list" id="215822030#cigg6c_168" start="1"><li class="list-item" id="215822030#cigg6c_170"><p>TypeScript adds static typing to both <span class="control" id="215822030#cigg6c_172">CommonJS</span> and <span class="control" id="215822030#cigg6c_173">ES6</span> modules.</p></li><li class="list-item" id="215822030#cigg6c_171"><p>Use <span class="inline-code" id="215822030#cigg6c_174">tsconfig.json</span> to configure the TypeScript compiler based on your preferred module system.</p></li></ul></li></ol></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-920554112">6. Node.js Globals</h1><p id="-920554112#o7tzaq_3">Node.js provides several built-in global objects. These are available globally and don't require importing any modules. They can be accessed from any part of your application. Understanding these global objects is crucial for writing effective and efficient Node.js applications.</p><section><h2 id="-920554112#what-are-globals" data-toc="what-are-globals#6-Node-js-Globals.md-what-are-globals">What are Globals?</h2><p id="-920554112#o7tzaq_7">In Node.js, <span class="control" id="-920554112#o7tzaq_9">Globals</span> are objects or functions that are available throughout the entire runtime without the need to import or require any additional modules. They can be accessed directly within any module or file without needing to reference them explicitly.</p><p id="-920554112#o7tzaq_8">However, it's important to note that Node.js aims to minimize the use of global objects as it encourages modularity and explicit dependencies. Using global objects should be done with caution to avoid issues with maintainability and scope.</p></section><section><h2 id="-920554112#common-node-js-global-objects" data-toc="common-node-js-global-objects#6-Node-js-Globals.md-common-node-js-global-objects">Common Node.js Global Objects</h2><p id="-920554112#o7tzaq_10">The following are some of the most commonly used global objects in Node.js:</p><section><h3 id="-920554112#i-dirname" data-toc="i-dirname#6-Node-js-Globals.md-i-dirname">i. __dirname</h3><p id="-920554112#o7tzaq_17">The <span class="inline-code" id="-920554112#o7tzaq_22">__dirname</span> global object represents the directory name of the current module (i.e., the file containing the running code). It provides the absolute path to the directory where the currently executing file is located.</p><p id="-920554112#o7tzaq_18">This is especially useful for handling file paths dynamically. For example, you may need to access resources or files relative to your module, no matter where your application is being run from.</p><div class="detached code-block" id="-920554112#o7tzaq_19"><pre><code class="language-javascript">import * as path from 'path';
import * as fs from 'fs';

// Example: Use __dirname to handle file paths dynamically
const filePath = path.join(__dirname, 'data', 'example.txt');

// Checking if the file exists before reading
if (fs.existsSync(filePath)) {
  const fileContent = fs.readFileSync(filePath, 'utf-8');
  console.log('File Content:', fileContent);
} else {
  console.log(`File not found at ${filePath}`);
}

// Output __dirname value
console.log('Current directory:', __dirname);</code></pre></div><ul class="list" id="-920554112#o7tzaq_20" start="1"><li class="list-item" id="-920554112#o7tzaq_23"><p><span class="control" id="-920554112#o7tzaq_24">Use case</span>: File path operations that need the relative path from the current module's directory, such as reading or writing files within the application.</p></li></ul></section><section><h3 id="-920554112#ii-filename" data-toc="ii-filename#6-Node-js-Globals.md-ii-filename">ii. __filename</h3><p id="-920554112#o7tzaq_26">The <span class="inline-code" id="-920554112#o7tzaq_30">__filename</span> global object provides the absolute path of the current file being executed, including the file name itself. It can be useful in logging, debugging, or when you need to dynamically work with the path of the current script.</p><div class="detached code-block" id="-920554112#o7tzaq_27"><pre><code class="language-javascript">import * as path from 'path';

// Example: __filename in action
console.log('Full file path:', __filename);

// Extract directory name from __filename
const currentDir = path.dirname(__filename);
console.log('Directory name:', currentDir);

// Extract base file name (e.g., 'index.js') from __filename
const baseFileName = path.basename(__filename);
console.log('Base file name:', baseFileName);

// Extract file extension (e.g., '.js')
const fileExtension = path.extname(__filename);
console.log('File extension:', fileExtension);

// Construct a path relative to this file
const relativePath = path.join(currentDir, 'config', 'settings.json');
console.log('Relative file path:', relativePath);</code></pre></div><ul class="list" id="-920554112#o7tzaq_28" start="1"><li class="list-item" id="-920554112#o7tzaq_31"><p><span class="control" id="-920554112#o7tzaq_32">Use case</span>: Dynamic operations involving the file path of the current file, like logging its location, or performing actions based on the current file&rsquo;s directory.</p></li></ul></section><section><h3 id="-920554112#iii-exports" data-toc="iii-exports#6-Node-js-Globals.md-iii-exports">iii. exports</h3><p id="-920554112#o7tzaq_34">In Node.js, <span class="inline-code" id="-920554112#o7tzaq_40">exports</span> is an object that is used to expose functionalities from a module to other files. It's used to define the public interface of the module. You can export variables, functions, or classes to be available for other files using the <span class="inline-code" id="-920554112#o7tzaq_41">exports</span> object.</p><div class="detached code-block" id="-920554112#o7tzaq_35"><pre><code class="language-javascript">// Example: Using exports in a module
export const sayHello = () =&gt; {
  console.log('Hello, World!');
};</code></pre></div><p id="-920554112#o7tzaq_36">In another file, you can import this function as follows:</p><div class="detached code-block" id="-920554112#o7tzaq_37"><pre><code class="language-javascript">import { sayHello } from './moduleFile';
sayHello();  // Output: Hello, World!</code></pre></div><ul class="list" id="-920554112#o7tzaq_38" start="1"><li class="list-item" id="-920554112#o7tzaq_42"><p><span class="control" id="-920554112#o7tzaq_43">Use case</span>: Sharing functions, variables, or classes from one file to be used in other parts of your application.</p></li></ul></section><section><h3 id="-920554112#iv-module" data-toc="iv-module#6-Node-js-Globals.md-iv-module">iv. module</h3><p id="-920554112#o7tzaq_45">The <span class="inline-code" id="-920554112#o7tzaq_49">module</span> object represents the current module and provides information about it. It's an object that contains properties like <span class="inline-code" id="-920554112#o7tzaq_50">exports</span> (for exporting the module&rsquo;s content) and <span class="inline-code" id="-920554112#o7tzaq_51">filename</span> (to get the absolute path of the module file).</p><div class="detached code-block" id="-920554112#o7tzaq_46"><pre><code class="language-javascript">// Example: Inspecting the module object
console.log(module);  // Output: Module details (such as exports, id, filename)</code></pre></div><p id="-920554112#o7tzaq_47">Using <span class="inline-code" id="-920554112#o7tzaq_52">module.exports</span>, you can overwrite the default exports object.</p></section><section><h3 id="-920554112#v-require" data-toc="v-require#6-Node-js-Globals.md-v-require">v. require()</h3><p id="-920554112#o7tzaq_54"><span class="inline-code" id="-920554112#o7tzaq_59">require()</span> is a built-in function used to include modules. It is used to load and use modules from other files or node modules. In TypeScript, you typically use the <span class="inline-code" id="-920554112#o7tzaq_60">import</span> syntax, but <span class="inline-code" id="-920554112#o7tzaq_61">require()</span> is still relevant in some use cases like when working with older JavaScript modules.</p><div class="detached code-block" id="-920554112#o7tzaq_55"><pre><code class="language-javascript">// Example: Using require() to load a module
const fs = require('fs');
const data = fs.readFileSync('example.txt', 'utf8');
console.log(data);</code></pre></div><p id="-920554112#o7tzaq_56">In TypeScript, the equivalent of <span class="inline-code" id="-920554112#o7tzaq_62">require()</span> is typically:</p><div class="detached code-block" id="-920554112#o7tzaq_57"><pre><code class="language-javascript">import * as fs from 'fs';
const data = fs.readFileSync('example.txt', 'utf8');
console.log(data);</code></pre></div></section></section><section><h2 id="-920554112#es-global-objects" data-toc="es-global-objects#6-Node-js-Globals.md-es-global-objects">ES Global Objects</h2><p id="-920554112#o7tzaq_63">In addition to the Node.js-specific global objects, Node.js also exposes many of the ECMAScript (ES) global objects that are part of the JavaScript language itself. These objects are available in all JavaScript environments (browser, server-side, etc.), and they include objects like:</p><ul class="list" id="-920554112#o7tzaq_64" start="1"><li class="list-item" id="-920554112#o7tzaq_68"><p id="-920554112#o7tzaq_73"><span class="control" id="-920554112#o7tzaq_75"><span class="inline-code" id="-920554112#o7tzaq_76">console</span></span>: Used for printing information, warnings, or errors to the terminal.</p><div class="detached code-block" id="-920554112#o7tzaq_74"><pre><code class="language-javascript">console.log('This is a message');
console.error('This is an error');</code></pre></div></li><li class="list-item" id="-920554112#o7tzaq_69"><p id="-920554112#o7tzaq_77"><span class="control" id="-920554112#o7tzaq_79"><span class="inline-code" id="-920554112#o7tzaq_80">setTimeout()</span>/<span class="inline-code" id="-920554112#o7tzaq_81">setInterval()</span></span>: Used to execute a function after a specified delay or repeatedly at intervals.</p><div class="detached code-block" id="-920554112#o7tzaq_78"><pre><code class="language-javascript">setTimeout(() =&gt; {
  console.log('This message appears after 2 seconds');
}, 2000);

setInterval(() =&gt; {
  console.log('This message repeats every 3 seconds');
}, 3000);</code></pre></div></li><li class="list-item" id="-920554112#o7tzaq_70"><p id="-920554112#o7tzaq_82"><span class="control" id="-920554112#o7tzaq_84"><span class="inline-code" id="-920554112#o7tzaq_85">Promise</span></span>: A global object that represents an asynchronous operation that may complete at some point in the future.</p><div class="detached code-block" id="-920554112#o7tzaq_83"><pre><code class="language-javascript">const promise = new Promise((resolve, reject) =&gt; {
  setTimeout(() =&gt; {
    resolve('Promise resolved!');
  }, 1000);
});

promise.then(message =&gt; {
  console.log(message);  // Output: Promise resolved!
});</code></pre></div></li><li class="list-item" id="-920554112#o7tzaq_71"><p id="-920554112#o7tzaq_86"><span class="control" id="-920554112#o7tzaq_88"><span class="inline-code" id="-920554112#o7tzaq_90">Buffer</span></span>: Available globally in Node.js, the <span class="inline-code" id="-920554112#o7tzaq_89">Buffer</span> class is used to handle binary data.</p><div class="detached code-block" id="-920554112#o7tzaq_87"><pre><code class="language-javascript">const buffer = Buffer.from('Hello, world!', 'utf8');
console.log(buffer.toString());  // Output: Hello, world!</code></pre></div></li><li class="list-item" id="-920554112#o7tzaq_72"><p id="-920554112#o7tzaq_91"><span class="control" id="-920554112#o7tzaq_93"><span class="inline-code" id="-920554112#o7tzaq_94">process</span></span>: A Node.js-specific object that provides information about the current process, as well as methods for controlling it.</p><div class="detached code-block" id="-920554112#o7tzaq_92"><pre><code class="language-javascript">console.log(process.env);  // Outputs environment variables
process.exit(1);  // Terminates the process with an error code</code></pre></div></li></ul><p id="-920554112#o7tzaq_65">These objects are available globally in Node.js as part of the underlying JavaScript language and the Node.js runtime.</p><p id="-920554112#o7tzaq_67">This section on <span class="control" id="-920554112#o7tzaq_95">Node.js Globals</span> introduces developers to essential global objects they will frequently encounter when building applications in Node.js. It provides a solid foundation for understanding the Node.js environment and its integration with ECMAScript features.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1815655717">7. HTTP Module</h1><p id="-1815655717#-os7jd5_3">The HTTP module in Node.js provides the functionality to create web servers and handle HTTP requests and responses. Additionally, Node.js supports HTTP/2 and HTTPS for improved performance and secure communication. Each protocol offers unique features and is widely used to handle web traffic.</p><section><h2 id="-1815655717#http" data-toc="http#7-HTTP-Module.md-http">HTTP</h2><p id="-1815655717#-os7jd5_8">The HTTP (Hypertext Transfer Protocol) module in Node.js is used to create and manage basic web servers. It provides functionality to create a server, listen for incoming requests, and respond with data. This is one of the core modules in Node.js, allowing developers to set up a web server with minimal setup.</p><section><h3 id="-1815655717#key-features" data-toc="key-features#7-HTTP-Module.md-key-features">Key Features:</h3><ul class="list" id="-1815655717#-os7jd5_13" start="1"><li class="list-item" id="-1815655717#-os7jd5_14"><p>Handling basic HTTP requests and responses (GET, POST, PUT, DELETE, etc.)</p></li><li class="list-item" id="-1815655717#-os7jd5_15"><p>Managing request headers and response data</p></li><li class="list-item" id="-1815655717#-os7jd5_16"><p>Easy access to URL and query parameters</p></li></ul></section><section><h3 id="-1815655717#example-basic-http-server-in-node-js-with-typescript" data-toc="example-basic-http-server-in-node-js-with-typescript#7-HTTP-Module.md-example-basic-http-server-in-node-js-with-typescript">Example: Basic HTTP Server in Node.js with TypeScript</h3><div class="detached code-block" id="-1815655717#-os7jd5_17"><pre><code class="language-javascript">import * as http from 'http';

// Create a basic HTTP server
const server = http.createServer((req, res) =&gt; {
  // Set the response header and status code
  res.writeHead(200, { 'Content-Type': 'text/plain' });

  // Send a response based on the URL
  if (req.url === '/') {
    res.end('Welcome to the homepage!');
  } else if (req.url === '/about') {
    res.end('About us page');
  } else {
    res.end('404 - Page not found');
  }
});

// Listen on port 3000
server.listen(3000, () =&gt; {
  console.log('Server is running on http://localhost:3000');
});</code></pre></div></section><section><h3 id="-1815655717#explanation" data-toc="explanation#7-HTTP-Module.md-explanation">Explanation:</h3><ul class="list" id="-1815655717#-os7jd5_18" start="1"><li class="list-item" id="-1815655717#-os7jd5_19"><p><span class="control" id="-1815655717#-os7jd5_23"><span class="inline-code" id="-1815655717#-os7jd5_24">http.createServer()</span></span>: Creates an HTTP server that listens for incoming requests.</p></li><li class="list-item" id="-1815655717#-os7jd5_20"><p><span class="control" id="-1815655717#-os7jd5_25"><span class="inline-code" id="-1815655717#-os7jd5_26">req.url</span></span>: Captures the URL of the incoming request, which allows routing to different responses.</p></li><li class="list-item" id="-1815655717#-os7jd5_21"><p><span class="control" id="-1815655717#-os7jd5_27"><span class="inline-code" id="-1815655717#-os7jd5_28">res.writeHead()</span></span>: Sets the HTTP status code and headers before sending the response.</p></li><li class="list-item" id="-1815655717#-os7jd5_22"><p><span class="control" id="-1815655717#-os7jd5_29"><span class="inline-code" id="-1815655717#-os7jd5_30">res.end()</span></span>: Ends the response and sends it to the client.</p></li></ul></section><section><h3 id="-1815655717#use-cases" data-toc="use-cases#7-HTTP-Module.md-use-cases">Use Cases:</h3><ul class="list" id="-1815655717#-os7jd5_31" start="1"><li class="list-item" id="-1815655717#-os7jd5_33"><p>Lightweight web servers for testing or small applications.</p></li><li class="list-item" id="-1815655717#-os7jd5_34"><p>Handling basic APIs and static file serving.</p></li></ul></section></section><section><h2 id="-1815655717#http-2" data-toc="http-2#7-HTTP-Module.md-http-2">HTTP/2</h2><p id="-1815655717#-os7jd5_35">HTTP/2 is a major revision of the HTTP protocol that introduces several improvements over HTTP/1.1, including better performance and reduced latency. Node.js provides native support for HTTP/2 via the <span class="inline-code" id="-1815655717#-os7jd5_40">http2</span> module. Key benefits include multiplexing (allowing multiple requests and responses to be sent over a single connection), header compression, and server push.</p><section><h3 id="-1815655717#key-features" data-toc="key-features#7-HTTP-Module.md-key-features">Key Features:</h3><ul class="list" id="-1815655717#-os7jd5_41" start="1"><li class="list-item" id="-1815655717#-os7jd5_42"><p><span class="control" id="-1815655717#-os7jd5_45">Multiplexing</span>: Multiple requests and responses over a single TCP connection.</p></li><li class="list-item" id="-1815655717#-os7jd5_43"><p><span class="control" id="-1815655717#-os7jd5_46">Header Compression</span>: Compresses HTTP headers to reduce overhead.</p></li><li class="list-item" id="-1815655717#-os7jd5_44"><p><span class="control" id="-1815655717#-os7jd5_47">Server Push</span>: The server can push resources (like CSS, JS files) to the client before the client even requests them.</p></li></ul></section><section><h3 id="-1815655717#example-basic-http-2-server-in-node-js-with-typescript" data-toc="example-basic-http-2-server-in-node-js-with-typescript#7-HTTP-Module.md-example-basic-http-2-server-in-node-js-with-typescript">Example: Basic HTTP/2 Server in Node.js with TypeScript</h3><div class="detached code-block" id="-1815655717#-os7jd5_48"><pre><code class="language-javascript">import * as http2 from 'http2';
import * as fs from 'fs';

// Load SSL certificates for secure connection
const options = {
  key: fs.readFileSync('server-key.pem'),
  cert: fs.readFileSync('server-cert.pem')
};

// Create an HTTP/2 server
const server = http2.createSecureServer(options);

server.on('stream', (stream, headers) =&gt; {
  // Respond to HTTP/2 requests
  const path = headers[':path'];
  
  if (path === '/') {
    stream.respond({
      'content-type': 'text/html',
      ':status': 200
    });
    stream.end('&lt;h1&gt;Welcome to the HTTP/2 Server&lt;/h1&gt;');
  } else if (path === '/about') {
    stream.respond({
      'content-type': 'text/html',
      ':status': 200
    });
    stream.end('&lt;h1&gt;About Us&lt;/h1&gt;');
  } else {
    stream.respond({
      ':status': 404
    });
    stream.end('404 - Not Found');
  }
});

// Listen on port 8443
server.listen(8443, () =&gt; {
  console.log('HTTP/2 server is running on https://localhost:8443');
});</code></pre></div></section><section><h3 id="-1815655717#explanation" data-toc="explanation#7-HTTP-Module.md-explanation">Explanation:</h3><ul class="list" id="-1815655717#-os7jd5_49" start="1"><li class="list-item" id="-1815655717#-os7jd5_50"><p><span class="control" id="-1815655717#-os7jd5_53"><span class="inline-code" id="-1815655717#-os7jd5_54">http2.createSecureServer()</span></span>: Creates a secure HTTP/2 server using SSL certificates.</p></li><li class="list-item" id="-1815655717#-os7jd5_51"><p><span class="control" id="-1815655717#-os7jd5_55"><span class="inline-code" id="-1815655717#-os7jd5_56">stream.respond()</span></span>: Sends headers and status code for each incoming request.</p></li><li class="list-item" id="-1815655717#-os7jd5_52"><p><span class="control" id="-1815655717#-os7jd5_57"><span class="inline-code" id="-1815655717#-os7jd5_58">stream.end()</span></span>: Ends the response and sends data to the client.</p></li></ul></section><section><h3 id="-1815655717#use-cases" data-toc="use-cases#7-HTTP-Module.md-use-cases">Use Cases:</h3><ul class="list" id="-1815655717#-os7jd5_59" start="1"><li class="list-item" id="-1815655717#-os7jd5_61"><p>Modern web applications that require faster loading times and efficient resource loading.</p></li><li class="list-item" id="-1815655717#-os7jd5_62"><p>Applications that need to support Server Push for improved user experience.</p></li></ul></section></section><section><h2 id="-1815655717#https" data-toc="https#7-HTTP-Module.md-https">HTTPS</h2><p id="-1815655717#-os7jd5_63">HTTPS (Hypertext Transfer Protocol Secure) is an extension of HTTP that provides secure communication over the network using SSL/TLS encryption. In Node.js, the <span class="inline-code" id="-1815655717#-os7jd5_68">https</span> module is used to create secure servers. HTTPS ensures that all data exchanged between the server and the client is encrypted, protecting sensitive information from being intercepted.</p><section><h3 id="-1815655717#key-features" data-toc="key-features#7-HTTP-Module.md-key-features">Key Features:</h3><ul class="list" id="-1815655717#-os7jd5_69" start="1"><li class="list-item" id="-1815655717#-os7jd5_70"><p><span class="control" id="-1815655717#-os7jd5_72">SSL/TLS Encryption</span>: Secure communication using certificates.</p></li><li class="list-item" id="-1815655717#-os7jd5_71"><p><span class="control" id="-1815655717#-os7jd5_73">Secure Data Transmission</span>: Protects sensitive information (like login credentials, payment info).</p></li></ul></section><section><h3 id="-1815655717#example-basic-https-server-in-node-js-with-typescript" data-toc="example-basic-https-server-in-node-js-with-typescript#7-HTTP-Module.md-example-basic-https-server-in-node-js-with-typescript">Example: Basic HTTPS Server in Node.js with TypeScript</h3><div class="detached code-block" id="-1815655717#-os7jd5_74"><pre><code class="language-javascript">import * as https from 'https';
import * as fs from 'fs';

// Load SSL certificates
const options = {
  key: fs.readFileSync('server-key.pem'),
  cert: fs.readFileSync('server-cert.pem')
};

// Create a basic HTTPS server
const server = https.createServer(options, (req, res) =&gt; {
  res.writeHead(200, { 'Content-Type': 'text/plain' });

  // Respond to requests based on URL
  if (req.url === '/') {
    res.end('Welcome to the secure homepage!');
  } else if (req.url === '/about') {
    res.end('About us page (secure)');
  } else {
    res.end('404 - Secure page not found');
  }
});

// Listen on port 443 (default for HTTPS)
server.listen(443, () =&gt; {
  console.log('HTTPS server is running on https://localhost');
});</code></pre></div></section><section><h3 id="-1815655717#explanation" data-toc="explanation#7-HTTP-Module.md-explanation">Explanation:</h3><ul class="list" id="-1815655717#-os7jd5_75" start="1"><li class="list-item" id="-1815655717#-os7jd5_76"><p><span class="control" id="-1815655717#-os7jd5_79">SSL Certificates</span>: The <span class="inline-code" id="-1815655717#-os7jd5_80">options</span> object includes the private key and certificate required for secure connections.</p></li><li class="list-item" id="-1815655717#-os7jd5_77"><p><span class="control" id="-1815655717#-os7jd5_81"><span class="inline-code" id="-1815655717#-os7jd5_82">https.createServer()</span></span>: Creates an HTTPS server using SSL/TLS encryption.</p></li><li class="list-item" id="-1815655717#-os7jd5_78"><p><span class="control" id="-1815655717#-os7jd5_83">Port 443</span>: The standard port for HTTPS, ensuring that all communication is encrypted.</p></li></ul></section><section><h3 id="-1815655717#use-cases" data-toc="use-cases#7-HTTP-Module.md-use-cases">Use Cases:</h3><ul class="list" id="-1815655717#-os7jd5_84" start="1"><li class="list-item" id="-1815655717#-os7jd5_86"><p>Websites or APIs that need to handle sensitive data securely, such as login systems, financial transactions, or private communications.</p></li><li class="list-item" id="-1815655717#-os7jd5_87"><p>Any application that wants to ensure security and privacy by default.</p></li></ul></section></section><section><h2 id="-1815655717#summary" data-toc="summary#7-HTTP-Module.md-summary">Summary</h2><ul class="list" id="-1815655717#-os7jd5_88" start="1"><li class="list-item" id="-1815655717#-os7jd5_90"><p><span class="control" id="-1815655717#-os7jd5_93">HTTP</span>: Ideal for building simple web servers or APIs where performance and security are not primary concerns. However, it is commonly used for local development and testing.</p></li><li class="list-item" id="-1815655717#-os7jd5_91"><p><span class="control" id="-1815655717#-os7jd5_94">HTTP/2</span>: Offers significant performance improvements over HTTP/1.1, including multiplexing and server push, which makes it ideal for modern web applications.</p></li><li class="list-item" id="-1815655717#-os7jd5_92"><p><span class="control" id="-1815655717#-os7jd5_95">HTTPS</span>: Provides a secure communication layer with SSL/TLS encryption, essential for any application handling sensitive user data. It ensures the integrity and privacy of data exchanged between client and server.</p></li></ul><p id="-1815655717#-os7jd5_89">These modules enable developers to create flexible, high-performance, and secure applications for various use cases.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="2035172722">7.1 Install OpenSSL on Windows</h1><p id="2035172722#-6zj5yy_3">You can generate the <span class="inline-code" id="2035172722#-6zj5yy_9">server-key.pem</span> and <span class="inline-code" id="2035172722#-6zj5yy_10">server-cert.pem</span> files on Windows using OpenSSL. Here's a step-by-step guide to generate the self-signed certificates on Windows.</p><section><h2 id="2035172722#step-1-install-openssl-on-windows" data-toc="step-1-install-openssl-on-windows#Install-OpenSSL-on-Windows.md-step-1-install-openssl-on-windows">Step 1: Install OpenSSL on Windows</h2><p id="2035172722#-6zj5yy_11">If you don't have OpenSSL installed on Windows, follow these steps:</p><ol class="list list-decimal" id="2035172722#-6zj5yy_12" type="1" start="1"><li class="list-item" id="2035172722#-6zj5yy_14"><p>Download the OpenSSL Windows installer from this link (<a href="https://slproweb.com/products/Win32OpenSSL.html">https://slproweb.com/products/Win32OpenSSL.html</a>).</p></li><li class="list-item" id="2035172722#-6zj5yy_15"><p>Install OpenSSL, and during the installation, ensure that you add OpenSSL to the system PATH.</p></li></ol><p id="2035172722#-6zj5yy_13">After installation, you should be able to use <span class="inline-code" id="2035172722#-6zj5yy_17">openssl</span> commands from the Command Prompt or PowerShell.</p></section><section><h2 id="2035172722#step-2-open-command-prompt-or-powershell" data-toc="step-2-open-command-prompt-or-powershell#Install-OpenSSL-on-Windows.md-step-2-open-command-prompt-or-powershell">Step 2: Open Command Prompt or PowerShell</h2><p id="2035172722#-6zj5yy_18">Once OpenSSL is installed, open a <span class="control" id="2035172722#-6zj5yy_19">Command Prompt</span> or <span class="control" id="2035172722#-6zj5yy_20">PowerShell</span> with administrative privileges.</p></section><section><h2 id="2035172722#step-3-generate-the-private-key-and-self-signed-certificate" data-toc="step-3-generate-the-private-key-and-self-signed-certificate#Install-OpenSSL-on-Windows.md-step-3-generate-the-private-key-and-self-signed-certificate">Step 3: Generate the Private Key and Self-Signed Certificate</h2><section><h3 id="2035172722#1-generate-the-private-key-server-key-pem" data-toc="1-generate-the-private-key-server-key-pem#Install-OpenSSL-on-Windows.md-1-generate-the-private-key-server-key-pem">1. Generate the Private Key (server-key.pem)</h3><p id="2035172722#-6zj5yy_25">Run the following command to generate a 2048-bit RSA private key:</p><div class="detached code-block" id="2035172722#-6zj5yy_26"><pre><code class="language-bash">openssl genrsa -out server-key.pem 2048</code></pre></div><p id="2035172722#-6zj5yy_27">This command will create the <span class="inline-code" id="2035172722#-6zj5yy_29">server-key.pem</span> file, which contains the private key.</p></section><section><h3 id="2035172722#2-generate-the-certificate-signing-request-csr" data-toc="2-generate-the-certificate-signing-request-csr#Install-OpenSSL-on-Windows.md-2-generate-the-certificate-signing-request-csr">2. Generate the Certificate Signing Request (CSR)</h3><p id="2035172722#-6zj5yy_30">Next, generate a Certificate Signing Request (CSR) using the private key:</p><div class="detached code-block" id="2035172722#-6zj5yy_31"><pre><code class="language-bash">openssl req -new -key server-key.pem -out server-csr.pem</code></pre></div><p id="2035172722#-6zj5yy_32">When prompted, enter the required information. Here's an example:</p><div class="detached code-block" id="2035172722#-6zj5yy_33"><pre><code class="language-none">Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:California
Locality Name (eg, city) []:San Francisco
Organization Name (eg, company) [Internet Widgits Pty Ltd]:MyCompany
Organizational Unit Name (eg, section) []:Development
Common Name (e.g. server FQDN or YOUR name) []:localhost
Email Address []:admin@mycompany.com</code></pre></div><p id="2035172722#-6zj5yy_34">For the <span class="control" id="2035172722#-6zj5yy_35">Common Name</span>, use <span class="inline-code" id="2035172722#-6zj5yy_36">localhost</span> if you're generating the certificate for local development.</p></section><section><h3 id="2035172722#3-generate-the-self-signed-certificate-server-cert-pem" data-toc="3-generate-the-self-signed-certificate-server-cert-pem#Install-OpenSSL-on-Windows.md-3-generate-the-self-signed-certificate-server-cert-pem">3. Generate the Self-Signed Certificate (server-cert.pem)</h3><p id="2035172722#-6zj5yy_38">Finally, generate a self-signed certificate using the CSR and the private key:</p><div class="detached code-block" id="2035172722#-6zj5yy_39"><pre><code class="language-bash">openssl x509 -req -in server-csr.pem -signkey server-key.pem -out server-cert.pem -days 365</code></pre></div><p id="2035172722#-6zj5yy_40">This will create the <span class="inline-code" id="2035172722#-6zj5yy_42">server-cert.pem</span> file, which is valid for 365 days.</p></section></section><section><h2 id="2035172722#step-4-use-the-certificates-in-your-node-js-application" data-toc="step-4-use-the-certificates-in-your-node-js-application#Install-OpenSSL-on-Windows.md-step-4-use-the-certificates-in-your-node-js-application">Step 4: Use the Certificates in Your Node.js Application</h2><p id="2035172722#-6zj5yy_43">You should now have the following files in your working directory:</p><ul class="list" id="2035172722#-6zj5yy_44" start="1"><li class="list-item" id="2035172722#-6zj5yy_47"><p><span class="inline-code" id="2035172722#-6zj5yy_49">server-key.pem</span>: The private key.</p></li><li class="list-item" id="2035172722#-6zj5yy_48"><p><span class="inline-code" id="2035172722#-6zj5yy_50">server-cert.pem</span>: The self-signed certificate.</p></li></ul><p id="2035172722#-6zj5yy_45">These files can be used in your Node.js HTTPS and HTTP/2 applications. Here's how to use them:</p><div class="detached code-block" id="2035172722#-6zj5yy_46"><pre><code class="language-javascript">import * as https from 'https';
import * as http2 from 'http2';
import * as fs from 'fs';

// Load the certificate and key files
const options = {
  key: fs.readFileSync('server-key.pem'),
  cert: fs.readFileSync('server-cert.pem'),
};

// HTTPS server example
const httpsServer = https.createServer(options, (req, res) =&gt; {
  res.writeHead(200);
  res.end('Hello, secure HTTPS world!');
});
httpsServer.listen(443, () =&gt; {
  console.log('HTTPS server running at https://localhost');
});

// HTTP/2 server example
const http2Server = http2.createSecureServer(options);
http2Server.on('stream', (stream, headers) =&gt; {
  stream.respond({ ':status': 200 });
  stream.end('Hello, HTTP/2 world!');
});
http2Server.listen(8443, () =&gt; {
  console.log('HTTP/2 server running at https://localhost:8443');
});</code></pre></div></section><section><h2 id="2035172722#final-notes" data-toc="final-notes#Install-OpenSSL-on-Windows.md-final-notes">Final Notes:</h2><ul class="list" id="2035172722#-6zj5yy_51" start="1"><li class="list-item" id="2035172722#-6zj5yy_52"><p>You can use these certificates for local development. When using them in a browser, it will show a security warning because the certificates are self-signed and not trusted by default.</p></li><li class="list-item" id="2035172722#-6zj5yy_53"><p>In production, you'll need to obtain SSL certificates from a trusted Certificate Authority (CA), such as Let's Encrypt or a paid provider like DigiCert or GlobalSign.</p></li></ul></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="343909646">8. File System Module</h1><p id="343909646#-bgjvme_3">Node.js provides a built-in module called <span class="inline-code" id="343909646#-bgjvme_11">fs</span> (File System), which allows you to interact with the file system on your server. With this module, you can perform various file operations such as reading, writing, updating, deleting, and renaming files. You can also use Node.js as a file server to handle file requests from clients.</p><section><h2 id="343909646#node-js-as-a-file-server" data-toc="node-js-as-a-file-server#8-File-System-Module.md-node-js-as-a-file-server">Node.js as a File Server</h2><p id="343909646#-bgjvme_12">Using Node.js as a file server, you can read and serve files to users, or allow file manipulations like creating, updating, deleting, or renaming files. The <span class="inline-code" id="343909646#-bgjvme_14">fs</span> module provides both asynchronous and synchronous methods for these operations. It's important to use asynchronous methods whenever possible to prevent blocking the event loop.</p><p id="343909646#-bgjvme_13">Below are some common operations you can perform with the <span class="inline-code" id="343909646#-bgjvme_15">fs</span> module:</p></section><section><h2 id="343909646#i-read-files" data-toc="i-read-files#8-File-System-Module.md-i-read-files">i. Read Files</h2><p id="343909646#-bgjvme_16">To read the contents of a file, you can use the <span class="inline-code" id="343909646#-bgjvme_20">fs.readFile()</span> method asynchronously. This method reads the entire file into memory.</p><section><h3 id="343909646#example-reading-a-file-asynchronously" data-toc="example-reading-a-file-asynchronously#8-File-System-Module.md-example-reading-a-file-asynchronously">Example: Reading a File Asynchronously</h3><div class="detached code-block" id="343909646#-bgjvme_21"><pre><code class="language-javascript">import * as fs from 'fs';
import * as http from 'http';

// Example: Serving a file using Node.js
const server = http.createServer((req, res) =&gt; {
  // Reading the requested file asynchronously
  fs.readFile('example.txt', 'utf-8', (err, data) =&gt; {
    if (err) {
      res.writeHead(404, { 'Content-Type': 'text/plain' });
      res.end('File not found');
    } else {
      res.writeHead(200, { 'Content-Type': 'text/plain' });
      res.end(data);
    }
  });
});

// Listen on port 3000
server.listen(3000, () =&gt; {
  console.log('Server is running at http://localhost:3000');
});</code></pre></div></section><section><h3 id="343909646#explanation" data-toc="explanation#8-File-System-Module.md-explanation">Explanation:</h3><ul class="list" id="343909646#-bgjvme_22" start="1"><li class="list-item" id="343909646#-bgjvme_23"><p><span class="control" id="343909646#-bgjvme_25"><span class="inline-code" id="343909646#-bgjvme_27">fs.readFile()</span></span>: Reads the contents of the <span class="inline-code" id="343909646#-bgjvme_26">example.txt</span> file asynchronously.</p></li><li class="list-item" id="343909646#-bgjvme_24"><p><span class="control" id="343909646#-bgjvme_28">Error Handling</span>: If the file does not exist, an error message is sent back to the client.</p></li></ul></section><section><h3 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h3><ul class="list" id="343909646#-bgjvme_29" start="1"><li class="list-item" id="343909646#-bgjvme_30"><p>Serve files like HTML, CSS, JavaScript, or other resources to clients in a web server.</p></li></ul></section></section><section><h2 id="343909646#ii-create-files" data-toc="ii-create-files#8-File-System-Module.md-ii-create-files">ii. Create Files</h2><p id="343909646#-bgjvme_31">You can create new files in Node.js using <span class="inline-code" id="343909646#-bgjvme_35">fs.writeFile()</span> or <span class="inline-code" id="343909646#-bgjvme_36">fs.appendFile()</span>. The <span class="inline-code" id="343909646#-bgjvme_37">writeFile()</span> method creates a new file and writes content to it, overwriting the file if it already exists, while <span class="inline-code" id="343909646#-bgjvme_38">appendFile()</span> adds data to the end of an existing file or creates the file if it doesn&rsquo;t exist.</p><section><h3 id="343909646#example-creating-a-new-file" data-toc="example-creating-a-new-file#8-File-System-Module.md-example-creating-a-new-file">Example: Creating a New File</h3><div class="detached code-block" id="343909646#-bgjvme_39"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Creating and writing to a file
fs.writeFile('newfile.txt', 'Hello, this is a newly created file!', (err) =&gt; {
  if (err) throw err;
  console.log('File created and written successfully');
});</code></pre></div></section><section><h3 id="343909646#example-appending-data-to-a-file" data-toc="example-appending-data-to-a-file#8-File-System-Module.md-example-appending-data-to-a-file">Example: Appending Data to a File</h3><div class="detached code-block" id="343909646#-bgjvme_40"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Appending data to an existing file
fs.appendFile('newfile.txt', '\nAppending more content to the file.', (err) =&gt; {
  if (err) throw err;
  console.log('Content appended successfully');
});</code></pre></div></section><section><h3 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h3><ul class="list" id="343909646#-bgjvme_41" start="1"><li class="list-item" id="343909646#-bgjvme_42"><p>Creating new files for logging, storing data, or dynamically generating files.</p></li></ul></section></section><section><h2 id="343909646#iii-update-files" data-toc="iii-update-files#8-File-System-Module.md-iii-update-files">iii. Update Files</h2><p id="343909646#-bgjvme_43">You can update a file by either writing to it again (overwriting the content) using <span class="inline-code" id="343909646#-bgjvme_47">fs.writeFile()</span> or appending new content to the existing file using <span class="inline-code" id="343909646#-bgjvme_48">fs.appendFile()</span>.</p><section><h3 id="343909646#example-overwriting-a-file" data-toc="example-overwriting-a-file#8-File-System-Module.md-example-overwriting-a-file">Example: Overwriting a File</h3><div class="detached code-block" id="343909646#-bgjvme_49"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Overwriting the content of a file
fs.writeFile('newfile.txt', 'This content replaces the old one.', (err) =&gt; {
  if (err) throw err;
  console.log('File content overwritten successfully');
});</code></pre></div></section><section><h3 id="343909646#example-appending-to-a-file" data-toc="example-appending-to-a-file#8-File-System-Module.md-example-appending-to-a-file">Example: Appending to a File</h3><div class="detached code-block" id="343909646#-bgjvme_50"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Appending content to a file
fs.appendFile('newfile.txt', '\nMore content being added.', (err) =&gt; {
  if (err) throw err;
  console.log('File updated with new content');
});</code></pre></div></section><section><h3 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h3><ul class="list" id="343909646#-bgjvme_51" start="1"><li class="list-item" id="343909646#-bgjvme_52"><p>Updating logs, modifying data files, or appending new data to reports.</p></li></ul></section></section><section><h2 id="343909646#iv-delete-files" data-toc="iv-delete-files#8-File-System-Module.md-iv-delete-files">iv. Delete Files</h2><p id="343909646#-bgjvme_53">You can delete files using <span class="inline-code" id="343909646#-bgjvme_56">fs.unlink()</span> method.</p><section><h3 id="343909646#example-deleting-a-file" data-toc="example-deleting-a-file#8-File-System-Module.md-example-deleting-a-file">Example: Deleting a File</h3><div class="detached code-block" id="343909646#-bgjvme_57"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Deleting a file
fs.unlink('newfile.txt', (err) =&gt; {
  if (err) throw err;
  console.log('File deleted successfully');
});</code></pre></div></section><section><h3 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h3><ul class="list" id="343909646#-bgjvme_58" start="1"><li class="list-item" id="343909646#-bgjvme_59"><p>Removing temporary files or cleaning up old data files that are no longer needed.</p></li></ul></section></section><section><h2 id="343909646#v-rename-files" data-toc="v-rename-files#8-File-System-Module.md-v-rename-files">v. Rename Files</h2><p id="343909646#-bgjvme_60">To rename a file, use the <span class="inline-code" id="343909646#-bgjvme_63">fs.rename()</span> method.</p><section><h3 id="343909646#example-renaming-a-file" data-toc="example-renaming-a-file#8-File-System-Module.md-example-renaming-a-file">Example: Renaming a File</h3><div class="detached code-block" id="343909646#-bgjvme_64"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Renaming a file
fs.rename('oldfile.txt', 'newfile.txt', (err) =&gt; {
  if (err) throw err;
  console.log('File renamed successfully');
});</code></pre></div></section><section><h3 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h3><ul class="list" id="343909646#-bgjvme_65" start="1"><li class="list-item" id="343909646#-bgjvme_67"><p>Organizing files, managing file versions, or moving files within the same directory.</p></li></ul></section></section><section><h2 id="343909646#complete-example-node-js-file-server-with-file-operations" data-toc="complete-example-node-js-file-server-with-file-operations#8-File-System-Module.md-complete-example-node-js-file-server-with-file-operations">Complete Example: Node.js File Server with File Operations</h2><p id="343909646#-bgjvme_68">Below is an example of how you can create a basic file server in Node.js that handles reading, creating, updating, and deleting files dynamically.</p><div class="detached code-block" id="343909646#-bgjvme_69"><pre><code class="language-javascript">import * as fs from 'fs';
import * as http from 'http';

// Example: Node.js File Server
const server = http.createServer((req, res) =&gt; {
  const url = req.url;
  
  // Read file
  if (url === '/read') {
    fs.readFile('example.txt', 'utf-8', (err, data) =&gt; {
      if (err) {
        res.writeHead(404, { 'Content-Type': 'text/plain' });
        res.end('File not found');
      } else {
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end(data);
      }
    });

  // Create file
  } else if (url === '/create') {
    fs.writeFile('example.txt', 'This is a newly created file!', (err) =&gt; {
      if (err) {
        res.writeHead(500, { 'Content-Type': 'text/plain' });
        res.end('Error creating file');
      } else {
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end('File created successfully');
      }
    });

  // Update file
  } else if (url === '/update') {
    fs.appendFile('example.txt', '\nAppending new content to the file.', (err) =&gt; {
      if (err) {
        res.writeHead(500, { 'Content-Type': 'text/plain' });
        res.end('Error updating file');
      } else {
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end('File updated successfully');
      }
    });

  // Delete file
  } else if (url === '/delete') {
    fs.unlink('example.txt', (err) =&gt; {
      if (err) {
        res.writeHead(404, { 'Content-Type': 'text/plain' });
        res.end('File not found');
      } else {
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end('File deleted successfully');
      }
    });

  // Rename file
  } else if (url === '/rename') {
    fs.rename('example.txt', 'renamedfile.txt', (err) =&gt; {
      if (err) {
        res.writeHead(500, { 'Content-Type': 'text/plain' });
        res.end('Error renaming file');
      } else {
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end('File renamed successfully');
      }
    });
  
  // Default route
  } else {
    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.end('Use /read, /create, /update, /delete, or /rename to interact with the file system.');
  }
});

// Start the server
server.listen(3000, () =&gt; {
  console.log('File server is running at http://localhost:3000');
});</code></pre></div><section><h3 id="343909646#explanation" data-toc="explanation#8-File-System-Module.md-explanation">Explanation:</h3><ul class="list" id="343909646#-bgjvme_71" start="1"><li class="list-item" id="343909646#-bgjvme_72"><p><span class="control" id="343909646#-bgjvme_74">Routes</span>: Each URL (<span class="inline-code" id="343909646#-bgjvme_75">/read</span>, <span class="inline-code" id="343909646#-bgjvme_76">/create</span>, <span class="inline-code" id="343909646#-bgjvme_77">/update</span>, <span class="inline-code" id="343909646#-bgjvme_78">/delete</span>, <span class="inline-code" id="343909646#-bgjvme_79">/rename</span>) corresponds to different file operations.</p></li><li class="list-item" id="343909646#-bgjvme_73"><p><span class="control" id="343909646#-bgjvme_80">Error Handling</span>: Each operation checks for errors and responds with the appropriate message.</p></li></ul></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-916870042">9. Node.js Events</h1><p id="-916870042#qbmlaq_3">Node.js is built around an <span class="control" id="-916870042#qbmlaq_14">event-driven architecture</span>, which is one of its core strengths. Events play a significant role in Node.js by enabling asynchronous and non-blocking communication between different parts of an application. The <span class="inline-code" id="-916870042#qbmlaq_15">EventEmitter</span> class, part of the <span class="inline-code" id="-916870042#qbmlaq_16">events</span> module, allows you to create, emit, and listen for events in a Node.js application.</p><p id="-916870042#qbmlaq_4">In this section, we'll explore how Node.js events work, how to create and use custom events, and practical examples of their usage.</p><section><h2 id="-916870042#what-are-events-in-node-js" data-toc="what-are-events-in-node-js#9-Node-js-Events.md-what-are-events-in-node-js">What are Events in Node.js?</h2><p id="-916870042#qbmlaq_17">In Node.js, an event refers to a specific action or occurrence, such as a user request, a timer completion, or the availability of data. The system &quot;emits&quot; these events, and functions called <span class="control" id="-916870042#qbmlaq_19">listeners</span> or <span class="control" id="-916870042#qbmlaq_20">handlers</span> react to them.</p><p id="-916870042#qbmlaq_18">Node.js provides the <span class="inline-code" id="-916870042#qbmlaq_21">events</span> module, which includes the <span class="inline-code" id="-916870042#qbmlaq_22">EventEmitter</span> class. Objects created from <span class="inline-code" id="-916870042#qbmlaq_23">EventEmitter</span> can trigger and handle various events. This allows asynchronous, event-based programming, where actions happen in response to certain triggers rather than sequential execution.</p></section><section><h2 id="-916870042#the-eventemitter-class" data-toc="the-eventemitter-class#9-Node-js-Events.md-the-eventemitter-class">The EventEmitter Class</h2><p id="-916870042#qbmlaq_24">The <span class="inline-code" id="-916870042#qbmlaq_29">EventEmitter</span> class is the core of event handling in Node.js. It allows you to:</p><ul class="list" id="-916870042#qbmlaq_25" start="1"><li class="list-item" id="-916870042#qbmlaq_30"><p>Register event listeners</p></li><li class="list-item" id="-916870042#qbmlaq_31"><p>Emit (trigger) events</p></li><li class="list-item" id="-916870042#qbmlaq_32"><p>Remove event listeners</p></li></ul><p id="-916870042#qbmlaq_26">The basic pattern for working with <span class="inline-code" id="-916870042#qbmlaq_33">EventEmitter</span> involves creating an event emitter instance, defining listeners for specific events, and emitting those events when needed.</p><section><h3 id="-916870042#example-basic-usage-of-eventemitter" data-toc="example-basic-usage-of-eventemitter#9-Node-js-Events.md-example-basic-usage-of-eventemitter">Example: Basic Usage of EventEmitter</h3><div class="detached code-block" id="-916870042#qbmlaq_34"><pre><code class="language-javascript">import { EventEmitter } from 'events';

// Create an instance of EventEmitter
const eventEmitter = new EventEmitter();

// Define a listener for the 'greet' event
eventEmitter.on('greet', (name) =&gt; {
  console.log(`Hello, ${name}!`);
});

// Emit the 'greet' event
eventEmitter.emit('greet', 'Alice');  // Output: Hello, Alice!</code></pre></div></section><section><h3 id="-916870042#explanation" data-toc="explanation#9-Node-js-Events.md-explanation">Explanation:</h3><ul class="list" id="-916870042#qbmlaq_35" start="1"><li class="list-item" id="-916870042#qbmlaq_36"><p><span class="control" id="-916870042#qbmlaq_38"><span class="inline-code" id="-916870042#qbmlaq_40">eventEmitter.on()</span></span>: Registers a listener for the <span class="inline-code" id="-916870042#qbmlaq_39">greet</span> event.</p></li><li class="list-item" id="-916870042#qbmlaq_37"><p><span class="control" id="-916870042#qbmlaq_41"><span class="inline-code" id="-916870042#qbmlaq_43">eventEmitter.emit()</span></span>: Emits (triggers) the <span class="inline-code" id="-916870042#qbmlaq_42">greet</span> event, causing the registered listener to execute.</p></li></ul></section></section><section><h2 id="-916870042#registering-multiple-event-listeners" data-toc="registering-multiple-event-listeners#9-Node-js-Events.md-registering-multiple-event-listeners">Registering Multiple Event Listeners</h2><p id="-916870042#qbmlaq_44">You can register multiple listeners for the same event. Each listener will be executed in the order in which it was registered.</p><section><h3 id="-916870042#example-multiple-event-listeners" data-toc="example-multiple-event-listeners#9-Node-js-Events.md-example-multiple-event-listeners">Example: Multiple Event Listeners</h3><div class="detached code-block" id="-916870042#qbmlaq_46"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register multiple listeners for the same event
eventEmitter.on('greet', (name) =&gt; {
  console.log(`Listener 1: Hello, ${name}!`);
});

eventEmitter.on('greet', (name) =&gt; {
  console.log(`Listener 2: How are you, ${name}?`);
});

// Emit the 'greet' event
eventEmitter.emit('greet', 'Bob');

// Output:
// Listener 1: Hello, Bob!
// Listener 2: How are you, Bob?</code></pre></div></section></section><section><h2 id="-916870042#handling-event-with-arguments" data-toc="handling-event-with-arguments#9-Node-js-Events.md-handling-event-with-arguments">Handling Event with Arguments</h2><p id="-916870042#qbmlaq_47">When emitting an event, you can pass additional arguments to the listeners. The arguments can be used to customize the event's behavior.</p><section><h3 id="-916870042#example-passing-arguments-to-event-handlers" data-toc="example-passing-arguments-to-event-handlers#9-Node-js-Events.md-example-passing-arguments-to-event-handlers">Example: Passing Arguments to Event Handlers</h3><div class="detached code-block" id="-916870042#qbmlaq_49"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register a listener with multiple arguments
eventEmitter.on('status', (code, message) =&gt; {
  console.log(`Status Code: ${code}, Message: ${message}`);
});

// Emit the 'status' event with arguments
eventEmitter.emit('status', 200, 'OK');  // Output: Status Code: 200, Message: OK</code></pre></div></section></section><section><h2 id="-916870042#one-time-event-listeners" data-toc="one-time-event-listeners#9-Node-js-Events.md-one-time-event-listeners">One-Time Event Listeners</h2><p id="-916870042#qbmlaq_50">Sometimes, you may want a listener to respond to an event only once. The <span class="inline-code" id="-916870042#qbmlaq_52">once()</span> method allows you to register a listener that is automatically removed after it is triggered for the first time.</p><section><h3 id="-916870042#example-one-time-event-listener" data-toc="example-one-time-event-listener#9-Node-js-Events.md-example-one-time-event-listener">Example: One-Time Event Listener</h3><div class="detached code-block" id="-916870042#qbmlaq_53"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register a one-time listener for the 'greet' event
eventEmitter.once('greet', (name) =&gt; {
  console.log(`Hello for the first and only time, ${name}!`);
});

// Emit the 'greet' event twice
eventEmitter.emit('greet', 'Charlie');  // Output: Hello for the first and only time, Charlie!
eventEmitter.emit('greet', 'Charlie');  // No output, listener is removed after the first emit</code></pre></div></section></section><section><h2 id="-916870042#removing-event-listeners" data-toc="removing-event-listeners#9-Node-js-Events.md-removing-event-listeners">Removing Event Listeners</h2><p id="-916870042#qbmlaq_54">To remove a specific event listener, use the <span class="inline-code" id="-916870042#qbmlaq_56">removeListener()</span> or <span class="inline-code" id="-916870042#qbmlaq_57">off()</span> methods. These methods allow you to remove a previously registered listener.</p><section><h3 id="-916870042#example-removing-event-listeners" data-toc="example-removing-event-listeners#9-Node-js-Events.md-example-removing-event-listeners">Example: Removing Event Listeners</h3><div class="detached code-block" id="-916870042#qbmlaq_58"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

const greetListener = (name: string) =&gt; {
  console.log(`Hello, ${name}!`);
};

// Register the listener
eventEmitter.on('greet', greetListener);

// Emit the 'greet' event
eventEmitter.emit('greet', 'David');  // Output: Hello, David!

// Remove the listener
eventEmitter.off('greet', greetListener);

// Emit the 'greet' event again (no output this time)
eventEmitter.emit('greet', 'David');</code></pre></div></section></section><section><h2 id="-916870042#eventemitter-inheritance" data-toc="eventemitter-inheritance#9-Node-js-Events.md-eventemitter-inheritance">EventEmitter Inheritance</h2><p id="-916870042#qbmlaq_59">You can inherit from the <span class="inline-code" id="-916870042#qbmlaq_61">EventEmitter</span> class to create custom classes that emit events. This is useful when you want to add event-driven behavior to your own objects.</p><section><h3 id="-916870042#example-custom-class-inheriting-eventemitter" data-toc="example-custom-class-inheriting-eventemitter#9-Node-js-Events.md-example-custom-class-inheriting-eventemitter">Example: Custom Class Inheriting EventEmitter</h3><div class="detached code-block" id="-916870042#qbmlaq_62"><pre><code class="language-javascript">import { EventEmitter } from 'events';

class MyEmitter extends EventEmitter {
  log(message: string) {
    console.log(message);
    this.emit('logged', { message });
  }
}

const myEmitter = new MyEmitter();

// Register a listener for the 'logged' event
myEmitter.on('logged', (data) =&gt; {
  console.log(`Event emitted with message: ${data.message}`);
});

// Call the custom method which emits the 'logged' event
myEmitter.log('This is a custom event');  // Output:
                                          // This is a custom event
                                          // Event emitted with message: This is a custom event</code></pre></div></section></section><section><h2 id="-916870042#handling-errors-in-event-emitters" data-toc="handling-errors-in-event-emitters#9-Node-js-Events.md-handling-errors-in-event-emitters">Handling Errors in Event Emitters</h2><p id="-916870042#qbmlaq_63">When an error occurs within an event emitter, it&rsquo;s a common practice to emit an <span class="inline-code" id="-916870042#qbmlaq_65">'error'</span> event. If there are no listeners for the <span class="inline-code" id="-916870042#qbmlaq_66">'error'</span> event, Node.js will throw the error and crash the program. Always ensure there is a listener for error events when emitting errors.</p><section><h3 id="-916870042#example-emitting-and-handling-errors" data-toc="example-emitting-and-handling-errors#9-Node-js-Events.md-example-emitting-and-handling-errors">Example: Emitting and Handling Errors</h3><div class="detached code-block" id="-916870042#qbmlaq_67"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register an error event listener
eventEmitter.on('error', (err) =&gt; {
  console.error('Error occurred:', err);
});

// Emit an error event
eventEmitter.emit('error', new Error('Something went wrong!'));

// Output: Error occurred: Error: Something went wrong!</code></pre></div></section></section><section><h2 id="-916870042#built-in-node-js-event-emitters" data-toc="built-in-node-js-event-emitters#9-Node-js-Events.md-built-in-node-js-event-emitters">Built-in Node.js Event Emitters</h2><p id="-916870042#qbmlaq_68">Many Node.js core modules use the <span class="inline-code" id="-916870042#qbmlaq_71">EventEmitter</span> class internally to handle asynchronous operations. Some examples include:</p><ul class="list" id="-916870042#qbmlaq_69" start="1"><li class="list-item" id="-916870042#qbmlaq_72"><p><span class="control" id="-916870042#qbmlaq_75"><span class="inline-code" id="-916870042#qbmlaq_76">http</span></span>: The HTTP module uses events to handle incoming requests and responses.</p></li><li class="list-item" id="-916870042#qbmlaq_73"><p><span class="control" id="-916870042#qbmlaq_77"><span class="inline-code" id="-916870042#qbmlaq_78">net</span></span>: The Networking module uses events for managing socket connections.</p></li><li class="list-item" id="-916870042#qbmlaq_74"><p><span class="control" id="-916870042#qbmlaq_79"><span class="inline-code" id="-916870042#qbmlaq_80">fs</span></span>: The File System module emits events when files are opened, read, or closed.</p></li></ul><section><h3 id="-916870042#example-using-events-in-the-http-module" data-toc="example-using-events-in-the-http-module#9-Node-js-Events.md-example-using-events-in-the-http-module">Example: Using Events in the http Module</h3><div class="detached code-block" id="-916870042#qbmlaq_82"><pre><code class="language-javascript">import * as http from 'http';

const server = http.createServer((req, res) =&gt; {
  res.writeHead(200, { 'Content-Type': 'text/plain' });
  res.end('Hello, Event-Driven World!');
});

// Register a listener for the 'connection' event
server.on('connection', () =&gt; {
  console.log('New connection established');
});

// Start the server
server.listen(3000, () =&gt; {
  console.log('Server listening on http://localhost:3000');
});</code></pre></div></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1267330066">10. Node.js Errors</h1><p id="1267330066#z4xjm00_3">Error handling is an essential part of building reliable applications, and Node.js provides several mechanisms for dealing with errors in an efficient way. By understanding the different types of errors and how to handle them, you can write more robust applications.</p><p id="1267330066#z4xjm00_4">Node.js uses both synchronous and asynchronous error handling mechanisms. Since Node.js is event-driven and non-blocking, errors can occur in both synchronous code (where they can be caught immediately) and asynchronous code (where error handling is more complex).</p><p id="1267330066#z4xjm00_5">In this section, we will cover:</p><ul class="list" id="1267330066#z4xjm00_6" start="1"><li class="list-item" id="1267330066#z4xjm00_15"><p>Common types of errors in Node.js</p></li><li class="list-item" id="1267330066#z4xjm00_16"><p>Error handling in both synchronous and asynchronous code</p></li><li class="list-item" id="1267330066#z4xjm00_17"><p>The <span class="inline-code" id="1267330066#z4xjm00_19">Error</span> object and custom error classes</p></li><li class="list-item" id="1267330066#z4xjm00_18"><p>Best practices for error handling</p></li></ul><section><h2 id="1267330066#a-types-of-errors-in-node-js" data-toc="a-types-of-errors-in-node-js#10-Node-js-Errors.md-a-types-of-errors-in-node-js">a. Types of Errors in Node.js</h2><p id="1267330066#z4xjm00_20">In Node.js, errors can generally be categorized into several types:</p><ol class="list list-decimal" id="1267330066#z4xjm00_21" type="1" start="1"><li class="list-item" id="1267330066#z4xjm00_22"><p><span class="control" id="1267330066#z4xjm00_25">Operational Errors</span>: Errors that occur during the normal operation of a program. These include network issues, file not found errors, permission errors, etc.</p></li><li class="list-item" id="1267330066#z4xjm00_23"><p><span class="control" id="1267330066#z4xjm00_26">Programmer Errors</span>: Errors caused by bugs in the code, such as accessing an undefined variable or calling a function that doesn&rsquo;t exist.</p></li><li class="list-item" id="1267330066#z4xjm00_24"><p><span class="control" id="1267330066#z4xjm00_27">System Errors</span>: Errors that occur due to issues outside of the application, such as hardware failures or network problems.</p></li></ol></section><section><h2 id="1267330066#b-the-error-object" data-toc="b-the-error-object#10-Node-js-Errors.md-b-the-error-object">b. The Error Object</h2><p id="1267330066#z4xjm00_29">In Node.js, all errors are represented as instances of the built-in <span class="inline-code" id="1267330066#z4xjm00_33">Error</span> class. The <span class="inline-code" id="1267330066#z4xjm00_34">Error</span> object provides information about what went wrong and can be thrown and caught using the <span class="inline-code" id="1267330066#z4xjm00_35">try/catch</span> mechanism in synchronous code.</p><section><h3 id="1267330066#example-throwing-and-catching-errors" data-toc="example-throwing-and-catching-errors#10-Node-js-Errors.md-example-throwing-and-catching-errors">Example: Throwing and Catching Errors</h3><div class="detached code-block" id="1267330066#z4xjm00_36"><pre><code class="language-javascript">try {
  throw new Error('Something went wrong!');
} catch (err) {
  console.error('Caught an error:', err.message);
}</code></pre></div></section><section><h3 id="1267330066#properties-of-the-error-object" data-toc="properties-of-the-error-object#10-Node-js-Errors.md-properties-of-the-error-object">Properties of the Error Object:</h3><ul class="list" id="1267330066#z4xjm00_38" start="1"><li class="list-item" id="1267330066#z4xjm00_40"><p><span class="control" id="1267330066#z4xjm00_43"><span class="inline-code" id="1267330066#z4xjm00_44">message</span></span>: A human-readable description of the error.</p></li><li class="list-item" id="1267330066#z4xjm00_41"><p><span class="control" id="1267330066#z4xjm00_45"><span class="inline-code" id="1267330066#z4xjm00_47">name</span></span>: The name of the error (defaults to <span class="inline-code" id="1267330066#z4xjm00_46">'Error'</span>).</p></li><li class="list-item" id="1267330066#z4xjm00_42"><p><span class="control" id="1267330066#z4xjm00_48"><span class="inline-code" id="1267330066#z4xjm00_49">stack</span></span>: A stack trace that shows where the error occurred in the code.</p></li></ul></section></section><section><h2 id="1267330066#c-handling-synchronous-errors" data-toc="c-handling-synchronous-errors#10-Node-js-Errors.md-c-handling-synchronous-errors">c. Handling Synchronous Errors</h2><p id="1267330066#z4xjm00_50">Synchronous code runs in a blocking fashion, so errors can be caught immediately using <span class="inline-code" id="1267330066#z4xjm00_52">try/catch</span> blocks.</p><section><h3 id="1267330066#example-handling-synchronous-errors" data-toc="example-handling-synchronous-errors#10-Node-js-Errors.md-example-handling-synchronous-errors">Example: Handling Synchronous Errors</h3><div class="detached code-block" id="1267330066#z4xjm00_53"><pre><code class="language-javascript">try {
  // Some synchronous code that could throw an error
  const result = JSON.parse('{ malformed JSON }');
} catch (err) {
  console.error('Error occurred during parsing:', err.message);
}</code></pre></div><p id="1267330066#z4xjm00_54">In synchronous code, <span class="inline-code" id="1267330066#z4xjm00_55">try/catch</span> blocks are straightforward to use and help to prevent the application from crashing.</p></section></section><section><h2 id="1267330066#d-handling-asynchronous-errors" data-toc="d-handling-asynchronous-errors#10-Node-js-Errors.md-d-handling-asynchronous-errors">d. Handling Asynchronous Errors</h2><p id="1267330066#z4xjm00_56">Handling errors in asynchronous code is more challenging because of Node.js's non-blocking nature. There are several patterns for handling errors in asynchronous operations, such as callbacks, promises, and <span class="inline-code" id="1267330066#z4xjm00_60">async/await</span>.</p><section><h3 id="1267330066#1-error-handling-in-callbacks" data-toc="1-error-handling-in-callbacks#10-Node-js-Errors.md-1-error-handling-in-callbacks">1. Error Handling in Callbacks</h3><p id="1267330066#z4xjm00_61">When working with callbacks, errors are typically passed as the first argument to the callback function. This is often referred to as the &quot;error-first&quot; callback pattern.</p><div class="detached code-block" id="1267330066#z4xjm00_62"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Handling errors in a callback
fs.readFile('nonexistentfile.txt', 'utf-8', (err, data) =&gt; {
  if (err) {
    console.error('Error reading file:', err.message);
    return;
  }
  console.log('File content:', data);
});</code></pre></div></section><section><h3 id="1267330066#2-error-handling-in-promises" data-toc="2-error-handling-in-promises#10-Node-js-Errors.md-2-error-handling-in-promises">2. Error Handling in Promises</h3><p id="1267330066#z4xjm00_63">When using promises, errors can be caught using <span class="inline-code" id="1267330066#z4xjm00_65">.catch()</span>.</p><div class="detached code-block" id="1267330066#z4xjm00_64"><pre><code class="language-javascript">// Example: Handling errors in a promise
const asyncOperation = new Promise((resolve, reject) =&gt; {
  const errorOccurred = true;
  if (errorOccurred) {
    reject(new Error('Something went wrong!'));
  } else {
    resolve('Operation succeeded');
  }
});

asyncOperation
  .then((result) =&gt; {
    console.log(result);
  })
  .catch((err) =&gt; {
    console.error('Error in promise:', err.message);
  });</code></pre></div></section><section><h3 id="1267330066#3-error-handling-with-async-await" data-toc="3-error-handling-with-async-await#10-Node-js-Errors.md-3-error-handling-with-async-await">3. Error Handling with async/await</h3><p id="1267330066#z4xjm00_67">With <span class="inline-code" id="1267330066#z4xjm00_70">async/await</span>, error handling is similar to synchronous code. You can use <span class="inline-code" id="1267330066#z4xjm00_71">try/catch</span> blocks to handle errors in asynchronous code.</p><div class="detached code-block" id="1267330066#z4xjm00_68"><pre><code class="language-javascript">async function readFileAsync() {
  try {
    const data = await fs.promises.readFile('nonexistentfile.txt', 'utf-8');
    console.log('File content:', data);
  } catch (err) {
    console.error('Error reading file:', err.message);
  }
}

readFileAsync();</code></pre></div></section></section><section><h2 id="1267330066#e-custom-error-classes" data-toc="e-custom-error-classes#10-Node-js-Errors.md-e-custom-error-classes">e. Custom Error Classes</h2><p id="1267330066#z4xjm00_72">Node.js allows you to create custom error classes that extend the built-in <span class="inline-code" id="1267330066#z4xjm00_75">Error</span> class. This can be useful for defining specific error types and improving error categorization.</p><section><h3 id="1267330066#example-creating-a-custom-error-class" data-toc="example-creating-a-custom-error-class#10-Node-js-Errors.md-example-creating-a-custom-error-class">Example: Creating a Custom Error Class</h3><div class="detached code-block" id="1267330066#z4xjm00_76"><pre><code class="language-javascript">class ValidationError extends Error {
  constructor(message: string) {
    super(message);
    this.name = 'ValidationError';
  }
}

try {
  throw new ValidationError('Invalid input data');
} catch (err) {
  if (err instanceof ValidationError) {
    console.error('Caught a validation error:', err.message);
  }
}</code></pre></div></section><section><h3 id="1267330066#explanation" data-toc="explanation#10-Node-js-Errors.md-explanation">Explanation:</h3><ul class="list" id="1267330066#z4xjm00_77" start="1"><li class="list-item" id="1267330066#z4xjm00_78"><p><span class="control" id="1267330066#z4xjm00_79"><span class="inline-code" id="1267330066#z4xjm00_81">ValidationError</span></span>: This custom error class inherits from the <span class="inline-code" id="1267330066#z4xjm00_80">Error</span> class and can be used to signal validation errors.</p></li></ul></section></section><section><h2 id="1267330066#f-uncaught-exceptions" data-toc="f-uncaught-exceptions#10-Node-js-Errors.md-f-uncaught-exceptions">f. Uncaught Exceptions</h2><p id="1267330066#z4xjm00_82">When an error occurs but is not caught by any error-handling code, Node.js emits an <span class="inline-code" id="1267330066#z4xjm00_85">uncaughtException</span> event. Unhandled errors can cause the application to crash. You can listen for <span class="inline-code" id="1267330066#z4xjm00_86">uncaughtException</span> events to log the error, clean up resources, and exit the application gracefully.</p><section><h3 id="1267330066#example-handling-uncaught-exceptions" data-toc="example-handling-uncaught-exceptions#10-Node-js-Errors.md-example-handling-uncaught-exceptions">Example: Handling Uncaught Exceptions</h3><div class="detached code-block" id="1267330066#z4xjm00_87"><pre><code class="language-javascript">process.on('uncaughtException', (err) =&gt; {
  console.error('Uncaught exception:', err.message);
  process.exit(1);  // Exit the process after handling the error
});

// Simulate an uncaught exception
throw new Error('This is an uncaught exception');</code></pre></div></section><section><h3 id="1267330066#warning" data-toc="warning#10-Node-js-Errors.md-warning">Warning:</h3><ul class="list" id="1267330066#z4xjm00_88" start="1"><li class="list-item" id="1267330066#z4xjm00_89"><p>Catching <span class="inline-code" id="1267330066#z4xjm00_90">uncaughtException</span> should be done cautiously. It's better to handle errors locally in the code, rather than relying on this global handler, as catching an uncaught exception could leave your application in an inconsistent state.</p></li></ul></section></section><section><h2 id="1267330066#g-unhandled-promise-rejections" data-toc="g-unhandled-promise-rejections#10-Node-js-Errors.md-g-unhandled-promise-rejections">g. Unhandled Promise Rejections</h2><p id="1267330066#z4xjm00_91">In Node.js, when a promise is rejected and no <span class="inline-code" id="1267330066#z4xjm00_93">.catch()</span> handler is provided, the runtime emits an <span class="inline-code" id="1267330066#z4xjm00_94">unhandledRejection</span> event. Failing to handle promise rejections can lead to memory leaks or unintended behavior.</p><section><h3 id="1267330066#example-handling-unhandled-promise-rejections" data-toc="example-handling-unhandled-promise-rejections#10-Node-js-Errors.md-example-handling-unhandled-promise-rejections">Example: Handling Unhandled Promise Rejections</h3><div class="detached code-block" id="1267330066#z4xjm00_95"><pre><code class="language-javascript">process.on('unhandledRejection', (reason, promise) =&gt; {
  console.error('Unhandled promise rejection:', reason);
  // Optionally exit the process
  process.exit(1);
});

// Simulate an unhandled promise rejection
new Promise((_, reject) =&gt; reject(new Error('This promise was rejected but not handled')));</code></pre></div></section></section><section><h2 id="1267330066#h-best-practices-for-error-handling-in-node-js" data-toc="h-best-practices-for-error-handling-in-node-js#10-Node-js-Errors.md-h-best-practices-for-error-handling-in-node-js">h. Best Practices for Error Handling in Node.js</h2><ol class="list list-decimal" id="1267330066#z4xjm00_96" type="1" start="1"><li class="list-item" id="1267330066#z4xjm00_98"><p><span class="control" id="1267330066#z4xjm00_104">Handle Errors Explicitly</span>: Always handle errors explicitly in your code using <span class="inline-code" id="1267330066#z4xjm00_105">try/catch</span>, <span class="inline-code" id="1267330066#z4xjm00_106">.catch()</span>, or callbacks.</p></li><li class="list-item" id="1267330066#z4xjm00_99"><p><span class="control" id="1267330066#z4xjm00_107">Fail Fast</span>: When encountering critical errors, especially programmer errors (like referencing an undefined variable), fail fast by crashing the application and logging the issue.</p></li><li class="list-item" id="1267330066#z4xjm00_100"><p><span class="control" id="1267330066#z4xjm00_108">Graceful Shutdown</span>: When handling errors, especially in production, gracefully shut down the application after logging the error to avoid further corruption or inconsistent states.</p></li><li class="list-item" id="1267330066#z4xjm00_101"><p><span class="control" id="1267330066#z4xjm00_109">Use Custom Error Classes</span>: Create custom error classes for specific categories of errors to make it easier to catch and handle them appropriately.</p></li><li class="list-item" id="1267330066#z4xjm00_102"><p><span class="control" id="1267330066#z4xjm00_110">Log Errors</span>: Log errors in a consistent and informative format to help with debugging and post-mortem analysis.</p></li><li class="list-item" id="1267330066#z4xjm00_103"><p><span class="control" id="1267330066#z4xjm00_111">Avoid Using <span class="inline-code" id="1267330066#z4xjm00_112">process.exit()</span> Recklessly</span>: Exiting the process abruptly without proper cleanup (e.g., closing database connections) can cause issues. Always ensure a graceful shutdown when exiting due to errors.</p></li></ol></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1051841038">11. Node intergration with Databases</h1><section><h2 id="-1051841038#introduction-to-node-js-integration-with-databases" data-toc="introduction-to-node-js-integration-with-databases#11-Node-intergration-with-Databases.md-introduction-to-node-js-integration-with-databases">Introduction to Node.js Integration with Databases</h2><p id="-1051841038#z8vzim8_7">Node.js is a powerful, event-driven JavaScript runtime that excels in building fast and scalable network applications. One of its core strengths lies in its ability to seamlessly integrate with a variety of databases, both relational (SQL-based) and non-relational (NoSQL-based). Databases are fundamental to almost every application, as they store, retrieve, and manipulate the data that powers web services, APIs, and applications.</p><p id="-1051841038#z8vzim8_8">Integrating Node.js with databases is crucial for building robust applications that require data persistence, user authentication, analytics, and more. Whether you're developing a simple CRUD (Create, Read, Update, Delete) application or a complex enterprise-grade system, understanding how to work with databases in Node.js is essential.</p></section><section><h2 id="-1051841038#why-use-node-js-with-databases" data-toc="why-use-node-js-with-databases#11-Node-intergration-with-Databases.md-why-use-node-js-with-databases">Why Use Node.js with Databases?</h2><p id="-1051841038#z8vzim8_9">Node.js's non-blocking, asynchronous nature makes it an excellent choice for database integration, especially for I/O-heavy tasks like querying databases, where it can handle many concurrent operations without being bogged down by waiting for responses. Here's why Node.js pairs well with databases:</p><ol class="list list-decimal" id="-1051841038#z8vzim8_10" type="1" start="1"><li class="list-item" id="-1051841038#z8vzim8_11"><p><span class="control" id="-1051841038#z8vzim8_15">Asynchronous Operations</span>: Node.js's asynchronous design allows multiple database queries to run in parallel without blocking the main event loop, resulting in faster performance and scalability.</p></li><li class="list-item" id="-1051841038#z8vzim8_12"><p><span class="control" id="-1051841038#z8vzim8_16">Support for Multiple Databases</span>: Node.js supports a wide variety of databases, including: </p><ul class="list" id="-1051841038#z8vzim8_17" start="1"><li class="list-item" id="-1051841038#z8vzim8_18"><p><span class="control" id="-1051841038#z8vzim8_20">Relational Databases</span> (SQL): MySQL, PostgreSQL, Microsoft SQL Server (MSSQL), SQLite, etc.</p></li><li class="list-item" id="-1051841038#z8vzim8_19"><p><span class="control" id="-1051841038#z8vzim8_21">Non-relational Databases</span> (NoSQL): MongoDB, Redis, CouchDB, etc.</p></li></ul></li><li class="list-item" id="-1051841038#z8vzim8_13"><p><span class="control" id="-1051841038#z8vzim8_22">Active Ecosystem</span>: The Node.js ecosystem has many libraries and ORM (Object Relational Mapping) tools that make it easier to interact with databases, such as <span class="inline-code" id="-1051841038#z8vzim8_23">mongoose</span> for MongoDB, <span class="inline-code" id="-1051841038#z8vzim8_24">sequelize</span> for SQL databases, and <span class="inline-code" id="-1051841038#z8vzim8_25">TypeORM</span> for various databases.</p></li><li class="list-item" id="-1051841038#z8vzim8_14"><p><span class="control" id="-1051841038#z8vzim8_26">JSON and JavaScript Compatibility</span>: With JSON as a common data format and JavaScript used across the stack, integration between Node.js and NoSQL databases (like MongoDB) is often seamless, reducing the need for complex data transformation.</p></li></ol></section><section><h2 id="-1051841038#types-of-databases-you-can-use-with-node-js" data-toc="types-of-databases-you-can-use-with-node-js#11-Node-intergration-with-Databases.md-types-of-databases-you-can-use-with-node-js">Types of Databases You Can Use with Node.js</h2><section><h3 id="-1051841038#1-relational-databases-sql-based" data-toc="1-relational-databases-sql-based#11-Node-intergration-with-Databases.md-1-relational-databases-sql-based">1. Relational Databases (SQL-based)</h3><p id="-1051841038#z8vzim8_30">Relational databases store data in structured formats like tables with predefined schemas. SQL (Structured Query Language) is used to interact with the data.</p><ul class="list" id="-1051841038#z8vzim8_31" start="1"><li class="list-item" id="-1051841038#z8vzim8_33"><p><span class="control" id="-1051841038#z8vzim8_37">MySQL</span>: One of the most popular open-source databases used for web applications. It is known for its reliability and scalability.</p></li><li class="list-item" id="-1051841038#z8vzim8_34"><p><span class="control" id="-1051841038#z8vzim8_38">PostgreSQL</span>: A powerful, open-source object-relational database known for its extensibility, standards compliance, and strong support for complex queries.</p></li><li class="list-item" id="-1051841038#z8vzim8_35"><p><span class="control" id="-1051841038#z8vzim8_39">Microsoft SQL Server (MSSQL)</span>: A robust enterprise-grade relational database management system from Microsoft, commonly used in large organizations.</p></li><li class="list-item" id="-1051841038#z8vzim8_36"><p><span class="control" id="-1051841038#z8vzim8_40">SQLite</span>: A lightweight, self-contained SQL database engine often used for local storage in smaller applications or development environments.</p></li></ul></section><section><h3 id="-1051841038#2-non-relational-databases-nosql-based" data-toc="2-non-relational-databases-nosql-based#11-Node-intergration-with-Databases.md-2-non-relational-databases-nosql-based">2. Non-relational Databases (NoSQL-based)</h3><p id="-1051841038#z8vzim8_42">NoSQL databases are designed to handle unstructured or semi-structured data and are known for their flexibility, scalability, and high performance.</p><ul class="list" id="-1051841038#z8vzim8_43" start="1"><li class="list-item" id="-1051841038#z8vzim8_45"><p><span class="control" id="-1051841038#z8vzim8_48">MongoDB</span>: A document-based NoSQL database where data is stored in flexible, JSON-like documents. It is highly scalable and ideal for handling large volumes of unstructured data.</p></li><li class="list-item" id="-1051841038#z8vzim8_46"><p><span class="control" id="-1051841038#z8vzim8_49">Redis</span>: An in-memory key-value store known for its blazing-fast read/write performance, often used for caching and real-time data processing.</p></li><li class="list-item" id="-1051841038#z8vzim8_47"><p><span class="control" id="-1051841038#z8vzim8_50">CouchDB</span>: Another document-based NoSQL database, CouchDB uses a distributed architecture and stores data as JSON documents, making it suitable for distributed systems.</p></li></ul></section></section><section><h2 id="-1051841038#node-js-database-integration-approaches" data-toc="node-js-database-integration-approaches#11-Node-intergration-with-Databases.md-node-js-database-integration-approaches">Node.js Database Integration Approaches</h2><p id="-1051841038#z8vzim8_51">There are two main approaches for integrating Node.js with databases:</p><section><h3 id="-1051841038#1-using-query-builders-and-raw-queries" data-toc="1-using-query-builders-and-raw-queries#11-Node-intergration-with-Databases.md-1-using-query-builders-and-raw-queries">1. Using Query Builders and Raw Queries</h3><p id="-1051841038#z8vzim8_54">For developers who prefer greater control over SQL queries or who need to work directly with database-specific features, raw queries or query builders like <span class="control" id="-1051841038#z8vzim8_57">Knex.js</span> are great options. These allow developers to write SQL queries directly or through a builder that generates SQL dynamically.</p><section><h4 id="-1051841038#example-raw-query-with-mysql" data-toc="example-raw-query-with-mysql#11-Node-intergration-with-Databases.md-example-raw-query-with-mysql">Example: Raw Query with MySQL</h4><div class="detached code-block" id="-1051841038#z8vzim8_58"><pre><code class="language-javascript">const mysql = require('mysql2/promise');

async function fetchTodos() {
  const connection = await mysql.createConnection({ /* connection details */ });
  const [rows] = await connection.execute('SELECT * FROM todos');
  return rows;
}</code></pre></div></section></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1587952552">11.1 Node.js Database Integration Approaches</h1><p id="1587952552#hw4hze_3">There are two main approaches for integrating Node.js with databases:</p><section><h2 id="1587952552#1-using-query-builders-and-raw-queries" data-toc="1-using-query-builders-and-raw-queries#Node-js-Database-Integration-Approaches.md-1-using-query-builders-and-raw-queries">1. Using Query Builders and Raw Queries</h2><p id="1587952552#hw4hze_7">For developers who prefer greater control over SQL queries or who need to work directly with database-specific features, raw queries or query builders like <span class="control" id="1587952552#hw4hze_10">Knex.js</span> are great options. These allow developers to write SQL queries directly or through a builder that generates SQL dynamically.</p><section><h3 id="1587952552#example-raw-query-with-mysql" data-toc="example-raw-query-with-mysql#Node-js-Database-Integration-Approaches.md-example-raw-query-with-mysql">Example: Raw Query with MySQL</h3><div class="detached code-block" id="1587952552#hw4hze_11"><pre><code class="language-ts">const mysql = require('mysql2/promise');

async function fetchTodos() {
  const connection = await mysql.createConnection({ /* connection details */ });
  const [rows] = await connection.execute('SELECT * FROM todos');
  return rows;
}</code></pre></div></section></section><section><h2 id="1587952552#2-using-orm-object-relational-mapping" data-toc="2-using-orm-object-relational-mapping#Node-js-Database-Integration-Approaches.md-2-using-orm-object-relational-mapping">2. Using ORM (Object-Relational Mapping)</h2><p id="1587952552#hw4hze_13">ORMs abstract database interactions, allowing developers to work with objects and models instead of raw SQL queries. This approach is particularly useful for those who want to avoid writing raw SQL and focus on the business logic.</p><p id="1587952552#hw4hze_14">Popular Node.js ORMs:</p><ul class="list" id="1587952552#hw4hze_15" start="1"><li class="list-item" id="1587952552#hw4hze_17"><p><span class="control" id="1587952552#hw4hze_21">Drizzle</span>: It&rsquo;s the only ORM with both relational and SQL-like query APIs, providing you the best of both worlds when it comes to accessing your relational data.</p></li><li class="list-item" id="1587952552#hw4hze_18"><p><span class="control" id="1587952552#hw4hze_22">Sequelize</span>: A promise-based ORM for MySQL, PostgreSQL, and SQLite that provides a comprehensive set of features, including model definition, associations, and transactions.</p></li><li class="list-item" id="1587952552#hw4hze_19"><p><span class="control" id="1587952552#hw4hze_23">TypeORM</span>: A versatile ORM that supports a wide variety of databases, including MySQL, PostgreSQL, SQLite, and MongoDB. It works well with TypeScript and supports decorators for defining models.</p></li><li class="list-item" id="1587952552#hw4hze_20"><p><span class="control" id="1587952552#hw4hze_24">Mongoose</span>: A popular ODM (Object Data Modeling) library for MongoDB that allows for defining schemas, models, and relationships in a simple and efficient way.</p></li></ul></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1140773481">11.1.1 Using Query Builders and Raw Queries</h1><section><h2 id="1140773481#1-mysql-todo-crud-app" data-toc="1-mysql-todo-crud-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-1-mysql-todo-crud-app">1. MySQL Todo CRUD App</h2><section><h3 id="1140773481#step-1-install-dependencies" data-toc="step-1-install-dependencies#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-1-install-dependencies">Step 1: Install Dependencies</h3><div class="detached code-block" id="1140773481#z8gloh5_11"><pre><code class="language-bash">npm install mysql2 typescript @types/node</code></pre></div></section><section><h3 id="1140773481#step-2-mysql-connection-and-crud-functions" data-toc="step-2-mysql-connection-and-crud-functions#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-2-mysql-connection-and-crud-functions">Step 2: MySQL Connection and CRUD Functions</h3><p id="1140773481#z8gloh5_12">Create a file <span class="inline-code" id="1140773481#z8gloh5_14">mysql-todo.ts</span>.</p><div class="detached code-block" id="1140773481#z8gloh5_13"><pre><code class="language-ts">import { createConnection } from 'mysql2/promise';

// MySQL Connection
const connection = createConnection({
  host: 'localhost',
  user: 'root',
  password: 'password',
  database: 'todo_db',
});

async function createTodo(title: string) {
  const conn = await connection;
  const [result] = await conn.execute('INSERT INTO todos (title) VALUES (?)', [title]);
  console.log('Todo Created:', result);
}

async function fetchAllTodos() {
  const conn = await connection;
  const [todos] = await conn.query('SELECT * FROM todos');
  console.log('All Todos:', todos);
}

async function fetchTodoById(id: number) {
  const conn = await connection;
  const [todo] = await conn.query('SELECT * FROM todos WHERE id = ?', [id]);
  console.log('Todo by ID:', todo[0]);
}

async function deleteTodoById(id: number) {
  const conn = await connection;
  await conn.execute('DELETE FROM todos WHERE id = ?', [id]);
  console.log('Todo deleted with ID:', id);
}

// Execute CRUD operations
(async () =&gt; {
  await createTodo('Learn TypeScript');
  await fetchAllTodos();
  await fetchTodoById(1);
  await deleteTodoById(1);
})();</code></pre></div></section><section><h3 id="1140773481#step-3-run-the-app" data-toc="step-3-run-the-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-3-run-the-app">Step 3: Run the App</h3><div class="detached code-block" id="1140773481#z8gloh5_15"><pre><code class="language-bash">tsc mysql-todo.ts &amp;&amp; node mysql-todo.js</code></pre></div></section></section><section><h2 id="1140773481#2-postgresql-todo-crud-app" data-toc="2-postgresql-todo-crud-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-2-postgresql-todo-crud-app">2. PostgreSQL Todo CRUD App</h2><section><h3 id="1140773481#step-1-install-dependencies" data-toc="step-1-install-dependencies#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-1-install-dependencies">Step 1: Install Dependencies</h3><div class="detached code-block" id="1140773481#z8gloh5_20"><pre><code class="language-bash">npm install pg typescript @types/node</code></pre></div></section><section><h3 id="1140773481#step-2-postgresql-connection-and-crud-functions" data-toc="step-2-postgresql-connection-and-crud-functions#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-2-postgresql-connection-and-crud-functions">Step 2: PostgreSQL Connection and CRUD Functions</h3><p id="1140773481#z8gloh5_21">Create a file <span class="inline-code" id="1140773481#z8gloh5_23">postgres-todo.ts</span>.</p><div class="detached code-block" id="1140773481#z8gloh5_22"><pre><code class="language-javascript">import { Pool } from 'pg';

// PostgreSQL Connection
const pool = new Pool({
  user: 'postgres',
  host: 'localhost',
  database: 'todo_db',
  password: 'password',
  port: 5432,
});

async function createTodo(title: string) {
  const result = await pool.query('INSERT INTO todos (title) VALUES ($1) RETURNING *', [title]);
  console.log('Todo Created:', result.rows[0]);
}

async function fetchAllTodos() {
  const result = await pool.query('SELECT * FROM todos');
  console.log('All Todos:', result.rows);
}

async function fetchTodoById(id: number) {
  const result = await pool.query('SELECT * FROM todos WHERE id = $1', [id]);
  console.log('Todo by ID:', result.rows[0]);
}

async function deleteTodoById(id: number) {
  await pool.query('DELETE FROM todos WHERE id = $1', [id]);
  console.log('Todo deleted with ID:', id);
}

// Execute CRUD operations
(async () =&gt; {
  await createTodo('Learn PostgreSQL');
  await fetchAllTodos();
  await fetchTodoById(1);
  await deleteTodoById(1);
})();</code></pre></div></section><section><h3 id="1140773481#step-3-run-the-app" data-toc="step-3-run-the-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-3-run-the-app">Step 3: Run the App</h3><div class="detached code-block" id="1140773481#z8gloh5_24"><pre><code class="language-bash">tsc postgres-todo.ts &amp;&amp; node postgres-todo.js</code></pre></div></section></section><section><h2 id="1140773481#3-mongodb-todo-crud-app" data-toc="3-mongodb-todo-crud-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-3-mongodb-todo-crud-app">3. MongoDB Todo CRUD App</h2><section><h3 id="1140773481#step-1-install-dependencies" data-toc="step-1-install-dependencies#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-1-install-dependencies">Step 1: Install Dependencies</h3><div class="detached code-block" id="1140773481#z8gloh5_29"><pre><code class="language-bash">npm install mongoose typescript @types/node</code></pre></div></section><section><h3 id="1140773481#step-2-mongodb-connection-and-crud-functions" data-toc="step-2-mongodb-connection-and-crud-functions#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-2-mongodb-connection-and-crud-functions">Step 2: MongoDB Connection and CRUD Functions</h3><p id="1140773481#z8gloh5_30">Create a file <span class="inline-code" id="1140773481#z8gloh5_32">mongo-todo.ts</span>.</p><div class="detached code-block" id="1140773481#z8gloh5_31"><pre><code class="language-javascript">import mongoose from 'mongoose';

// MongoDB Connection
mongoose.connect('mongodb://localhost:27017/todo_db', {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

const todoSchema = new mongoose.Schema({
  title: String,
});

const Todo = mongoose.model('Todo', todoSchema);

async function createTodo(title: string) {
  const todo = new Todo({ title });
  await todo.save();
  console.log('Todo Created:', todo);
}

async function fetchAllTodos() {
  const todos = await Todo.find();
  console.log('All Todos:', todos);
}

async function fetchTodoById(id: string) {
  const todo = await Todo.findById(id);
  console.log('Todo by ID:', todo);
}

async function deleteTodoById(id: string) {
  await Todo.findByIdAndDelete(id);
  console.log('Todo deleted with ID:', id);
}

// Execute CRUD operations
(async () =&gt; {
  await createTodo('Learn MongoDB');
  await fetchAllTodos();
  const todo = await Todo.findOne(); // Assuming one exists
  if (todo) {
    await fetchTodoById(todo._id.toString());
    await deleteTodoById(todo._id.toString());
  }
})();</code></pre></div></section><section><h3 id="1140773481#step-3-run-the-app" data-toc="step-3-run-the-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-3-run-the-app">Step 3: Run the App</h3><div class="detached code-block" id="1140773481#z8gloh5_33"><pre><code class="language-bash">tsc mongo-todo.ts &amp;&amp; node mongo-todo.js</code></pre></div></section></section><section><h2 id="1140773481#4-mssql-todo-crud-app" data-toc="4-mssql-todo-crud-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-4-mssql-todo-crud-app">4. MSSQL Todo CRUD App</h2><section><h3 id="1140773481#step-1-install-dependencies" data-toc="step-1-install-dependencies#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-1-install-dependencies">Step 1: Install Dependencies</h3><div class="detached code-block" id="1140773481#z8gloh5_38"><pre><code class="language-bash">npm install mssql typescript @types/node</code></pre></div></section><section><h3 id="1140773481#step-2-mssql-connection-and-crud-functions" data-toc="step-2-mssql-connection-and-crud-functions#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-2-mssql-connection-and-crud-functions">Step 2: MSSQL Connection and CRUD Functions</h3><p id="1140773481#z8gloh5_39">Create a file <span class="inline-code" id="1140773481#z8gloh5_41">mssql-todo.ts</span>.</p><div class="detached code-block" id="1140773481#z8gloh5_40"><pre><code class="language-javascript">import sql from 'mssql';

// MSSQL Connection
const config = {
  user: 'sa',
  password: 'password',
  server: 'localhost',
  database: 'todo_db',
  options: {
    encrypt: false, // for local dev
  },
};

const poolPromise = sql.connect(config);

async function createTodo(title: string) {
  const pool = await poolPromise;
  const result = await pool.request().query(`INSERT INTO todos (title) VALUES ('${title}')`);
  console.log('Todo Created:', result);
}

async function fetchAllTodos() {
  const pool = await poolPromise;
  const result = await pool.request().query('SELECT * FROM todos');
  console.log('All Todos:', result.recordset);
}

async function fetchTodoById(id: number) {
  const pool = await poolPromise;
  const result = await pool.request().query(`SELECT * FROM todos WHERE id = ${id}`);
  console.log('Todo by ID:', result.recordset[0]);
}

async function deleteTodoById(id: number) {
  const pool = await poolPromise;
  await pool.request().query(`DELETE FROM todos WHERE id = ${id}`);
  console.log('Todo deleted with ID:', id);
}

// Execute CRUD operations
(async () =&gt; {
  await createTodo('Learn MSSQL');
  await fetchAllTodos();
  await fetchTodoById(1);
  await deleteTodoById(1);
})();</code></pre></div></section><section><h3 id="1140773481#step-3-run-the-app" data-toc="step-3-run-the-app#11-1-1-Using-Query-Builders-and-Raw-Queries.md-step-3-run-the-app">Step 3: Run the App</h3><div class="detached code-block" id="1140773481#z8gloh5_42"><pre><code class="language-bash">tsc mssql-todo.ts &amp;&amp; node mssql-todo.js</code></pre></div></section></section><section><h2 id="1140773481#summary" data-toc="summary#11-1-1-Using-Query-Builders-and-Raw-Queries.md-summary">Summary</h2><p id="1140773481#z8gloh5_44">In each of the examples above:</p><ul class="list" id="1140773481#z8gloh5_45" start="1"><li class="list-item" id="1140773481#z8gloh5_47"><p>We defined connection configurations for each database.</p></li><li class="list-item" id="1140773481#z8gloh5_48"><p>Implemented CRUD operations (<span class="inline-code" id="1140773481#z8gloh5_50">createTodo</span>, <span class="inline-code" id="1140773481#z8gloh5_51">fetchAllTodos</span>, <span class="inline-code" id="1140773481#z8gloh5_52">fetchTodoById</span>, <span class="inline-code" id="1140773481#z8gloh5_53">deleteTodoById</span>).</p></li><li class="list-item" id="1140773481#z8gloh5_49"><p>The functions are called with dummy data, and the operations are printed to the console.</p></li></ul><p id="1140773481#z8gloh5_46">These examples are basic and do not involve Express.js or routing. Instead, they are designed to be standalone scripts that perform CRUD operations directly on the respective databases. You can adapt this structure to your needs, including adding error handling, more detailed data validation, and additional features.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1164361118">11.1.2 Using ORM (Object-Relational Mapping)</h1><p id="-1164361118#-ruwap6_3">ORMs abstract database interactions, allowing developers to work with objects and models instead of raw SQL queries. This approach is particularly useful for those who want to avoid writing raw SQL and focus on the business logic.</p><p id="-1164361118#-ruwap6_4">Popular Node.js ORMs:</p><ul class="list" id="-1164361118#-ruwap6_5" start="1"><li class="list-item" id="-1164361118#-ruwap6_9"><p><span class="control" id="-1164361118#-ruwap6_12">Sequelize</span>: A promise-based ORM for MySQL, PostgreSQL, and SQLite that provides a comprehensive set of features, including model definition, associations, and transactions.</p></li><li class="list-item" id="-1164361118#-ruwap6_10"><p><span class="control" id="-1164361118#-ruwap6_13">TypeORM</span>: A versatile ORM that supports a wide variety of databases, including MySQL, PostgreSQL, SQLite, and MongoDB. It works well with TypeScript and supports decorators for defining models.</p></li><li class="list-item" id="-1164361118#-ruwap6_11"><p><span class="control" id="-1164361118#-ruwap6_14">Mongoose</span>: A popular ODM (Object Data Modeling) library for MongoDB that allows for defining schemas, models, and relationships in a simple and efficient way.</p></li></ul><section><h2 id="-1164361118#example-using-sequelize-with-postgresql" data-toc="example-using-sequelize-with-postgresql#11-2-Using-ORM-Object-Relational-Mapping.md-example-using-sequelize-with-postgresql">Example: Using Sequelize with PostgreSQL</h2><div class="detached code-block" id="-1164361118#-ruwap6_15"><pre><code class="language-ts">import { Sequelize, DataTypes } from 'sequelize';

const sequelize = new Sequelize('database', 'username', 'password', {
  host: 'localhost',
  dialect: 'postgres'
});

const Todo = sequelize.define('Todo', {
  title: {
    type: DataTypes.STRING,
    allowNull: false,
  },
});

async function fetchTodos() {
  const todos = await Todo.findAll();
  return todos;
}</code></pre></div></section><section><h2 id="-1164361118#common-crud-operations-in-node-js-with-databases" data-toc="common-crud-operations-in-node-js-with-databases#11-2-Using-ORM-Object-Relational-Mapping.md-common-crud-operations-in-node-js-with-databases">Common CRUD Operations in Node.js with Databases</h2><p id="-1164361118#-ruwap6_16">CRUD (Create, Read, Update, Delete) operations are the foundation of interacting with databases. These operations allow you to store, retrieve, update, and delete data.</p><ul class="list" id="-1164361118#-ruwap6_17" start="1"><li class="list-item" id="-1164361118#-ruwap6_19"><p><span class="control" id="-1164361118#-ruwap6_23">Create</span>: Inserting new records into a table (SQL) or collection (NoSQL).</p></li><li class="list-item" id="-1164361118#-ruwap6_20"><p><span class="control" id="-1164361118#-ruwap6_24">Read</span>: Querying records from a database.</p></li><li class="list-item" id="-1164361118#-ruwap6_21"><p><span class="control" id="-1164361118#-ruwap6_25">Update</span>: Modifying existing records in the database.</p></li><li class="list-item" id="-1164361118#-ruwap6_22"><p><span class="control" id="-1164361118#-ruwap6_26">Delete</span>: Removing records from the database.</p></li></ul><section><h3 id="-1164361118#example-crud-with-mongodb-mongoose" data-toc="example-crud-with-mongodb-mongoose#11-2-Using-ORM-Object-Relational-Mapping.md-example-crud-with-mongodb-mongoose">Example: CRUD with MongoDB (Mongoose)</h3><div class="detached code-block" id="-1164361118#-ruwap6_27"><pre><code class="language-javascript">import mongoose from 'mongoose';

const todoSchema = new mongoose.Schema({ title: String });
const Todo = mongoose.model('Todo', todoSchema);

// Create a new Todo
async function createTodo() {
  const todo = new Todo({ title: 'Learn Node.js with MongoDB' });
  await todo.save();
  console.log('Todo created:', todo);
}

// Read all Todos
async function fetchTodos() {
  const todos = await Todo.find();
  console.log('All Todos:', todos);
}</code></pre></div></section></section><section><h2 id="-1164361118#best-practices-for-database-integration-with-node-js" data-toc="best-practices-for-database-integration-with-node-js#11-2-Using-ORM-Object-Relational-Mapping.md-best-practices-for-database-integration-with-node-js">Best Practices for Database Integration with Node.js</h2><ol class="list list-decimal" id="-1164361118#-ruwap6_28" type="1" start="1"><li class="list-item" id="-1164361118#-ruwap6_29"><p><span class="control" id="-1164361118#-ruwap6_33">Connection Pooling</span>: Use connection pools to reuse connections efficiently rather than creating a new one for each request, which can improve performance and resource usage.</p></li><li class="list-item" id="-1164361118#-ruwap6_30"><p><span class="control" id="-1164361118#-ruwap6_34">Error Handling</span>: Ensure proper error handling for database queries and connections to avoid application crashes. Implement retry logic or graceful shutdown in case of failures.</p></li><li class="list-item" id="-1164361118#-ruwap6_31"><p><span class="control" id="-1164361118#-ruwap6_35">Security</span>: Always secure database credentials using environment variables and avoid hardcoding sensitive information in your codebase. Additionally, ensure SQL queries are parameterized to prevent SQL injection attacks.</p></li><li class="list-item" id="-1164361118#-ruwap6_32"><p><span class="control" id="-1164361118#-ruwap6_36">Query Optimization</span>: For large datasets, optimize queries to reduce latency. This can involve using indexing, caching frequently accessed data, and minimizing the use of <span class="inline-code" id="-1164361118#-ruwap6_37">SELECT *</span> queries.</p></li></ol></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1580950209">12. Worker Threads in Node.JS (Multithreading)</h1><section><h2 id="-1580950209#overview" data-toc="overview#12-Multithreading-with-worker-threads.md-overview">Overview</h2><p id="-1580950209#z6i4sb7_8"><span class="control" id="-1580950209#z6i4sb7_9">Node.js</span> runs the javascript code using only a single thread, which means only one statement can be executed at a time. However, Nodejs itself is multithreaded and supplies hidden threads in js using the <span class="control" id="-1580950209#z6i4sb7_10">libuv library</span>, which handles operations like network requests or reading a file from a disk. Nodejs introduced the <span class="control" id="-1580950209#z6i4sb7_11">worker threads module</span>, which allows us to create <span class="inline-code" id="-1580950209#z6i4sb7_12">multiple tasks in parallel</span> and execute those tasks. These worker threads divide CPU-bound tasks to many workers for optimization and do not block the main thread.</p></section><section><h2 id="-1580950209#introduction" data-toc="introduction#12-Multithreading-with-worker-threads.md-introduction">Introduction</h2><ul class="list" id="-1580950209#z6i4sb7_13" start="1"><li class="list-item" id="-1580950209#z6i4sb7_14"><p>Threads are like a small process: they have their instruction pointer and can conduct one Javascript task at a time. Threads reside within a process's memory and they don't have their memory. The execution of threads is similar to that of processes.</p></li><li class="list-item" id="-1580950209#z6i4sb7_15"><p>Javascript is single-threaded by default which means only one thread is available to perform all the operations. This was the main drawback of the javascript which led to the implementation of server-side Asynchronous I/O, which would reduce the race among the thread in a multithreading environment.</p></li><li class="list-item" id="-1580950209#z6i4sb7_16"><p>Lets us now see how javascript has evolved. Javascript has introduced a new concept to prevent the limitation we are facing, that is, Web Workers. Web Workers (threads in js) are mainly used to perform CPU-intensive Javascript tasks. They can perform long-running tasks without affecting or blocking the main execution thread.</p></li><li class="list-item" id="-1580950209#z6i4sb7_17"><p>Using a Constructor, we can create a worker object, which will run a js file. This js file includes code to run the worker thread; these workers run in some other global context that is different from the current window. However, Node.js built-in asynchronous I/O operations are more efficient than Workers can be. Web workers are not of much help with I/O-intensive work.</p></li></ul></section><section><h2 id="-1580950209#need-for-parallel-processing" data-toc="need-for-parallel-processing#12-Multithreading-with-worker-threads.md-need-for-parallel-processing">Need for Parallel Processing</h2><p id="-1580950209#z6i4sb7_18">Imagine if we do CPU-intensive tasks synchronously, such as a loop with a large number of iterations, fetching data from an API or external resource, and handling file system I/O. This will create a large block of synchronous code that will block the rest of the code. Meanwhile, if another request is sent, it will be waiting for a much larger period before the response is sent back to the user.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1580950209#z6i4sb7_19" alt="event_loop.png" title="event_loop.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/event_loop.png" width="1700" height="1402"><figcaption class="center-text">event_loop.png</figcaption></figure></div><p id="-1580950209#z6i4sb7_20">Hence, there is a need for parallel computation where the incoming requests don't have to wait. But due to the single-threaded nature of Node.js, the main loop can take up only one task at a time. Hence worker threads are required to provide the parallel computation. The event loop takes on the synchronous part of all the processes, and the time taking asynchronous part is assigned to a worker thread provided by the <span class="control" id="-1580950209#z6i4sb7_21">libuv.</span> The threads then parallel execute the asynchronous task in the background and respond to the event loop once the process is completed.</p></section><section><h2 id="-1580950209#worker-threads-in-node-js" data-toc="worker-threads-in-node-js#12-Multithreading-with-worker-threads.md-worker-threads-in-node-js">Worker Threads in Node JS</h2><p id="-1580950209#z6i4sb7_22">When a Node.js process is executed, it runs:</p><ul class="list" id="-1580950209#z6i4sb7_23" start="1"><li class="list-item" id="-1580950209#z6i4sb7_29"><p><span class="control" id="-1580950209#z6i4sb7_34">One Process:</span> It is the Node.js global object that can be accessed from anywhere and has details about what&rsquo;s being executed at a time.</p></li><li class="list-item" id="-1580950209#z6i4sb7_30"><p><span class="control" id="-1580950209#z6i4sb7_35">One Thread:</span> Javascript being single-threaded, has only one main thread for the execution of tasks at a given time.</p></li><li class="list-item" id="-1580950209#z6i4sb7_31"><p><span class="control" id="-1580950209#z6i4sb7_36">One Event Loop:</span> This plays an important role in the asynchronous nature and non-blocking I/O of Node.js, by offloading tasks to the system kernel whenever possible through promises, callbacks and async/ await.</p></li><li class="list-item" id="-1580950209#z6i4sb7_32"><p><span class="control" id="-1580950209#z6i4sb7_37">One JS Engine Instance:</span> This is a computer program that executes js code.</p></li><li class="list-item" id="-1580950209#z6i4sb7_33"><p><span class="control" id="-1580950209#z6i4sb7_38">One Node.js Instance:</span> This is a computer program that executes Node.js code.</p></li></ul><p id="-1580950209#z6i4sb7_24">In simple words, Node runs on <span class="control" id="-1580950209#z6i4sb7_39">one main thread</span>, and there can only be a single task executing at a time in the event loop. However, there is a downside: if we have CPU-intensive code, like reading a file from the disk or any complex calculations in a large dataset, then this can block the main thread and hence another process from being executed.</p><p id="-1580950209#z6i4sb7_25">A function is known as <span class="control" id="-1580950209#z6i4sb7_40">blocking</span> if the main event loop must wait until it has finished executing the following command. A <span class="control" id="-1580950209#z6i4sb7_41"><span class="emphasis" id="-1580950209#z6i4sb7_43">Non-blocking function</span></span> will allow the main event loop to continue executing further code and alerts the main loop once it has finished by calling a <span class="emphasis" id="-1580950209#z6i4sb7_42">callback</span>.</p><p id="-1580950209#z6i4sb7_26">It&rsquo;s important to differentiate between <span class="emphasis" id="-1580950209#z6i4sb7_44">CPU operations</span> and <span class="emphasis" id="-1580950209#z6i4sb7_45">I/O (input/output) operations</span>, as only I/O operations are run <span class="emphasis" id="-1580950209#z6i4sb7_46">concurrently because they are executed asynchronously</span>. So the main <span class="emphasis" id="-1580950209#z6i4sb7_47">goal of Worker threads in js is to enhance the performance of CPU-intensive operations</span>, <span class="emphasis" id="-1580950209#z6i4sb7_48"><span class="control" id="-1580950209#z6i4sb7_49">and not I/O operations</span></span>.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1580950209#z6i4sb7_27" alt="threads.png" title="threads.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/threads.png" width="1700" height="1024"><figcaption class="center-text">threads.png</figcaption></figure></div><section><h3 id="-1580950209#hence-worker-threads-in-js-have-the-following-properties" data-toc="hence-worker-threads-in-js-have-the-following-properties#12-Multithreading-with-worker-threads.md-hence-worker-threads-in-js-have-the-following-properties">Hence worker threads in js have the following properties:</h3><ol class="list list-decimal" id="-1580950209#z6i4sb7_50" type="1" start="1"><li class="list-item" id="-1580950209#z6i4sb7_51"><p>One process</p></li><li class="list-item" id="-1580950209#z6i4sb7_52"><p>Multiple threads</p></li><li class="list-item" id="-1580950209#z6i4sb7_53"><p>One event loop per thread</p></li><li class="list-item" id="-1580950209#z6i4sb7_54"><p>One JS Engine Instance per thread</p></li><li class="list-item" id="-1580950209#z6i4sb7_55"><p>One Node.js Instance per thread</p></li></ol></section></section><section><h2 id="-1580950209#how-do-worker-threads-work" data-toc="how-do-worker-threads-work#12-Multithreading-with-worker-threads.md-how-do-worker-threads-work">How do Worker Threads Work?</h2><p id="-1580950209#z6i4sb7_56">Worker threads in js were submitted as an experimental feature in Node.js version v10, but they became stable in version v12 of Node.js. Worker threads provide us with APIs to deal with CPU-intensive tasks without blocking the main thread; hence they maintain the responsive application. Unlike clusters or child_process, worker threads share memory among themselves by transferring ArrayBuffer instances.</p><p id="-1580950209#z6i4sb7_57">The worker thread gives CPU-intensive tasks to another thread while keeping the main thread available to new user requests. When we create a new worker thread, it is associated with a new event loop, so the main thread's event loop can take any further requests.</p><p id="-1580950209#z6i4sb7_58">Worker threads in js don't have any synchronization mechanism like any multi-threaded programming language. Chrome's V8 engine is used to run the Node process. Each worker thread is isolated from other threads. The V8 engine allows us to create isolated V8 runtimes.V8 isolates the instances with their own Javascript heaps and micro-task queues. V8 isolates exist in fully distinct states. Objects from one isolation may not be used in another. The embedder can build several isolates and use them in different threads at the same time. At any given time, only one thread can enter an isolate.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1580950209#z6i4sb7_59" alt="workerthreads.png" title="workerthreads.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/workerthreads.png" width="1700" height="1456"><figcaption class="center-text">workerthreads.png</figcaption></figure></div></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-956173336">12.1 Implementing worker threads</h1><p id="-956173336#-j92xti_3">To utilize worker threads in Node.js using TypeScript and TSX, follow the steps below.</p><section><h2 id="-956173336#project-setup" data-toc="project-setup#Implementing-worker-threads.md-project-setup">Project Setup</h2><ol class="list list-decimal" id="-956173336#-j92xti_11" type="1" start="1"><li class="list-item" id="-956173336#-j92xti_12"><p id="-956173336#-j92xti_17"><span class="control" id="-956173336#-j92xti_20">Initialize the Project:</span></p><p id="-956173336#-j92xti_18">Create a new directory for your project and initialize it with <span class="inline-code" id="-956173336#-j92xti_21">npm</span>.</p><div class="detached code-block" id="-956173336#-j92xti_19"><pre><code class="language-bash">mkdir worker-threads-ts
cd worker-threads-ts
npm init -y</code></pre></div></li><li class="list-item" id="-956173336#-j92xti_13"><p id="-956173336#-j92xti_22"><span class="control" id="-956173336#-j92xti_25">Install Dependencies:</span></p><p id="-956173336#-j92xti_23">Install the necessary dependencies, including TypeScript and TSX.</p><div class="detached code-block" id="-956173336#-j92xti_24"><pre><code class="language-bash">npm install typescript tsx --save-dev</code></pre></div></li><li class="list-item" id="-956173336#-j92xti_14"><p id="-956173336#-j92xti_26"><span class="control" id="-956173336#-j92xti_31">Initialize TypeScript Configuration:</span></p><p id="-956173336#-j92xti_27">Generate a <span class="inline-code" id="-956173336#-j92xti_32">tsconfig.json</span> file with the following command:</p><div class="detached code-block" id="-956173336#-j92xti_28"><pre><code class="language-bash">npx tsc --init</code></pre></div><p id="-956173336#-j92xti_29">Update the <span class="inline-code" id="-956173336#-j92xti_33">tsconfig.json</span> to support ES Modules and other necessary settings:</p><div class="detached code-block" id="-956173336#-j92xti_30"><pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES2020&quot;,
    &quot;module&quot;: &quot;ESNext&quot;,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;outDir&quot;: &quot;./dist&quot;,
    &quot;rootDir&quot;: &quot;./src&quot;,
    &quot;strict&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;forceConsistentCasingInFileNames&quot;: true,
    &quot;skipLibCheck&quot;: true
  },
  &quot;include&quot;: [&quot;src&quot;]
}</code></pre></div></li><li class="list-item" id="-956173336#-j92xti_15"><p id="-956173336#-j92xti_34"><span class="control" id="-956173336#-j92xti_37">Update <span class="inline-code" id="-956173336#-j92xti_38">package.json</span>:</span></p><p id="-956173336#-j92xti_35">Add a script to run your TypeScript files using TSX.</p><div class="detached code-block" id="-956173336#-j92xti_36"><pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;tsx src/main.ts&quot;
  }
}</code></pre></div></li><li class="list-item" id="-956173336#-j92xti_16"><p id="-956173336#-j92xti_39"><span class="control" id="-956173336#-j92xti_42">Project Structure:</span></p><p id="-956173336#-j92xti_40">Create a <span class="inline-code" id="-956173336#-j92xti_43">src</span> directory to house your TypeScript files.</p><div class="detached code-block" id="-956173336#-j92xti_41"><pre><code class="language-bash">mkdir src</code></pre></div></li></ol></section><section><h2 id="-956173336#basic-worker-thread-example" data-toc="basic-worker-thread-example#Implementing-worker-threads.md-basic-worker-thread-example">Basic Worker Thread Example</h2><p id="-956173336#-j92xti_44">Below is a simple example demonstrating how to create a worker thread that executes a separate TypeScript file.</p><p id="-956173336#-j92xti_45"><span class="control" id="-956173336#-j92xti_54">1. Create the Worker Script (<span class="inline-code" id="-956173336#-j92xti_55">worker.ts</span>):</span></p><div class="detached code-block" id="-956173336#-j92xti_46"><pre><code class="language-javascript">// src/worker.ts
import { parentPort } from 'worker_threads';

// Define the type of tasks the worker can handle
type Task = number;

// Function to calculate factorial
function factorial(n: number): number {
  if (n === 0 || n === 1) return 1;
  return n * factorial(n - 1);
}

// Listen for messages from the main thread
parentPort?.on('message', (task: Task) =&gt; {
  console.log(`Worker received task: ${task}`);
  
  const result = factorial(task);
  
  // Send the result back to the main thread
  parentPort?.postMessage(result);
});</code></pre></div><p id="-956173336#-j92xti_47"><span class="control" id="-956173336#-j92xti_56">2. Create the Main Script (<span class="inline-code" id="-956173336#-j92xti_57">main.ts</span>):</span></p><div class="detached code-block" id="-956173336#-j92xti_48"><pre><code class="language-javascript">// src/main.ts
import { Worker } from 'worker_threads';
import path from 'path';
import { fileURLToPath } from 'url';

// Helper to get __dirname in ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Define the type for worker results
type WorkerResult = number;

// Function to run a worker
function runWorker(task: number): Promise&lt;WorkerResult&gt; {
  return new Promise((resolve, reject) =&gt; {
    const workerPath = path.resolve(__dirname, './worker.ts');
    const worker = new Worker(workerPath, {
      // Specify the TypeScript file; TSX handles transpilation
      // No additional execArgv needed for TSX
    });

    // Send task to the worker
    worker.postMessage(task);

    // Listen for messages from the worker
    worker.on('message', (result: WorkerResult) =&gt; {
      resolve(result);
    });

    // Handle errors
    worker.on('error', reject);

    // Handle worker exit
    worker.on('exit', (code) =&gt; {
      if (code !== 0)
        reject(new Error(`Worker stopped with exit code ${code}`));
    });
  });
}

// Example usage
async function main() {
  const number = 10;
  console.log(`Calculating factorial of ${number} in worker thread...`);

  try {
    const result = await runWorker(number);
    console.log(`Factorial of ${number} is ${result}`);
  } catch (err) {
    console.error(err);
  }
}

main();</code></pre></div><p id="-956173336#-j92xti_49"><span class="control" id="-956173336#-j92xti_58">3. Run the Application:</span></p><p id="-956173336#-j92xti_50">Execute the following command to run the main script using the <span class="inline-code" id="-956173336#-j92xti_59">start</span> script defined in <span class="inline-code" id="-956173336#-j92xti_60">package.json</span>:</p><div class="detached code-block" id="-956173336#-j92xti_51"><pre><code class="language-bash">npm run start</code></pre></div><p id="-956173336#-j92xti_52"><span class="control" id="-956173336#-j92xti_61">Output:</span></p><div class="detached code-block" id="-956173336#-j92xti_53"><pre><code class="language-none">Calculating factorial of 10 in worker thread...
Worker received task: 10
Factorial of 10 is 3628800</code></pre></div></section><section><h2 id="-956173336#explanation" data-toc="explanation#Implementing-worker-threads.md-explanation">Explanation:</h2><ul class="list" id="-956173336#-j92xti_62" start="1"><li class="list-item" id="-956173336#-j92xti_63"><p id="-956173336#-j92xti_65"><span class="control" id="-956173336#-j92xti_67">worker.ts:</span></p><ul class="list" id="-956173336#-j92xti_66" start="1"><li class="list-item" id="-956173336#-j92xti_68"><p>Uses TypeScript's type annotations for better type safety.</p></li><li class="list-item" id="-956173336#-j92xti_69"><p>Listens for messages (<span class="inline-code" id="-956173336#-j92xti_71">Task</span> type) from the main thread.</p></li><li class="list-item" id="-956173336#-j92xti_70"><p>Calculates the factorial of the received number and sends the result back.</p></li></ul></li><li class="list-item" id="-956173336#-j92xti_64"><p id="-956173336#-j92xti_72"><span class="control" id="-956173336#-j92xti_74">main.ts:</span></p><ul class="list" id="-956173336#-j92xti_73" start="1"><li class="list-item" id="-956173336#-j92xti_75"><p>Creates a new worker thread by instantiating the <span class="inline-code" id="-956173336#-j92xti_79">Worker</span> class with the path to <span class="inline-code" id="-956173336#-j92xti_80">worker.ts</span>.</p></li><li class="list-item" id="-956173336#-j92xti_76"><p>Sends a number to the worker thread to compute its factorial.</p></li><li class="list-item" id="-956173336#-j92xti_77"><p>Awaits the result and logs it to the console.</p></li><li class="list-item" id="-956173336#-j92xti_78"><p>Includes error handling for worker errors and exit codes.</p></li></ul></li></ul></section><section><h2 id="-956173336#communication-between-main-thread-and-worker" data-toc="communication-between-main-thread-and-worker#Implementing-worker-threads.md-communication-between-main-thread-and-worker">Communication Between Main Thread and Worker</h2><p id="-956173336#-j92xti_81">Worker threads communicate with the main thread using messages. They can send and receive messages using the <span class="inline-code" id="-956173336#-j92xti_83">postMessage</span> method and the <span class="inline-code" id="-956173336#-j92xti_84">message</span> event.</p><section><h3 id="-956173336#example-sending-and-receiving-multiple-messages" data-toc="example-sending-and-receiving-multiple-messages#Implementing-worker-threads.md-example-sending-and-receiving-multiple-messages">Example: Sending and Receiving Multiple Messages</h3><p id="-956173336#-j92xti_85"><span class="control" id="-956173336#-j92xti_93">1. Update <span class="inline-code" id="-956173336#-j92xti_94">worker.ts</span> to Handle Multiple Tasks:</span></p><div class="detached code-block" id="-956173336#-j92xti_86"><pre><code class="language-javascript">// src/worker.ts
import { parentPort } from 'worker_threads';

// Define the types for tasks and messages
type Task = number | 'exit';
type Message = number;

// Function to calculate factorial
function factorial(n: number): number {
  if (n === 0 || n === 1) return 1;
  return n * factorial(n - 1);
}

// Listen for messages from the main thread
parentPort?.on('message', (task: Task) =&gt; {
  if (task === 'exit') {
    parentPort?.close();
  } else {
    console.log(`Worker received task: ${task}`);
    const result = factorial(task);
    parentPort?.postMessage(result);
  }
});</code></pre></div><p id="-956173336#-j92xti_87"><span class="control" id="-956173336#-j92xti_95">2. Update <span class="inline-code" id="-956173336#-j92xti_96">main.ts</span> to Send Multiple Tasks:</span></p><div class="detached code-block" id="-956173336#-j92xti_88"><pre><code class="language-javascript">// src/main.ts
import { Worker } from 'worker_threads';
import path from 'path';
import { fileURLToPath } from 'url';

// Helper to get __dirname in ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Define the type for worker results
type WorkerResult = number;

// Function to run a worker
function runWorker(task: number | 'exit'): Promise&lt;WorkerResult&gt; {
  return new Promise((resolve, reject) =&gt; {
    const workerPath = path.resolve(__dirname, './worker.ts');
    const worker = new Worker(workerPath, {
      // Specify the TypeScript file; TSX handles transpilation
    });

    // Send task to the worker
    worker.postMessage(task);

    // Listen for messages from the worker
    worker.on('message', (result: WorkerResult) =&gt; {
      resolve(result);
    });

    // Handle errors
    worker.on('error', reject);

    // Handle worker exit
    worker.on('exit', (code) =&gt; {
      if (code !== 0)
        reject(new Error(`Worker stopped with exit code ${code}`));
    });
  });
}

// Example usage
async function main() {
  const tasks: number[] = [5, 7, 10];
  const promises = tasks.map(runWorker);

  try {
    const results = await Promise.all(promises);
    tasks.forEach((task, index) =&gt; {
      console.log(`Factorial of ${task} is ${results[index]}`);
    });
  } catch (err) {
    console.error(err);
  }
}

main();</code></pre></div><p id="-956173336#-j92xti_89"><span class="control" id="-956173336#-j92xti_97">3. Run the Application:</span></p><div class="detached code-block" id="-956173336#-j92xti_90"><pre><code class="language-bash">npm run start</code></pre></div><p id="-956173336#-j92xti_91"><span class="control" id="-956173336#-j92xti_98">Output:</span></p><div class="detached code-block" id="-956173336#-j92xti_92"><pre><code class="language-none">Worker received task: 5
Worker received task: 7
Worker received task: 10
Factorial of 5 is 120
Factorial of 7 is 5040
Factorial of 10 is 3628800</code></pre></div></section></section><section><h2 id="-956173336#explanation" data-toc="explanation#Implementing-worker-threads.md-explanation">Explanation:</h2><ul class="list" id="-956173336#-j92xti_99" start="1"><li class="list-item" id="-956173336#-j92xti_100"><p id="-956173336#-j92xti_102"><span class="control" id="-956173336#-j92xti_104">worker.ts:</span></p><ul class="list" id="-956173336#-j92xti_103" start="1"><li class="list-item" id="-956173336#-j92xti_105"><p>Enhanced to handle multiple tasks by accepting an array of numbers.</p></li><li class="list-item" id="-956173336#-j92xti_106"><p>Listens for the <span class="inline-code" id="-956173336#-j92xti_107">'exit'</span> message to gracefully close the worker.</p></li></ul></li><li class="list-item" id="-956173336#-j92xti_101"><p id="-956173336#-j92xti_108"><span class="control" id="-956173336#-j92xti_110">main.ts:</span></p><ul class="list" id="-956173336#-j92xti_109" start="1"><li class="list-item" id="-956173336#-j92xti_111"><p>Sends multiple tasks to separate worker threads by mapping over the <span class="inline-code" id="-956173336#-j92xti_113">tasks</span> array.</p></li><li class="list-item" id="-956173336#-j92xti_112"><p>Awaits all promises using <span class="inline-code" id="-956173336#-j92xti_114">Promise.all</span> and logs each result accordingly.</p></li></ul></li></ul></section><section><h2 id="-956173336#practical-example-cpu-intensive-task" data-toc="practical-example-cpu-intensive-task#Implementing-worker-threads.md-practical-example-cpu-intensive-task">Practical Example: CPU-Intensive Task</h2><p id="-956173336#-j92xti_115">To illustrate the benefits of worker threads, let's compare a CPU-intensive task executed in the main thread versus using worker threads.</p><p id="-956173336#-j92xti_116"><span class="control" id="-956173336#-j92xti_120">Task:</span> Calculate the Fibonacci number for a large <span class="inline-code" id="-956173336#-j92xti_121">n</span> (e.g., <span class="inline-code" id="-956173336#-j92xti_122">n = 40</span>).</p><section><h3 id="-956173336#1-without-worker-threads-single-threaded" data-toc="1-without-worker-threads-single-threaded#Implementing-worker-threads.md-1-without-worker-threads-single-threaded">1. Without Worker Threads (Single-Threaded)</h3><p id="-956173336#-j92xti_123"><span class="control" id="-956173336#-j92xti_131">fibonacci.ts:</span></p><div class="detached code-block" id="-956173336#-j92xti_124"><pre><code class="language-javascript">// src/fibonacci.ts
function fibonacci(n: number): number {
  if (n &lt;= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

const n = 40;
console.log(`Fibonacci of ${n} is ${fibonacci(n)}`);</code></pre></div><p id="-956173336#-j92xti_125"><span class="control" id="-956173336#-j92xti_132">Run the Script:</span></p><p id="-956173336#-j92xti_126">Execute the script using TSX.</p><div class="detached code-block" id="-956173336#-j92xti_127"><pre><code class="language-bash">tsx src/fibonacci.ts</code></pre></div><p id="-956173336#-j92xti_128"><span class="control" id="-956173336#-j92xti_133">Output:</span></p><div class="detached code-block" id="-956173336#-j92xti_129"><pre><code class="language-none">Fibonacci of 40 is 102334155</code></pre></div><p id="-956173336#-j92xti_130"><span class="control" id="-956173336#-j92xti_134">Note:</span> While this computation is running, the main thread is blocked and cannot handle other tasks.</p></section><section><h3 id="-956173336#2-using-worker-threads-multithreaded" data-toc="2-using-worker-threads-multithreaded#Implementing-worker-threads.md-2-using-worker-threads-multithreaded">2. Using Worker Threads (Multithreaded)</h3><p id="-956173336#-j92xti_135"><span class="control" id="-956173336#-j92xti_143">worker-fibonacci.ts:</span></p><div class="detached code-block" id="-956173336#-j92xti_136"><pre><code class="language-javascript">// src/worker-fibonacci.ts
import { parentPort } from 'worker_threads';

// Function to calculate Fibonacci
function fibonacci(n: number): number {
  if (n &lt;= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

// Listen for messages from the main thread
parentPort?.on('message', (n: number) =&gt; {
  const result = fibonacci(n);
  parentPort?.postMessage(result);
});</code></pre></div><p id="-956173336#-j92xti_137"><span class="control" id="-956173336#-j92xti_144">main-fibonacci.ts:</span></p><div class="detached code-block" id="-956173336#-j92xti_138"><pre><code class="language-javascript">// src/main-fibonacci.ts
import { Worker } from 'worker_threads';
import path from 'path';
import { fileURLToPath } from 'url';

// Helper to get __dirname in ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Define the type for worker results
type WorkerResult = number;

// Function to run the Fibonacci worker
function runFibonacci(n: number): Promise&lt;WorkerResult&gt; {
  return new Promise((resolve, reject) =&gt; {
    const workerPath = path.resolve(__dirname, './worker-fibonacci.ts');
    const worker = new Worker(workerPath, {
      // Specify the TypeScript file; TSX handles transpilation
    });

    // Send task to the worker
    worker.postMessage(n);

    // Listen for messages from the worker
    worker.on('message', (result: WorkerResult) =&gt; {
      resolve(result);
    });

    // Handle errors
    worker.on('error', reject);

    // Handle worker exit
    worker.on('exit', (code) =&gt; {
      if (code !== 0)
        reject(new Error(`Worker stopped with exit code ${code}`));
    });
  });
}

// Example usage
async function main() {
  const n = 40;
  console.log(`Calculating Fibonacci of ${n} using worker thread...`);

  const fibPromise = runFibonacci(n);
  
  // Meanwhile, main thread can perform other tasks
  console.log('Main thread is free to perform other tasks.');

  try {
    const result = await fibPromise;
    console.log(`Fibonacci of ${n} is ${result}`);
  } catch (err) {
    console.error(err);
  }
}

main();</code></pre></div><p id="-956173336#-j92xti_139"><span class="control" id="-956173336#-j92xti_145">3. Run the Script:</span></p><div class="detached code-block" id="-956173336#-j92xti_140"><pre><code class="language-bash">tsx src/main-fibonacci.ts</code></pre></div><p id="-956173336#-j92xti_141"><span class="control" id="-956173336#-j92xti_146">Output:</span></p><div class="detached code-block" id="-956173336#-j92xti_142"><pre><code class="language-none">Calculating Fibonacci of 40 using worker thread...
Main thread is free to perform other tasks.
Fibonacci of 40 is 102334155</code></pre></div></section><section><h3 id="-956173336#explanation" data-toc="explanation#Implementing-worker-threads.md-explanation">Explanation:</h3><ul class="list" id="-956173336#-j92xti_147" start="1"><li class="list-item" id="-956173336#-j92xti_148"><p id="-956173336#-j92xti_150"><span class="control" id="-956173336#-j92xti_152">Single-Threaded Approach:</span></p><ul class="list" id="-956173336#-j92xti_151" start="1"><li class="list-item" id="-956173336#-j92xti_153"><p>The main thread is blocked while calculating the Fibonacci number, making the application unresponsive during the computation.</p></li></ul></li><li class="list-item" id="-956173336#-j92xti_149"><p id="-956173336#-j92xti_154"><span class="control" id="-956173336#-j92xti_156">Worker Thread Approach:</span></p><ul class="list" id="-956173336#-j92xti_155" start="1"><li class="list-item" id="-956173336#-j92xti_157"><p>The computation is offloaded to a worker thread.</p></li><li class="list-item" id="-956173336#-j92xti_158"><p>The main thread remains free to handle other tasks, enhancing responsiveness and efficiency.</p></li></ul></li></ul></section></section><section><h2 id="-956173336#conclusion" data-toc="conclusion#Implementing-worker-threads.md-conclusion">Conclusion</h2><p id="-956173336#-j92xti_159">Worker threads in Node.js provide a powerful way to handle CPU-intensive tasks without blocking the main event loop. By leveraging multithreading with TypeScript and TSX, applications can achieve better performance, efficient resource utilization, and improved scalability. Understanding and implementing worker threads is essential for building high-performance Node.js applications that can handle a wide range of workloads effectively.</p></section></article></div></section></div></body></html>