<html><head><meta charset="UTF-8"><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-bash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-json.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-none.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-sql.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-ts.min.js"></script><style>
        .article {
            position: relative;
            padding-bottom: 24px;
        }
        

        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        

        .center-text {
            text-align: center;
        }
        

        .code-block {
            overflow: hidden;
            position: relative;
            padding: 0;
            border-radius: 8px;
            font-variant-ligatures: none;
            background-color: rgba(25, 25, 28, .05);
            word-break: break-all;
        }
        

        .container {
            max-width: 100%;
            overflow: hidden;
            page-break-inside: avoid;
            display: block;
        }
        

        .control {
            color: #19191c;
            font-size: 16px;
            font-weight: 670;
        }
        

        .detached {
            margin-block-start: 0;
            margin-block-end: 0;
            margin-bottom: 8px;
        }
        

        .emphasis {
            color: inherit;
            font-weight: inherit;
            font-style: italic;
        }
        

        .header-row {
            background: #e6e6e6;
        }
        

        .image {
            max-width: 100%;
            max-height: 90vh;
            width: auto;
        }
        

        .image-container {
            max-width: 100vw;
        }
        

        .image-size {
            height: auto;
        }
        

        .inline-code {
            border-radius: 4px;
            display: inline;
            padding: 2px 1px;
            font-family: JetBrains Sans,monospace;
            background: #e6e6e6;
        }
        

        .list {
            list-style-type: disc;
            padding-left: 0;
            margin-left: 15px;
        }
        

        .list-decimal {
            list-style-type: decimal;
        }
        

        .list-item {
            margin-top: 6px;
            margin-bottom: 6px;
            margin-left: 4px;
        }
        

        .main-title {
            padding-bottom: 24px;
            margin-top: 0;
            font-size: 40px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        

        .prism {
            page-break-inside: avoid;
        }
        
        /* PrismJS 1.29.0
https://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript+abap+abnf+actionscript+ada+agda+al+antlr4+apacheconf+apex+apl+applescript+aql+arduino+arff+armasm+arturo+asciidoc+aspnet+asm6502+asmatmel+autohotkey+autoit+avisynth+avro-idl+awk+bash+basic+batch+bbcode+bbj+bicep+birb+bison+bnf+bqn+brainfuck+brightscript+bro+bsl+c+csharp+cpp+cfscript+chaiscript+cil+cilkc+cilkcpp+clojure+cmake+cobol+coffeescript+concurnas+csp+cooklang+coq+crystal+css-extras+csv+cue+cypher+d+dart+dataweave+dax+dhall+diff+django+dns-zone-file+docker+dot+ebnf+editorconfig+eiffel+ejs+elixir+elm+etlua+erb+erlang+excel-formula+fsharp+factor+false+firestore-security-rules+flow+fortran+ftl+gml+gap+gcode+gdscript+gedcom+gettext+gherkin+git+glsl+gn+linker-script+go+go-module+gradle+graphql+groovy+haml+handlebars+haskell+haxe+hcl+hlsl+hoon+http+hpkp+hsts+ichigojam+icon+icu-message-format+idris+ignore+inform7+ini+io+j+java+javadoc+javadoclike+javastacktrace+jexl+jolie+jq+jsdoc+js-extras+json+json5+jsonp+jsstacktrace+js-templates+julia+keepalived+keyman+kotlin+kumir+kusto+latex+latte+less+lilypond+liquid+lisp+livescript+llvm+log+lolcode+lua+magma+makefile+markdown+markup-templating+mata+matlab+maxscript+mel+mermaid+metafont+mizar+mongodb+monkey+moonscript+n1ql+n4js+nand2tetris-hdl+naniscript+nasm+neon+nevod+nginx+nim+nix+nsis+objectivec+ocaml+odin+opencl+openqasm+oz+parigp+parser+pascal+pascaligo+psl+pcaxis+peoplecode+perl+php+phpdoc+php-extras+plant-uml+plsql+powerquery+powershell+processing+prolog+promql+properties+protobuf+pug+puppet+pure+purebasic+purescript+python+qsharp+q+qml+qore+r+racket+cshtml+jsx+tsx+reason+regex+rego+renpy+rescript+rest+rip+roboconf+robotframework+ruby+rust+sas+sass+scss+scala+scheme+shell-session+smali+smalltalk+smarty+sml+solidity+solution-file+soy+sparql+splunk-spl+sqf+sql+squirrel+stan+stata+iecst+stylus+supercollider+swift+systemd+t4-templating+t4-cs+t4-vb+tap+tcl+tt2+textile+toml+tremor+turtle+twig+typescript+typoscript+unrealscript+uorazor+uri+v+vala+vbnet+velocity+verilog+vhdl+vim+visual-basic+warpscript+wasm+web-idl+wgsl+wiki+wolfram+wren+xeora+xml-doc+xojo+xquery+yaml+yang+zig&plugins=highlight-keywords */
code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:16px;margin:0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

        

        :root {
            width: 95%;
            max-width: 95vw;
            padding: 0 0 0 30px;
        }
        
        body {
            font-family: JetBrains Sans,serif;
        }
        
        a {
            overflow-wrap: anywhere;
            width: 100vw;
        }
        
        
        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff) format("woff");
            font-weight: 300;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff) format("woff");
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff) format("woff");
            font-weight: 600;
            font-style: normal;
        }
        
        
        code {
            display: inline;
            word-break: break-word;
            font-size: 15px;
            line-height: inherit;
            font-variant-ligatures: none;
            font-family: JetBrains Sans,monospace;
            white-space: pre-line;
            overflow-wrap: break-word;
        }
        
        figcaption {
            margin-top: 5px;
        }
        
        h2 {
            padding-top: 16px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h3 {
            padding-top: 8px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h4 {
            padding-top: 4px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        p {
            padding: 0;
            border: 0;
            line-height: 25px;
            margin-block-start: 0;
            margin-block-end: 0;
            padding-bottom: 8px;
        }
        
        div {
            display: block;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            page-break-inside: avoid;
        }
        
        th, td {
            border: 1px solid #c4c4c4;
            padding: 10px;
            text-align: left;
            word-break: break-all;
        }
        
        .entry {
            display: grid;
            grid-template-columns: auto max-content;
            grid-template-areas: "chapter page";
            align-items: end;
            gap: 0 .25rem;
            line-height: 25px;
        }
        
        .toc-link-container{
            grid-area: chapter;
            position: relative;
            overflow: hidden;
        }
        
        .toc-link{
            text-decoration: none;
            color: black;
        }
        
        .toc-link-container::after {
            position: absolute;
            padding-left: .25ch;
            content: " . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ";
            text-align: right;
        }
        
        .page {
            grid-area: page;
            width: 30px;
            text-align: right;
        }
        

        .table-wrapper {
            overflow: hidden;
            box-sizing: border-box;
            font: inherit;
        }
        

        .topic {
            page-break-before: always;
        }
        </style></head><body><div><section class="topic"><div><article class="article"><h1 class="main-title">Table of contents</h1><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1911855018">1. Introduction</a></div><div class="page">2</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-442002659">2. Getting Started</a></div><div class="page">6</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1559139746">3. Node Package managers</a></div><div class="page">11</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1175139288">3.1 PnPm Cheatsheet</a></div><div class="page">20</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-2011891282">4. Typescript Configuration</a></div><div class="page">24</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#215822030">5. Modules</a></div><div class="page">30</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-920554112">6. Node.js Globals</a></div><div class="page">37</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1815655717">7. HTTP Module</a></div><div class="page">42</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#2035172722">7.1 Install OpenSSL on Windows</a></div><div class="page">48</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#343909646">8. File System Module</a></div><div class="page">54</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-916870042">9. Node.js Events</a></div><div class="page">83</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1267330066">10. Node.js Errors</a></div><div class="page">90</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1051841038">11. Node intergration with Databases</a></div><div class="page">96</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1587952552">11.1 Node.js Database Integration Approaches</a></div><div class="page">99</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1791252104">MSSQL</a></div><div class="page">101</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1620389036">PostgreSQL</a></div><div class="page">106</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#73844866">MySQL</a></div><div class="page">109</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1954237522">MongoDB</a></div><div class="page">113</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1580950209">12. Worker Threads in Node.JS (Multithreading)</a></div><div class="page">119</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-956173336">12.1 Implementing worker threads</a></div><div class="page">124</div></div></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1911855018">1. Introduction</h1><section><h2 id="-1911855018#what-is-node-js" data-toc="what-is-node-js#1-Introduction.md-what-is-node-js">What is Node.js?</h2><div class="container"><figure class="image-container"><img class="center image image-size" id="-1911855018#-1ejv2e_6" alt="node_ts.png" title="node_ts.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/node_ts.png" width="1280" height="720"><figcaption class="center-text">node_ts.png</figcaption></figure></div><p id="-1911855018#-1ejv2e_7"><span class="control" id="-1911855018#-1ejv2e_11">Node.js</span> is an open-source, cross-platform JavaScript runtime environment that allows developers to build server-side and network applications using JavaScript. It is built on Chrome's V8 JavaScript engine, enabling fast and scalable development. Unlike traditional JavaScript, which typically runs in the browser, Node.js executes JavaScript code outside of the browser, making it ideal for backend development, real-time applications, and much more.</p><p id="-1911855018#-1ejv2e_8">Key features of Node.js:</p><ul class="list" id="-1911855018#-1ejv2e_9" start="1"><li class="list-item" id="-1911855018#-1ejv2e_12"><p>Asynchronous and event-driven</p></li><li class="list-item" id="-1911855018#-1ejv2e_13"><p>Non-blocking I/O model</p></li><li class="list-item" id="-1911855018#-1ejv2e_14"><p>Lightweight and efficient</p></li><li class="list-item" id="-1911855018#-1ejv2e_15"><p>Uses the same language (JavaScript) on both frontend and backend</p></li></ul><div class="detached code-block" id="-1911855018#-1ejv2e_10"><pre><code class="language-javascript">// A simple Node.js server in TypeScript

import * as http from 'http';

const server = http.createServer((req, res) =&gt; {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello, World!\n');
});

server.listen(3000, () =&gt; {
  console.log('Server running at http://localhost:3000/');
});</code></pre></div></section><section><h2 id="-1911855018#why-node-js" data-toc="why-node-js#1-Introduction.md-why-node-js">Why Node.js?</h2><p id="-1911855018#-1ejv2e_16">Node.js is widely adopted for a variety of reasons, making it one of the most popular tools for backend development:</p><ol class="list list-decimal" id="-1911855018#-1ejv2e_17" type="1" start="1"><li class="list-item" id="-1911855018#-1ejv2e_20"><p id="-1911855018#-1ejv2e_25"><span class="control" id="-1911855018#-1ejv2e_26">Single Language for Fullstack Development</span>: With Node.js, developers can use JavaScript for both the frontend and backend, making it easier for full-stack development and reducing the context switching between different languages.</p></li><li class="list-item" id="-1911855018#-1ejv2e_21"><p id="-1911855018#-1ejv2e_27"><span class="control" id="-1911855018#-1ejv2e_28">Fast Execution with V8 Engine</span>: The V8 engine, which powers Node.js, compiles JavaScript to native machine code, providing highly efficient execution.</p></li><li class="list-item" id="-1911855018#-1ejv2e_22"><p id="-1911855018#-1ejv2e_29"><span class="control" id="-1911855018#-1ejv2e_30">Non-blocking, Asynchronous Model</span>: Node.js uses an event-driven, non-blocking I/O model, which allows it to handle many connections concurrently without being resource-intensive. This makes Node.js particularly suitable for I/O-heavy applications, like web servers or real-time applications.</p></li><li class="list-item" id="-1911855018#-1ejv2e_23"><p id="-1911855018#-1ejv2e_31"><span class="control" id="-1911855018#-1ejv2e_32">Large Ecosystem</span>: The Node Package Manager (NPM) is the largest ecosystem of open-source libraries, which makes adding functionalities like database interaction, authentication, or real-time communication easy.</p></li><li class="list-item" id="-1911855018#-1ejv2e_24"><p id="-1911855018#-1ejv2e_33"><span class="control" id="-1911855018#-1ejv2e_34">Scalability</span>: Node.js is designed with scalability in mind, allowing developers to build applications that handle numerous requests efficiently.</p></li></ol><div class="detached code-block" id="-1911855018#-1ejv2e_18"><pre><code class="language-javascript">// Demonstrating non-blocking behavior in Node.js
import * as fs from 'fs';

console.log('Start reading file...');
fs.readFile('example.txt', 'utf-8', (err, data) =&gt; {
  if (err) throw err;
  console.log('File content:', data);
});
console.log('Do other work while file is being read.');</code></pre></div><p id="-1911855018#-1ejv2e_19">In the above example, Node.js doesn't block the execution while reading the file, allowing the server to perform other tasks.</p></section><section><h2 id="-1911855018#what-can-node-js-do" data-toc="what-can-node-js-do#1-Introduction.md-what-can-node-js-do">What Can Node.js Do?</h2><p id="-1911855018#-1ejv2e_35">Node.js can be used for a wide range of applications, making it a versatile tool in modern web development. Here are some common use cases:</p><ol class="list list-decimal" id="-1911855018#-1ejv2e_36" type="1" start="1"><li class="list-item" id="-1911855018#-1ejv2e_41"><p id="-1911855018#-1ejv2e_46"><span class="control" id="-1911855018#-1ejv2e_47">Web Servers</span>: Node.js is commonly used to build web servers. Its ability to handle multiple requests simultaneously with non-blocking I/O makes it highly efficient for web applications.</p></li><li class="list-item" id="-1911855018#-1ejv2e_42"><p id="-1911855018#-1ejv2e_48"><span class="control" id="-1911855018#-1ejv2e_49">API Development</span>: Node.js is an excellent choice for building RESTful APIs and microservices, thanks to its speed and the extensive support for libraries through NPM.</p></li><li class="list-item" id="-1911855018#-1ejv2e_43"><p id="-1911855018#-1ejv2e_50"><span class="control" id="-1911855018#-1ejv2e_51">Real-time Applications</span>: Real-time features such as chat applications, live data streaming, and collaborative tools can be efficiently built using Node.js. Libraries like Socket.io make it easy to implement WebSocket-based communication.</p></li><li class="list-item" id="-1911855018#-1ejv2e_44"><p id="-1911855018#-1ejv2e_52"><span class="control" id="-1911855018#-1ejv2e_53">Command Line Tools</span>: You can use Node.js to write command-line tools and scripts that automate tasks. With access to file systems, processes, and child processes, Node.js can handle various automation tasks.</p></li><li class="list-item" id="-1911855018#-1ejv2e_45"><p id="-1911855018#-1ejv2e_54"><span class="control" id="-1911855018#-1ejv2e_55">Serverless Functions</span>: Many cloud providers offer serverless computing using Node.js as the runtime. This allows you to write lightweight functions that automatically scale and handle HTTP requests.</p></li></ol><div class="detached code-block" id="-1911855018#-1ejv2e_37"><pre><code class="language-javascript">// Simple REST API with Node.js and Express in TypeScript

import express from 'express';

const app = express();
const port = 3000;

app.get('/', (req, res) =&gt; {
  res.send('Hello, World!');
});

app.get('/api', (req, res) =&gt; {
  res.json({ message: 'Welcome to the API!' });
});

app.listen(port, () =&gt; {
  console.log(`Server is running at http://localhost:${port}`);
});</code></pre></div><p id="-1911855018#-1ejv2e_38">With the above example, you can create a simple web server that responds to different routes. This is a very basic example of how Node.js can power web applications or APIs.</p><p id="-1911855018#-1ejv2e_40">This introduction sets the stage for understanding Node.js by explaining its core concepts, benefits, and practical use cases.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-442002659">2. Getting Started</h1><section><h2 id="-442002659#download-node-js" data-toc="download-node-js#2-Getting-Started.md-download-node-js">Download Node.js</h2><p id="-442002659#-1bweqr_6">To get started with Node.js, you'll first need to download and install it on your system. Node.js comes with its package manager, <span class="control" id="-442002659#-1bweqr_14">npm</span> (Node Package Manager), which allows you to install libraries and dependencies for your project.</p><ol class="list list-decimal" id="-442002659#-1bweqr_7" type="1" start="1"><li class="list-item" id="-442002659#-1bweqr_15"><p id="-442002659#-1bweqr_19">Visit the official Node.js website: https://nodejs.org/ (<a href="https://nodejs.org/">https://nodejs.org/</a>)</p></li><li class="list-item" id="-442002659#-1bweqr_16"><p id="-442002659#-1bweqr_21">You'll see two versions available:</p><ul class="list" id="-442002659#-1bweqr_22" start="1"><li class="list-item" id="-442002659#-1bweqr_23"><p><span class="control" id="-442002659#-1bweqr_25">LTS (Long Term Support)</span>: This version is recommended for most users as it is stable and gets security updates for a longer time.</p></li><li class="list-item" id="-442002659#-1bweqr_24"><p><span class="control" id="-442002659#-1bweqr_26">Current</span>: This is the latest version with new features, but it may not be as stable as the LTS version.</p></li></ul></li><li class="list-item" id="-442002659#-1bweqr_17"><p id="-442002659#-1bweqr_27">Download the appropriate installer for your operating system (Windows, macOS, or Linux).</p></li><li class="list-item" id="-442002659#-1bweqr_18"><p id="-442002659#-1bweqr_28">Run the installer and follow the setup instructions.</p></li></ol><p id="-442002659#-1bweqr_8">Once installed, you can verify the installation by opening your terminal (or Command Prompt) and typing:</p><div class="detached code-block" id="-442002659#-1bweqr_9"><pre><code class="language-bash">node -v</code></pre></div><p id="-442002659#-1bweqr_10">This should display the version of Node.js installed.</p><p id="-442002659#-1bweqr_11">You can also verify npm by running:</p><div class="detached code-block" id="-442002659#-1bweqr_12"><pre><code class="language-bash">npm -v</code></pre></div><p id="-442002659#-1bweqr_13">This will show the version of npm that was installed alongside Node.js.</p></section><section><h2 id="-442002659#command-line-interface-cli" data-toc="command-line-interface-cli#2-Getting-Started.md-command-line-interface-cli">Command Line Interface (CLI)</h2><p id="-442002659#-1bweqr_29">Node.js provides a simple command-line interface (CLI) for running JavaScript and TypeScript code. You can interact with Node.js through your terminal or command prompt.</p><section><h3 id="-442002659#1-running-node-js-repl-read-eval-print-loop" data-toc="1-running-node-js-repl-read-eval-print-loop#2-Getting-Started.md-1-running-node-js-repl-read-eval-print-loop">1. Running Node.js REPL (Read-Eval-Print Loop)</h3><p id="-442002659#-1bweqr_33">Node.js comes with a REPL, which allows you to execute JavaScript code interactively.</p><p id="-442002659#-1bweqr_34">To start the REPL, just type <span class="inline-code" id="-442002659#-1bweqr_37">node</span> in your terminal and press Enter:</p><div class="detached code-block" id="-442002659#-1bweqr_35"><pre><code class="language-bash">$ node
Welcome to Node.js v16.13.0.
Type &quot;.help&quot; for more information.
&gt; console.log('Hello, Node.js!');
Hello, Node.js!
&gt;</code></pre></div><p id="-442002659#-1bweqr_36">Here, you can execute any JavaScript code, and Node.js will evaluate it immediately. To exit the REPL, type <span class="inline-code" id="-442002659#-1bweqr_38">.exit</span> or press <span class="inline-code" id="-442002659#-1bweqr_39">Ctrl + C</span> twice.</p></section><section><h3 id="-442002659#2-running-node-js-scripts" data-toc="2-running-node-js-scripts#2-Getting-Started.md-2-running-node-js-scripts">2. Running Node.js Scripts</h3><p id="-442002659#-1bweqr_40">To execute a JavaScript or TypeScript file with Node.js, you can use the following command:</p><div class="detached code-block" id="-442002659#-1bweqr_41"><pre><code class="language-bash">node &lt;filename.js&gt;</code></pre></div><p id="-442002659#-1bweqr_42">For example, if you have a file <span class="inline-code" id="-442002659#-1bweqr_48">app.js</span> that contains:</p><div class="detached code-block" id="-442002659#-1bweqr_43"><pre><code class="language-javascript">console.log('Hello, World!');</code></pre></div><p id="-442002659#-1bweqr_44">You can run it with:</p><div class="detached code-block" id="-442002659#-1bweqr_45"><pre><code class="language-bash">node app.js</code></pre></div><p id="-442002659#-1bweqr_46">This will output:</p><div class="detached code-block" id="-442002659#-1bweqr_47"><pre><code class="language-none">Hello, World!</code></pre></div></section><section><h3 id="-442002659#3-installing-global-packages" data-toc="3-installing-global-packages#2-Getting-Started.md-3-installing-global-packages">3. Installing Global Packages</h3><p id="-442002659#-1bweqr_49">Node.js also uses npm for package management. You can install Node.js packages globally (so they are accessible anywhere) using npm:</p><div class="detached code-block" id="-442002659#-1bweqr_50"><pre><code class="language-bash">npm install -g typescript</code></pre></div><p id="-442002659#-1bweqr_51">In this example, we installed <span class="control" id="-442002659#-1bweqr_52">TypeScript</span> globally, allowing you to use the <span class="inline-code" id="-442002659#-1bweqr_53">tsc</span> (TypeScript Compiler) command.</p></section></section><section><h2 id="-442002659#initiate-the-node-js-file" data-toc="initiate-the-node-js-file#2-Getting-Started.md-initiate-the-node-js-file">Initiate the Node.js File</h2><p id="-442002659#-1bweqr_54">Before creating your first Node.js project, it&rsquo;s a good practice to set up a project directory and initialize it using npm. This will allow you to manage your dependencies and set up your project structure.</p><section><h3 id="-442002659#1-create-a-new-project-directory" data-toc="1-create-a-new-project-directory#2-Getting-Started.md-1-create-a-new-project-directory">1. Create a New Project Directory</h3><p id="-442002659#-1bweqr_60">Open your terminal and create a new directory for your project:</p><div class="detached code-block" id="-442002659#-1bweqr_61"><pre><code class="language-bash">mkdir my-node-app
cd my-node-app</code></pre></div></section><section><h3 id="-442002659#2-initialize-the-project-with-npm" data-toc="2-initialize-the-project-with-npm#2-Getting-Started.md-2-initialize-the-project-with-npm">2. Initialize the Project with npm</h3><p id="-442002659#-1bweqr_62">To initialize a new Node.js project, use the following command:</p><div class="detached code-block" id="-442002659#-1bweqr_63"><pre><code class="language-bash">npm init</code></pre></div><p id="-442002659#-1bweqr_64">This command will ask you several questions about your project (like project name, version, entry point, etc.), but you can skip through them by pressing Enter or manually configure them.</p><p id="-442002659#-1bweqr_65">Alternatively, you can use the <span class="inline-code" id="-442002659#-1bweqr_70">-y</span> flag to accept the default settings:</p><div class="detached code-block" id="-442002659#-1bweqr_66"><pre><code class="language-bash">npm init -y</code></pre></div><p id="-442002659#-1bweqr_67">This will generate a <span class="inline-code" id="-442002659#-1bweqr_71">package.json</span> file, which is a configuration file that stores metadata about your project, including dependencies, scripts, and more.</p><p id="-442002659#-1bweqr_68">The <span class="inline-code" id="-442002659#-1bweqr_72">package.json</span> file will look something like this:</p><div class="detached code-block" id="-442002659#-1bweqr_69"><pre><code class="language-json">{
  &quot;name&quot;: &quot;my-node-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}</code></pre></div></section><section><h3 id="-442002659#3-create-your-first-node-js-file" data-toc="3-create-your-first-node-js-file#2-Getting-Started.md-3-create-your-first-node-js-file">3. Create Your First Node.js File</h3><p id="-442002659#-1bweqr_73">Now, create a new file called <span class="inline-code" id="-442002659#-1bweqr_77">index.ts</span> (or <span class="inline-code" id="-442002659#-1bweqr_78">index.js</span> if you&rsquo;re using plain JavaScript):</p><div class="detached code-block" id="-442002659#-1bweqr_74"><pre><code class="language-bash">touch index.ts</code></pre></div><p id="-442002659#-1bweqr_75">Inside this file, you can write your first Node.js code using TypeScript:</p><div class="detached code-block" id="-442002659#-1bweqr_76"><pre><code class="language-javascript">const message: string = 'Hello, TypeScript with Node.js!';
console.log(message);</code></pre></div></section><section><h3 id="-442002659#4-run-the-typescript-file" data-toc="4-run-the-typescript-file#2-Getting-Started.md-4-run-the-typescript-file">4. Run the TypeScript File</h3><p id="-442002659#-1bweqr_79">To run TypeScript with Node.js, you need to transpile the TypeScript code into JavaScript using the TypeScript compiler (<span class="inline-code" id="-442002659#-1bweqr_88">tsc</span>).</p><p id="-442002659#-1bweqr_80">First, install TypeScript as a dev dependency:</p><div class="detached code-block" id="-442002659#-1bweqr_81"><pre><code class="language-bash">npm install typescript --save-dev</code></pre></div><p id="-442002659#-1bweqr_82">You can now compile the <span class="inline-code" id="-442002659#-1bweqr_89">index.ts</span> file into JavaScript:</p><div class="detached code-block" id="-442002659#-1bweqr_83"><pre><code class="language-bash">npx tsc index.ts</code></pre></div><p id="-442002659#-1bweqr_84">This will generate a JavaScript file (<span class="inline-code" id="-442002659#-1bweqr_90">index.js</span>), which can then be executed using Node.js:</p><div class="detached code-block" id="-442002659#-1bweqr_85"><pre><code class="language-bash">node index.js</code></pre></div><p id="-442002659#-1bweqr_86">The output will be:</p><div class="detached code-block" id="-442002659#-1bweqr_87"><pre><code class="language-none">Hello, TypeScript with Node.js!</code></pre></div></section><section><h3 id="-442002659#5-automate-the-compilation-and-running-optional" data-toc="5-automate-the-compilation-and-running-optional#2-Getting-Started.md-5-automate-the-compilation-and-running-optional">5. Automate the Compilation and Running (Optional)</h3><p id="-442002659#-1bweqr_91">To make the process of compiling and running TypeScript easier, you can add a script to your <span class="inline-code" id="-442002659#-1bweqr_98">package.json</span>:</p><div class="detached code-block" id="-442002659#-1bweqr_92"><pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;tsc &amp;&amp; node index.js&quot;
  }
}</code></pre></div><p id="-442002659#-1bweqr_93">Now, you can compile and run your project with one command:</p><div class="detached code-block" id="-442002659#-1bweqr_94"><pre><code class="language-bash">npm start</code></pre></div><p id="-442002659#-1bweqr_95">This will compile the TypeScript and run the generated JavaScript file.</p><p id="-442002659#-1bweqr_97">This section guides you through the process of downloading and setting up Node.js, familiarizing you with the command line interface, and creating your first Node.js project.</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1559139746">3. Node Package managers</h1><p id="-1559139746#z1kih8c_3">Node.js uses various package managers to handle external libraries and dependencies, which are essential for building modern applications. These package managers simplify the process of installing, updating, and managing the libraries your project requires. In this section, we'll cover what a package is, and introduce the most commonly used package managers: <span class="control" id="-1559139746#z1kih8c_9">NPM</span>, <span class="control" id="-1559139746#z1kih8c_10">PnPm</span>, and <span class="control" id="-1559139746#z1kih8c_11">Yarn</span>.</p><section><h2 id="-1559139746#what-is-a-package" data-toc="what-is-a-package#3-Node-Package-managers.md-what-is-a-package">What is a Package?</h2><p id="-1559139746#z1kih8c_12">In the Node.js ecosystem, a <span class="control" id="-1559139746#z1kih8c_20">package</span> refers to a reusable piece of code or library that performs a specific task or provides specific functionality. Packages are distributed as modules, which can include utilities, frameworks, middleware, or even entire applications.</p><p id="-1559139746#z1kih8c_13">A typical package may consist of:</p><ul class="list" id="-1559139746#z1kih8c_14" start="1"><li class="list-item" id="-1559139746#z1kih8c_21"><p>JavaScript/TypeScript code</p></li><li class="list-item" id="-1559139746#z1kih8c_22"><p>A <span class="inline-code" id="-1559139746#z1kih8c_24">package.json</span> file containing metadata (name, version, dependencies, etc.)</p></li><li class="list-item" id="-1559139746#z1kih8c_23"><p>Additional resources like README files, license agreements, and configuration files</p></li></ul><p id="-1559139746#z1kih8c_15">Packages can be installed locally (only available to the project) or globally (available system-wide). They are often hosted in package registries like the official <span class="control" id="-1559139746#z1kih8c_25">npm registry</span>.</p><p id="-1559139746#z1kih8c_16">Example of a <span class="inline-code" id="-1559139746#z1kih8c_26">package.json</span> file:</p><div class="detached code-block" id="-1559139746#z1kih8c_17"><pre><code class="language-json">{
  &quot;name&quot;: &quot;my-node-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;A simple Node.js app&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;dependencies&quot;: {
    &quot;express&quot;: &quot;^4.17.1&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;typescript&quot;: &quot;^4.4.3&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node index.js&quot;,
    &quot;build&quot;: &quot;tsc&quot;
  }
}</code></pre></div><p id="-1559139746#z1kih8c_18">In this example, the <span class="inline-code" id="-1559139746#z1kih8c_27">express</span> package is listed as a runtime dependency, while <span class="inline-code" id="-1559139746#z1kih8c_28">typescript</span> is a development dependency.</p></section><section><h2 id="-1559139746#npm-node-package-manager" data-toc="npm-node-package-manager#3-Node-Package-managers.md-npm-node-package-manager">NPM (Node Package Manager)</h2><p id="-1559139746#z1kih8c_29"><span class="control" id="-1559139746#z1kih8c_33">NPM (Node Package Manager)</span> is the default package manager for Node.js, and it comes pre-installed when you install Node.js. NPM allows developers to easily share and reuse code and manage dependencies.</p><section><h3 id="-1559139746#key-features" data-toc="key-features#3-Node-Package-managers.md-key-features">Key Features:</h3><ul class="list" id="-1559139746#z1kih8c_34" start="1"><li class="list-item" id="-1559139746#z1kih8c_35"><p><span class="control" id="-1559139746#z1kih8c_39">Largest Package Registry</span>: NPM has the largest repository of open-source Node.js libraries available for installation.</p></li><li class="list-item" id="-1559139746#z1kih8c_36"><p><span class="control" id="-1559139746#z1kih8c_40">Dependency Management</span>: It manages both direct and transitive dependencies through a <span class="inline-code" id="-1559139746#z1kih8c_41">package.json</span> file.</p></li><li class="list-item" id="-1559139746#z1kih8c_37"><p><span class="control" id="-1559139746#z1kih8c_42">Scripts</span>: NPM allows you to define custom scripts in <span class="inline-code" id="-1559139746#z1kih8c_43">package.json</span> to automate tasks like testing, building, or deploying.</p></li><li class="list-item" id="-1559139746#z1kih8c_38"><p><span class="control" id="-1559139746#z1kih8c_44">Versioning</span>: NPM makes it easy to update or lock dependencies to specific versions, ensuring that your project uses stable versions of packages.</p></li></ul></section><section><h3 id="-1559139746#common-npm-commands" data-toc="common-npm-commands#3-Node-Package-managers.md-common-npm-commands">Common NPM Commands:</h3><ul class="list" id="-1559139746#z1kih8c_45" start="1"><li class="list-item" id="-1559139746#z1kih8c_46"><p id="-1559139746#z1kih8c_52">Install a package locally:</p><div class="detached code-block" id="-1559139746#z1kih8c_53"><pre><code class="language-bash">npm install &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_47"><p id="-1559139746#z1kih8c_54">Install a package globally:</p><div class="detached code-block" id="-1559139746#z1kih8c_55"><pre><code class="language-bash">npm install -g &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_48"><p id="-1559139746#z1kih8c_56">Add a package as a development dependency:</p><div class="detached code-block" id="-1559139746#z1kih8c_57"><pre><code class="language-bash">npm install &lt;package-name&gt; --save-dev</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_49"><p id="-1559139746#z1kih8c_58">Install all dependencies listed in <span class="inline-code" id="-1559139746#z1kih8c_60">package.json</span>:</p><div class="detached code-block" id="-1559139746#z1kih8c_59"><pre><code class="language-bash">npm install</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_50"><p id="-1559139746#z1kih8c_61">Remove a package:</p><div class="detached code-block" id="-1559139746#z1kih8c_62"><pre><code class="language-bash">npm uninstall &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_51"><p id="-1559139746#z1kih8c_63">Running a custom script defined in <span class="inline-code" id="-1559139746#z1kih8c_65">package.json</span>:</p><div class="detached code-block" id="-1559139746#z1kih8c_64"><pre><code class="language-bash">npm run &lt;script-name&gt;</code></pre></div></li></ul></section><section><h3 id="-1559139746#example" data-toc="example#3-Node-Package-managers.md-example">Example:</h3><div class="detached code-block" id="-1559139746#z1kih8c_66"><pre><code class="language-bash">npm install express</code></pre></div><p id="-1559139746#z1kih8c_67">This command installs <span class="inline-code" id="-1559139746#z1kih8c_69">express</span>, a web framework, and updates <span class="inline-code" id="-1559139746#z1kih8c_70">package.json</span> with the new dependency.</p></section></section><section><h2 id="-1559139746#c-pnpm" data-toc="c-pnpm#3-Node-Package-managers.md-c-pnpm">c. PnPm</h2><p id="-1559139746#z1kih8c_71"><span class="control" id="-1559139746#z1kih8c_73">PnPm</span> is an alternative package manager for Node.js that aims to optimize disk space and speed. It addresses some of the inefficiencies of NPM and Yarn by storing package dependencies in a shared, central directory, and linking them into each project. This can significantly reduce disk usage, especially when multiple projects have similar dependencies.</p><section><h3 id="-1559139746#key-features" data-toc="key-features#3-Node-Package-managers.md-key-features">Key Features:</h3><ul class="list" id="-1559139746#z1kih8c_74" start="1"><li class="list-item" id="-1559139746#z1kih8c_75"><p><span class="control" id="-1559139746#z1kih8c_78">Efficient Disk Usage</span>: PnPm uses a content-addressable storage to store every package only once, even if multiple projects depend on different versions of the package.</p></li><li class="list-item" id="-1559139746#z1kih8c_76"><p><span class="control" id="-1559139746#z1kih8c_79">Performance</span>: It is often faster than both NPM and Yarn, especially for monorepo projects.</p></li><li class="list-item" id="-1559139746#z1kih8c_77"><p><span class="control" id="-1559139746#z1kih8c_80">Strict Dependency Management</span>: PnPm ensures that the dependency tree is more predictable, catching issues like missing or incompatible peer dependencies early on.</p></li></ul></section></section><section><h2 id="-1559139746#installing-pnpm" data-toc="installing-pnpm#3-Node-Package-managers.md-installing-pnpm">Installing PNPM</h2><p id="-1559139746#z1kih8c_82">PNPM is a fast, disk space-efficient package manager for Node.js. More information on https://pnpm.io/installation (<a href="https://pnpm.io/installation">https://pnpm.io/installation</a>)</p><ol class="list list-decimal" id="-1559139746#z1kih8c_83" type="1" start="1"><li class="list-item" id="-1559139746#z1kih8c_89"><p><span class="control" id="-1559139746#z1kih8c_90">Install PNPM</span>:</p></li></ol><ul class="list" id="-1559139746#z1kih8c_84" start="1"><li class="list-item" id="-1559139746#z1kih8c_91"><p id="-1559139746#z1kih8c_93">Using Powershell:</p><div class="detached code-block" id="-1559139746#z1kih8c_94"><pre><code class="language-bash">Invoke-WebRequest https://get.pnpm.io/install.ps1 -UseBasicParsing | Invoke-Expression</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_92"><p id="-1559139746#z1kih8c_95">On POSIX systems, you can use curl or wget:</p><div class="detached code-block" id="-1559139746#z1kih8c_96"><pre><code class="language-bash">curl -fsSL https://get.pnpm.io/install.sh | sh -</code></pre></div><p id="-1559139746#z1kih8c_97">If you don't have curl installed, you would like to use wget:</p><div class="detached code-block" id="-1559139746#z1kih8c_98"><pre><code class="language-bash">wget -qO- https://get.pnpm.io/install.sh | sh -</code></pre></div></li></ul><ol class="list list-decimal" id="-1559139746#z1kih8c_85" type="1" start="2"><li class="list-item" id="-1559139746#z1kih8c_99"><p id="-1559139746#z1kih8c_101"><span class="control" id="-1559139746#z1kih8c_104">Verify Installation</span>: After the installation completes, verify it by typing:</p><div class="detached code-block" id="-1559139746#z1kih8c_102"><pre><code class="language-bash">pnpm -v</code></pre></div><p id="-1559139746#z1kih8c_103">This should display the installed PNPM version.</p></li><li class="list-item" id="-1559139746#z1kih8c_100"><p id="-1559139746#z1kih8c_105"><span class="control" id="-1559139746#z1kih8c_107">Updating pnpm</span>: To update pnpm, run the <span class="inline-code" id="-1559139746#z1kih8c_108">self-update</span> command:</p><div class="detached code-block" id="-1559139746#z1kih8c_106"><pre><code class="language-bash">pnpm self-update</code></pre></div></li></ol><p id="-1559139746#z1kih8c_86">To install Node.js with PNPM on your system, follow the steps below:</p></section><section><h2 id="-1559139746#installing-node-js" data-toc="installing-node-js#3-Node-Package-managers.md-installing-node-js">Installing Node.js</h2><p id="-1559139746#z1kih8c_110">Node.js is a JavaScript runtime that allows you to run JavaScript code on your server or local machine. Here's how to install it:</p><section><h3 id="-1559139746#use" data-toc="use#3-Node-Package-managers.md-use">use</h3><ul class="list" id="-1559139746#z1kih8c_114" start="1"><li class="list-item" id="-1559139746#z1kih8c_122"><p>Install and use the specified version of Node.js. Install the LTS version of Node.js:</p></li></ul><div class="detached code-block" id="-1559139746#z1kih8c_115"><pre><code class="language-bash">pnpm env use --global lts</code></pre></div><ul class="list" id="-1559139746#z1kih8c_116" start="1"><li class="list-item" id="-1559139746#z1kih8c_123"><p>Or if you prefer a specific Install Node.js v16:</p></li></ul><div class="detached code-block" id="-1559139746#z1kih8c_117"><pre><code class="language-bash">pnpm env use --global 16</code></pre></div><section><h4 id="-1559139746#common-pnpm-commands" data-toc="common-pnpm-commands#3-Node-Package-managers.md-common-pnpm-commands">Common PnPm Commands:</h4><ul class="list" id="-1559139746#z1kih8c_124" start="1"><li class="list-item" id="-1559139746#z1kih8c_125"><p id="-1559139746#z1kih8c_129">Install a package locally:</p><div class="detached code-block" id="-1559139746#z1kih8c_130"><pre><code class="language-bash">pnpm install &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_126"><p id="-1559139746#z1kih8c_131">Install a package globally:</p><div class="detached code-block" id="-1559139746#z1kih8c_132"><pre><code class="language-bash">pnpm add -g &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_127"><p id="-1559139746#z1kih8c_133">Add a development dependency:</p><div class="detached code-block" id="-1559139746#z1kih8c_134"><pre><code class="language-bash">pnpm add &lt;package-name&gt; --save-dev</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_128"><p id="-1559139746#z1kih8c_135">Install all dependencies listed in <span class="inline-code" id="-1559139746#z1kih8c_137">package.json</span>:</p><div class="detached code-block" id="-1559139746#z1kih8c_136"><pre><code class="language-bash">pnpm install</code></pre></div></li></ul></section><section><h4 id="-1559139746#example" data-toc="example#3-Node-Package-managers.md-example">Example:</h4><div class="detached code-block" id="-1559139746#z1kih8c_138"><pre><code class="language-bash">pnpm install express</code></pre></div><p id="-1559139746#z1kih8c_139">This command installs <span class="inline-code" id="-1559139746#z1kih8c_140">express</span>, just like NPM, but PnPm will link the dependencies in an optimized way, saving disk space.</p></section><section><h4 id="-1559139746#advantages" data-toc="advantages#3-Node-Package-managers.md-advantages">Advantages:</h4><ul class="list" id="-1559139746#z1kih8c_141" start="1"><li class="list-item" id="-1559139746#z1kih8c_143"><p>Faster installation times in larger projects.</p></li><li class="list-item" id="-1559139746#z1kih8c_144"><p>Prevents projects from installing unnecessary duplicate dependencies.</p></li><li class="list-item" id="-1559139746#z1kih8c_145"><p>Strictness in dependency resolution ensures fewer conflicts.</p></li></ul></section><section><h4 id="-1559139746#d-yarn" data-toc="d-yarn#3-Node-Package-managers.md-d-yarn">d. Yarn</h4><p id="-1559139746#z1kih8c_146"><span class="control" id="-1559139746#z1kih8c_151">Yarn</span> is another package manager that was originally created by Facebook to address some performance and security concerns they found in NPM. Yarn improves on speed and consistency, offering a lockfile system and better offline support.</p><section><h5 id="-1559139746#key-features" data-toc="key-features#3-Node-Package-managers.md-key-features">Key Features:</h5><ul class="list" id="-1559139746#z1kih8c_152" start="1"><li class="list-item" id="-1559139746#z1kih8c_153"><p><span class="control" id="-1559139746#z1kih8c_157">Fast Installation</span>: Yarn caches every package it downloads, so it never needs to download the same package again.</p></li><li class="list-item" id="-1559139746#z1kih8c_154"><p><span class="control" id="-1559139746#z1kih8c_158">Lockfile for Consistency</span>: Yarn generates a <span class="inline-code" id="-1559139746#z1kih8c_159">yarn.lock</span> file to ensure that all developers working on a project install exactly the same package versions.</p></li><li class="list-item" id="-1559139746#z1kih8c_155"><p><span class="control" id="-1559139746#z1kih8c_160">Parallel Installations</span>: Yarn installs packages in parallel, which can significantly reduce installation times.</p></li><li class="list-item" id="-1559139746#z1kih8c_156"><p><span class="control" id="-1559139746#z1kih8c_161">Offline Mode</span>: Once a package is installed, it can be reinstalled without an internet connection, thanks to Yarn&rsquo;s caching system.</p></li></ul></section><section><h5 id="-1559139746#common-yarn-commands" data-toc="common-yarn-commands#3-Node-Package-managers.md-common-yarn-commands">Common Yarn Commands:</h5><ul class="list" id="-1559139746#z1kih8c_162" start="1"><li class="list-item" id="-1559139746#z1kih8c_163"><p id="-1559139746#z1kih8c_167">Install a package locally:</p><div class="detached code-block" id="-1559139746#z1kih8c_168"><pre><code class="language-bash">yarn add &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_164"><p id="-1559139746#z1kih8c_169">Install a package globally:</p><div class="detached code-block" id="-1559139746#z1kih8c_170"><pre><code class="language-bash">yarn global add &lt;package-name&gt;</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_165"><p id="-1559139746#z1kih8c_171">Add a development dependency:</p><div class="detached code-block" id="-1559139746#z1kih8c_172"><pre><code class="language-bash">yarn add &lt;package-name&gt; --dev</code></pre></div></li><li class="list-item" id="-1559139746#z1kih8c_166"><p id="-1559139746#z1kih8c_173">Install all dependencies listed in <span class="inline-code" id="-1559139746#z1kih8c_175">package.json</span>:</p><div class="detached code-block" id="-1559139746#z1kih8c_174"><pre><code class="language-bash">yarn install</code></pre></div></li></ul></section><section><h5 id="-1559139746#example" data-toc="example#3-Node-Package-managers.md-example">Example:</h5><div class="detached code-block" id="-1559139746#z1kih8c_176"><pre><code class="language-bash">yarn add express</code></pre></div><p id="-1559139746#z1kih8c_177">This command adds <span class="inline-code" id="-1559139746#z1kih8c_178">express</span> as a dependency to your project using Yarn.</p></section><section><h5 id="-1559139746#advantages" data-toc="advantages#3-Node-Package-managers.md-advantages">Advantages:</h5><ul class="list" id="-1559139746#z1kih8c_179" start="1"><li class="list-item" id="-1559139746#z1kih8c_181"><p><span class="control" id="-1559139746#z1kih8c_184">Faster</span> than NPM due to parallel package installation.</p></li><li class="list-item" id="-1559139746#z1kih8c_182"><p><span class="control" id="-1559139746#z1kih8c_185">Offline Mode</span> allows reinstallation of previously installed packages without an internet connection.</p></li><li class="list-item" id="-1559139746#z1kih8c_183"><p><span class="control" id="-1559139746#z1kih8c_186">Deterministic</span>: The <span class="inline-code" id="-1559139746#z1kih8c_187">yarn.lock</span> file ensures that every installation will result in the same file structure.</p></li></ul></section></section></section><section><h3 id="-1559139746#comparison" data-toc="comparison#3-Node-Package-managers.md-comparison">Comparison</h3><p id="-1559139746#z1kih8c_188"><span class="control" id="-1559139746#z1kih8c_193">Common Commands</span></p><div class="table-wrapper detached"><table id="-1559139746#z1kih8c_189"><tr class="header-row" id="-1559139746#z1kih8c_194"><th id="-1559139746#z1kih8c_205"><p><span class="control" id="-1559139746#z1kih8c_209">COMMAND</span></p></th><th id="-1559139746#z1kih8c_206"><p><span class="control" id="-1559139746#z1kih8c_210">NPM</span></p></th><th id="-1559139746#z1kih8c_207"><p><span class="control" id="-1559139746#z1kih8c_211">PNPM</span></p></th><th id="-1559139746#z1kih8c_208"><p><span class="control" id="-1559139746#z1kih8c_212">YARN</span></p></th></tr><tr class="" id="-1559139746#z1kih8c_195"><td id="-1559139746#z1kih8c_213"><p><span class="control" id="-1559139746#z1kih8c_217">init</span></p></td><td id="-1559139746#z1kih8c_214"><p><span class="inline-code" id="-1559139746#z1kih8c_218">npm init</span></p></td><td id="-1559139746#z1kih8c_215"><p><span class="inline-code" id="-1559139746#z1kih8c_219">pnpm init</span></p></td><td id="-1559139746#z1kih8c_216"><p><span class="inline-code" id="-1559139746#z1kih8c_220">yarn init</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_196"><td id="-1559139746#z1kih8c_221"><p><span class="control" id="-1559139746#z1kih8c_225">install from package.json</span></p></td><td id="-1559139746#z1kih8c_222"><p><span class="inline-code" id="-1559139746#z1kih8c_226">npm install</span></p></td><td id="-1559139746#z1kih8c_223"><p><span class="inline-code" id="-1559139746#z1kih8c_227">pnpm install</span></p></td><td id="-1559139746#z1kih8c_224"><p><span class="inline-code" id="-1559139746#z1kih8c_228">yarn</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_197"><td id="-1559139746#z1kih8c_229"><p><span class="control" id="-1559139746#z1kih8c_233">add package</span></p></td><td id="-1559139746#z1kih8c_230"><p><span class="inline-code" id="-1559139746#z1kih8c_234">npm install &lt;package&gt; [--location=global]</span></p></td><td id="-1559139746#z1kih8c_231"><p><span class="inline-code" id="-1559139746#z1kih8c_235">pnpm add &lt;package&gt; [--global]</span></p></td><td id="-1559139746#z1kih8c_232"><p><span class="inline-code" id="-1559139746#z1kih8c_236">yarn add &lt;package&gt;</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_198"><td id="-1559139746#z1kih8c_237"><p><span class="control" id="-1559139746#z1kih8c_241">add package as devDependencies</span></p></td><td id="-1559139746#z1kih8c_238"><p><span class="inline-code" id="-1559139746#z1kih8c_242">npm install &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#z1kih8c_239"><p><span class="inline-code" id="-1559139746#z1kih8c_243">pnpm add &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#z1kih8c_240"><p><span class="inline-code" id="-1559139746#z1kih8c_244">yarn add &lt;package&gt; --dev</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_199"><td id="-1559139746#z1kih8c_245"><p><span class="control" id="-1559139746#z1kih8c_249">remove package</span></p></td><td id="-1559139746#z1kih8c_246"><p><span class="inline-code" id="-1559139746#z1kih8c_250">npm uninstall &lt;package&gt; [--location=global]</span></p></td><td id="-1559139746#z1kih8c_247"><p><span class="inline-code" id="-1559139746#z1kih8c_251">pnpm uninstall &lt;package&gt; [--global]</span></p></td><td id="-1559139746#z1kih8c_248"><p><span class="inline-code" id="-1559139746#z1kih8c_252">yarn [global] remove &lt;package&gt;</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_200"><td id="-1559139746#z1kih8c_253"><p><span class="control" id="-1559139746#z1kih8c_257">remove package as devDependencies</span></p></td><td id="-1559139746#z1kih8c_254"><p><span class="inline-code" id="-1559139746#z1kih8c_258">npm uninstall &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#z1kih8c_255"><p><span class="inline-code" id="-1559139746#z1kih8c_259">pnpm uninstall &lt;package&gt; --save-dev</span></p></td><td id="-1559139746#z1kih8c_256"><p><span class="inline-code" id="-1559139746#z1kih8c_260">yarn remove &lt;package&gt; --dev</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_201"><td id="-1559139746#z1kih8c_261"><p><span class="control" id="-1559139746#z1kih8c_265">audit vulnerable dependencies</span></p></td><td id="-1559139746#z1kih8c_262"><p><span class="inline-code" id="-1559139746#z1kih8c_266">npm list --depth 0 [--location=global]</span></p></td><td id="-1559139746#z1kih8c_263"><p><span class="inline-code" id="-1559139746#z1kih8c_267">pnpm list --depth 0 [--global]</span></p></td><td id="-1559139746#z1kih8c_264"><p><span class="inline-code" id="-1559139746#z1kih8c_268">yarn [global] list --depth 0</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_202"><td id="-1559139746#z1kih8c_269"><p><span class="control" id="-1559139746#z1kih8c_273">Run</span></p></td><td id="-1559139746#z1kih8c_270"><p><span class="inline-code" id="-1559139746#z1kih8c_274">npm run &lt;script-name&gt;</span></p></td><td id="-1559139746#z1kih8c_271"><p><span class="inline-code" id="-1559139746#z1kih8c_275">pnpm run &lt;script-name&gt;</span></p></td><td id="-1559139746#z1kih8c_272"><p><span class="inline-code" id="-1559139746#z1kih8c_276">yarn run &lt;script-name&gt;</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_203"><td id="-1559139746#z1kih8c_277"><p><span class="control" id="-1559139746#z1kih8c_281">build</span></p></td><td id="-1559139746#z1kih8c_278"><p><span class="inline-code" id="-1559139746#z1kih8c_282">npm build</span></p></td><td id="-1559139746#z1kih8c_279"><p><span class="inline-code" id="-1559139746#z1kih8c_283">pnpm build</span></p></td><td id="-1559139746#z1kih8c_280"><p><span class="inline-code" id="-1559139746#z1kih8c_284">yarn build</span></p></td></tr><tr class="" id="-1559139746#z1kih8c_204"><td id="-1559139746#z1kih8c_285"><p><span class="control" id="-1559139746#z1kih8c_289">test</span></p></td><td id="-1559139746#z1kih8c_286"><p><span class="inline-code" id="-1559139746#z1kih8c_290">npm test</span></p></td><td id="-1559139746#z1kih8c_287"><p><span class="inline-code" id="-1559139746#z1kih8c_291">pnpm test</span></p></td><td id="-1559139746#z1kih8c_288"><p><span class="inline-code" id="-1559139746#z1kih8c_292">yarn test</span></p></td></tr></table></div><p id="-1559139746#z1kih8c_190"><span class="control" id="-1559139746#z1kih8c_293">Features</span></p><div class="table-wrapper detached"><table id="-1559139746#z1kih8c_191"><tr class="header-row" id="-1559139746#z1kih8c_294"><th id="-1559139746#z1kih8c_300"><p>Feature</p></th><th id="-1559139746#z1kih8c_301"><p>NPM</p></th><th id="-1559139746#z1kih8c_302"><p>PnPm</p></th><th id="-1559139746#z1kih8c_303"><p>Yarn</p></th></tr><tr class="" id="-1559139746#z1kih8c_295"><td id="-1559139746#z1kih8c_304"><p><span class="control" id="-1559139746#z1kih8c_308">Speed</span></p></td><td id="-1559139746#z1kih8c_305"><p>Standard</p></td><td id="-1559139746#z1kih8c_306"><p>Very fast</p></td><td id="-1559139746#z1kih8c_307"><p>Fast</p></td></tr><tr class="" id="-1559139746#z1kih8c_296"><td id="-1559139746#z1kih8c_309"><p><span class="control" id="-1559139746#z1kih8c_313">Disk Usage</span></p></td><td id="-1559139746#z1kih8c_310"><p>Can be heavy on disk space</p></td><td id="-1559139746#z1kih8c_311"><p>Optimized with central storage</p></td><td id="-1559139746#z1kih8c_312"><p>Efficient with caching</p></td></tr><tr class="" id="-1559139746#z1kih8c_297"><td id="-1559139746#z1kih8c_314"><p><span class="control" id="-1559139746#z1kih8c_318">Offline Mode</span></p></td><td id="-1559139746#z1kih8c_315"><p>Limited</p></td><td id="-1559139746#z1kih8c_316"><p>No, but faster for cached files</p></td><td id="-1559139746#z1kih8c_317"><p>Yes</p></td></tr><tr class="" id="-1559139746#z1kih8c_298"><td id="-1559139746#z1kih8c_319"><p><span class="control" id="-1559139746#z1kih8c_323">Dependency Tree</span></p></td><td id="-1559139746#z1kih8c_320"><p>Standard</p></td><td id="-1559139746#z1kih8c_321"><p>Strict</p></td><td id="-1559139746#z1kih8c_322"><p>Flexible but with lockfiles</p></td></tr><tr class="" id="-1559139746#z1kih8c_299"><td id="-1559139746#z1kih8c_324"><p><span class="control" id="-1559139746#z1kih8c_328">Parallel Installs</span></p></td><td id="-1559139746#z1kih8c_325"><p>No</p></td><td id="-1559139746#z1kih8c_326"><p>Yes</p></td><td id="-1559139746#z1kih8c_327"><p>Yes</p></td></tr></table></div><p id="-1559139746#z1kih8c_192">In conclusion, NPM, PnPm, and Yarn all have their strengths and weaknesses, and your choice of package manager depends on your specific needs. <span class="control" id="-1559139746#z1kih8c_329">NPM</span> is the default and easiest to use, <span class="control" id="-1559139746#z1kih8c_330">PnPm</span> optimizes disk space and speed for large projects, and <span class="control" id="-1559139746#z1kih8c_331">Yarn</span> offers performance improvements and more deterministic installs.</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1175139288">3.1 PnPm Cheatsheet</h1><p id="-1175139288#o15a9e_3">Here's a cheat sheet for using PNPM to perform common tasks. PNPM is a fast and efficient package manager for Node.js projects, and this guide will help you get started with some of the most frequently used commands.</p><section><h2 id="-1175139288#1-initialization" data-toc="1-initialization#3-1-PnPm-Cheatsheet.md-1-initialization">1. Initialization</h2><ul class="list" id="-1175139288#o15a9e_15" start="1"><li class="list-item" id="-1175139288#o15a9e_17"><p id="-1175139288#o15a9e_18"><span class="control" id="-1175139288#o15a9e_20">Initialize a new project (create <span class="inline-code" id="-1175139288#o15a9e_21">package.json</span>):</span></p><div class="detached code-block" id="-1175139288#o15a9e_19"><pre><code class="language-bash">pnpm init</code></pre></div></li></ul></section><section><h2 id="-1175139288#2-installing-packages" data-toc="2-installing-packages#3-1-PnPm-Cheatsheet.md-2-installing-packages">2. Installing Packages</h2><ul class="list" id="-1175139288#o15a9e_23" start="1"><li class="list-item" id="-1175139288#o15a9e_25"><p id="-1175139288#o15a9e_30"><span class="control" id="-1175139288#o15a9e_32">Install all dependencies listed in <span class="inline-code" id="-1175139288#o15a9e_33">package.json</span>:</span></p><div class="detached code-block" id="-1175139288#o15a9e_31"><pre><code class="language-bash">pnpm install</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_26"><p id="-1175139288#o15a9e_34"><span class="control" id="-1175139288#o15a9e_36">Install a specific package (e.g., <span class="inline-code" id="-1175139288#o15a9e_37">lodash</span>):</span></p><div class="detached code-block" id="-1175139288#o15a9e_35"><pre><code class="language-bash">pnpm add lodash</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_27"><p id="-1175139288#o15a9e_38"><span class="control" id="-1175139288#o15a9e_42">Install a package as a development dependency:</span></p><div class="detached code-block" id="-1175139288#o15a9e_39"><pre><code class="language-bash">pnpm add eslint --save-dev</code></pre></div><p id="-1175139288#o15a9e_40">or</p><div class="detached code-block" id="-1175139288#o15a9e_41"><pre><code class="language-bash">pnpm add -D eslint</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_28"><p id="-1175139288#o15a9e_43"><span class="control" id="-1175139288#o15a9e_45">Install a specific version of a package:</span></p><div class="detached code-block" id="-1175139288#o15a9e_44"><pre><code class="language-bash">pnpm add lodash@4.17.20</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_29"><p id="-1175139288#o15a9e_46"><span class="control" id="-1175139288#o15a9e_48">Install dependencies without modifying <span class="inline-code" id="-1175139288#o15a9e_49">package.json</span> (useful for CI/CD):</span></p><div class="detached code-block" id="-1175139288#o15a9e_47"><pre><code class="language-bash">pnpm install --frozen-lockfile</code></pre></div></li></ul></section><section><h2 id="-1175139288#3-removing-packages" data-toc="3-removing-packages#3-1-PnPm-Cheatsheet.md-3-removing-packages">3. Removing Packages</h2><ul class="list" id="-1175139288#o15a9e_51" start="1"><li class="list-item" id="-1175139288#o15a9e_53"><p id="-1175139288#o15a9e_54"><span class="control" id="-1175139288#o15a9e_56">Uninstall a package:</span></p><div class="detached code-block" id="-1175139288#o15a9e_55"><pre><code class="language-bash">pnpm remove lodash</code></pre></div></li></ul></section><section><h2 id="-1175139288#4-running-scripts" data-toc="4-running-scripts#3-1-PnPm-Cheatsheet.md-4-running-scripts">4. Running Scripts</h2><ul class="list" id="-1175139288#o15a9e_58" start="1"><li class="list-item" id="-1175139288#o15a9e_60"><p id="-1175139288#o15a9e_62"><span class="control" id="-1175139288#o15a9e_66">Run a script defined in <span class="inline-code" id="-1175139288#o15a9e_67">package.json</span>:</span></p><div class="detached code-block" id="-1175139288#o15a9e_63"><pre><code class="language-bash">pnpm run &lt;script_name&gt;</code></pre></div><p id="-1175139288#o15a9e_64">Example:</p><div class="detached code-block" id="-1175139288#o15a9e_65"><pre><code class="language-bash">pnpm run build</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_61"><p id="-1175139288#o15a9e_68"><span class="control" id="-1175139288#o15a9e_72">Run a package binary without installing it globally:</span></p><div class="detached code-block" id="-1175139288#o15a9e_69"><pre><code class="language-bash">pnpm dlx &lt;package_name&gt;</code></pre></div><p id="-1175139288#o15a9e_70">Example:</p><div class="detached code-block" id="-1175139288#o15a9e_71"><pre><code class="language-bash">pnpm dlx create-react-app my-app</code></pre></div></li></ul></section><section><h2 id="-1175139288#5-working-with-global-packages" data-toc="5-working-with-global-packages#3-1-PnPm-Cheatsheet.md-5-working-with-global-packages">5. Working with Global Packages</h2><ul class="list" id="-1175139288#o15a9e_74" start="1"><li class="list-item" id="-1175139288#o15a9e_76"><p id="-1175139288#o15a9e_78"><span class="control" id="-1175139288#o15a9e_80">Install a package globally:</span></p><div class="detached code-block" id="-1175139288#o15a9e_79"><pre><code class="language-bash">pnpm add -g eslint</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_77"><p id="-1175139288#o15a9e_81"><span class="control" id="-1175139288#o15a9e_83">List globally installed packages:</span></p><div class="detached code-block" id="-1175139288#o15a9e_82"><pre><code class="language-bash">pnpm list -g --depth 0</code></pre></div></li></ul></section><section><h2 id="-1175139288#6-managing-dependencies" data-toc="6-managing-dependencies#3-1-PnPm-Cheatsheet.md-6-managing-dependencies">6. Managing Dependencies</h2><ul class="list" id="-1175139288#o15a9e_85" start="1"><li class="list-item" id="-1175139288#o15a9e_87"><p id="-1175139288#o15a9e_89"><span class="control" id="-1175139288#o15a9e_91">Update all dependencies to the latest versions:</span></p><div class="detached code-block" id="-1175139288#o15a9e_90"><pre><code class="language-bash">pnpm update --latest</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_88"><p id="-1175139288#o15a9e_92"><span class="control" id="-1175139288#o15a9e_94">Install dependencies without running <span class="inline-code" id="-1175139288#o15a9e_95">preinstall</span> and <span class="inline-code" id="-1175139288#o15a9e_96">postinstall</span> scripts:</span></p><div class="detached code-block" id="-1175139288#o15a9e_93"><pre><code class="language-bash">pnpm install --ignore-scripts</code></pre></div></li></ul></section><section><h2 id="-1175139288#7-managing-the-pnpm-cache" data-toc="7-managing-the-pnpm-cache#3-1-PnPm-Cheatsheet.md-7-managing-the-pnpm-cache">7. Managing the PNPM Cache</h2><ul class="list" id="-1175139288#o15a9e_98" start="1"><li class="list-item" id="-1175139288#o15a9e_100"><p id="-1175139288#o15a9e_101"><span class="control" id="-1175139288#o15a9e_103">Clear the PNPM cache:</span></p><div class="detached code-block" id="-1175139288#o15a9e_102"><pre><code class="language-bash">pnpm cache clean</code></pre></div></li></ul></section><section><h2 id="-1175139288#8-workspaces" data-toc="8-workspaces#3-1-PnPm-Cheatsheet.md-8-workspaces">8. Workspaces</h2><ul class="list" id="-1175139288#o15a9e_105" start="1"><li class="list-item" id="-1175139288#o15a9e_107"><p id="-1175139288#o15a9e_110"><span class="control" id="-1175139288#o15a9e_112">Create a new workspace:</span></p><div class="detached code-block" id="-1175139288#o15a9e_111"><pre><code class="language-bash">pnpm init</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_108"><p id="-1175139288#o15a9e_113"><span class="control" id="-1175139288#o15a9e_115">Add a package to a workspace:</span></p><div class="detached code-block" id="-1175139288#o15a9e_114"><pre><code class="language-bash">pnpm add &lt;package_name&gt; -w</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_109"><p id="-1175139288#o15a9e_116"><span class="control" id="-1175139288#o15a9e_120">Run a command in all workspace packages:</span></p><div class="detached code-block" id="-1175139288#o15a9e_117"><pre><code class="language-bash">pnpm -r &lt;command&gt;</code></pre></div><p id="-1175139288#o15a9e_118">Example:</p><div class="detached code-block" id="-1175139288#o15a9e_119"><pre><code class="language-bash">pnpm -r build</code></pre></div></li></ul></section><section><h2 id="-1175139288#9-linking-packages" data-toc="9-linking-packages#3-1-PnPm-Cheatsheet.md-9-linking-packages">9. Linking Packages</h2><ul class="list" id="-1175139288#o15a9e_122" start="1"><li class="list-item" id="-1175139288#o15a9e_124"><p id="-1175139288#o15a9e_126"><span class="control" id="-1175139288#o15a9e_128">Link a package globally:</span></p><div class="detached code-block" id="-1175139288#o15a9e_127"><pre><code class="language-bash">pnpm link</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_125"><p id="-1175139288#o15a9e_129"><span class="control" id="-1175139288#o15a9e_131">Link a package locally within a project:</span></p><div class="detached code-block" id="-1175139288#o15a9e_130"><pre><code class="language-bash">pnpm link &lt;package_name&gt;</code></pre></div></li></ul></section><section><h2 id="-1175139288#10-miscellaneous" data-toc="10-miscellaneous#3-1-PnPm-Cheatsheet.md-10-miscellaneous">10. Miscellaneous</h2><ul class="list" id="-1175139288#o15a9e_133" start="1"><li class="list-item" id="-1175139288#o15a9e_135"><p id="-1175139288#o15a9e_137"><span class="control" id="-1175139288#o15a9e_139">Check for outdated packages:</span></p><div class="detached code-block" id="-1175139288#o15a9e_138"><pre><code class="language-bash">pnpm outdated</code></pre></div></li><li class="list-item" id="-1175139288#o15a9e_136"><p id="-1175139288#o15a9e_140"><span class="control" id="-1175139288#o15a9e_142">List all installed packages:</span></p><div class="detached code-block" id="-1175139288#o15a9e_141"><pre><code class="language-bash">pnpm list</code></pre></div></li></ul></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-2011891282">4. Typescript Configuration</h1><section><h2 id="-2011891282#typescript-configuration-for-a-node-js-app-with-tsx" data-toc="typescript-configuration-for-a-node-js-app-with-tsx#Typescript-Configuration.md-typescript-configuration-for-a-node-js-app-with-tsx">TypeScript Configuration for a Node.js App with tsx</h2><p id="-2011891282#z9n4736_13">To configure TypeScript in a Node.js project, and add <span class="inline-code" id="-2011891282#z9n4736_15">tsx</span> (a tool that allows running TypeScript files without needing to transpile manually), we need to make sure the project has the appropriate dependencies and configurations in place. Additionally, we'll create scripts for starting, developing, and building the app.</p></section><section><h2 id="-2011891282#1-setting-up-the-node-js-app" data-toc="1-setting-up-the-node-js-app#Typescript-Configuration.md-1-setting-up-the-node-js-app">1. Setting Up the Node.js App</h2><p id="-2011891282#z9n4736_16">Start by initializing a new Node.js project if you haven't done so already:</p><div class="detached code-block" id="-2011891282#z9n4736_17"><pre><code class="language-bash">mkdir my-node-app
cd my-node-app
npm init -y</code></pre></div></section><section><h2 id="-2011891282#2-installing-dependencies" data-toc="2-installing-dependencies#Typescript-Configuration.md-2-installing-dependencies">2. Installing Dependencies</h2><p id="-2011891282#z9n4736_18">Next, you'll need to install TypeScript, <span class="inline-code" id="-2011891282#z9n4736_21">tsx</span>, and types for Node.js:</p><div class="detached code-block" id="-2011891282#z9n4736_19"><pre><code class="language-bash">npm install typescript tsx @types/node --save-dev</code></pre></div><ul class="list" id="-2011891282#z9n4736_20" start="1"><li class="list-item" id="-2011891282#z9n4736_22"><p><span class="control" id="-2011891282#z9n4736_25">typescript</span>: The TypeScript compiler (to compile <span class="inline-code" id="-2011891282#z9n4736_26">.ts</span> files to JavaScript).</p></li><li class="list-item" id="-2011891282#z9n4736_23"><p><span class="control" id="-2011891282#z9n4736_27">tsx</span>: A package that allows you to run TypeScript and JSX (React) files directly without needing to compile.</p></li><li class="list-item" id="-2011891282#z9n4736_24"><p><span class="control" id="-2011891282#z9n4736_28">@types/node</span>: Provides TypeScript definitions for Node.js modules (like <span class="inline-code" id="-2011891282#z9n4736_29">http</span>, <span class="inline-code" id="-2011891282#z9n4736_30">fs</span>, etc.).</p></li></ul></section><section><h2 id="-2011891282#3-creating-the-tsconfig-json" data-toc="3-creating-the-tsconfig-json#Typescript-Configuration.md-3-creating-the-tsconfig-json">3. Creating the tsconfig.json</h2><p id="-2011891282#z9n4736_32">TypeScript requires a <span class="inline-code" id="-2011891282#z9n4736_38">tsconfig.json</span> file for configuration. This file tells the TypeScript compiler how to transpile the <span class="inline-code" id="-2011891282#z9n4736_39">.ts</span> files. You can create it by running the following command:</p><div class="detached code-block" id="-2011891282#z9n4736_33"><pre><code class="language-bash">npx tsc --init</code></pre></div><p id="-2011891282#z9n4736_34">Then, modify the <span class="inline-code" id="-2011891282#z9n4736_40">tsconfig.json</span> file to suit a typical Node.js environment:</p><p id="-2011891282#z9n4736_35"><span class="control" id="-2011891282#z9n4736_41"><span class="inline-code" id="-2011891282#z9n4736_42">tsconfig.json</span></span>:</p><div class="detached code-block" id="-2011891282#z9n4736_36"><pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES6&quot;,                     // Target ES6 or later to support modern JavaScript features
    &quot;module&quot;: &quot;CommonJS&quot;,                 // Use CommonJS modules for Node.js
    &quot;rootDir&quot;: &quot;./src&quot;,                   // Source files location
    &quot;outDir&quot;: &quot;./dist&quot;,                   // Output directory for compiled files
    &quot;esModuleInterop&quot;: true,              // Enables support for `import` in CommonJS
    &quot;strict&quot;: true,                       // Enables strict type-checking options
    &quot;skipLibCheck&quot;: true,                 // Skips type checking of declaration files
    &quot;moduleResolution&quot;: &quot;node&quot;,           // For resolving node modules
    &quot;resolveJsonModule&quot;: true,            // Enable importing `.json` files
    &quot;allowSyntheticDefaultImports&quot;: true, // Allow default imports from modules
    &quot;forceConsistentCasingInFileNames&quot;: true // Ensure consistent casing in file names
  },
  &quot;include&quot;: [&quot;src/**/*.ts&quot;],             // Include all TypeScript files in the `src` folder
  &quot;exclude&quot;: [&quot;node_modules&quot;]             // Exclude `node_modules`
}</code></pre></div></section><section><h2 id="-2011891282#4-project-structure" data-toc="4-project-structure#Typescript-Configuration.md-4-project-structure">4. Project Structure</h2><p id="-2011891282#z9n4736_43">Here's an example of how your project structure should look:</p><div class="detached code-block" id="-2011891282#z9n4736_44"><pre><code class="language-none">/my-node-app
  ├── /src
  │     ├── index.ts
  ├── /dist                  # Will be generated after build
  ├── package.json
  ├── tsconfig.json
  └── node_modules</code></pre></div></section><section><h2 id="-2011891282#5-creating-scripts-for-start-dev-and-build" data-toc="5-creating-scripts-for-start-dev-and-build#Typescript-Configuration.md-5-creating-scripts-for-start-dev-and-build">5. Creating Scripts for Start, Dev, and Build</h2><p id="-2011891282#z9n4736_45">Next, let's modify the <span class="inline-code" id="-2011891282#z9n4736_49">package.json</span> file to include scripts for starting, developing, and building the app:</p><p id="-2011891282#z9n4736_46"><span class="control" id="-2011891282#z9n4736_50"><span class="inline-code" id="-2011891282#z9n4736_51">package.json</span></span>:</p><div class="detached code-block" id="-2011891282#z9n4736_47"><pre><code class="language-json">{
  &quot;name&quot;: &quot;my-node-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;main&quot;: &quot;dist/index.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node dist/index.js&quot;,              // Start the compiled JavaScript code
    &quot;dev&quot;: &quot;tsx watch src/index.ts&quot;,            // Start the app in development mode with hot-reloading
    &quot;build&quot;: &quot;tsc&quot;                              // Compile TypeScript files to JavaScript
  },
  &quot;devDependencies&quot;: {
    &quot;@types/node&quot;: &quot;^18.0.0&quot;,
    &quot;tsx&quot;: &quot;^3.12.7&quot;,
    &quot;typescript&quot;: &quot;^4.4.3&quot;
  }
}</code></pre></div><section><h3 id="-2011891282#explanation-of-the-scripts" data-toc="explanation-of-the-scripts#Typescript-Configuration.md-explanation-of-the-scripts">Explanation of the scripts:</h3><ul class="list" id="-2011891282#z9n4736_52" start="1"><li class="list-item" id="-2011891282#z9n4736_53"><p id="-2011891282#z9n4736_56"><span class="control" id="-2011891282#z9n4736_57"><span class="inline-code" id="-2011891282#z9n4736_60">start</span></span>: This runs the app using <span class="inline-code" id="-2011891282#z9n4736_58">node</span> after the TypeScript files have been compiled to JavaScript (found in the <span class="inline-code" id="-2011891282#z9n4736_59">dist</span> directory).</p></li><li class="list-item" id="-2011891282#z9n4736_54"><p id="-2011891282#z9n4736_61"><span class="control" id="-2011891282#z9n4736_62"><span class="inline-code" id="-2011891282#z9n4736_65">dev</span></span>: This runs the app directly with <span class="inline-code" id="-2011891282#z9n4736_63">tsx</span>, allowing you to start the TypeScript app in development mode without needing to compile first. <span class="inline-code" id="-2011891282#z9n4736_64">tsx watch</span> enables hot-reloading so that the server automatically reloads whenever you make changes.</p></li><li class="list-item" id="-2011891282#z9n4736_55"><p id="-2011891282#z9n4736_66"><span class="control" id="-2011891282#z9n4736_67"><span class="inline-code" id="-2011891282#z9n4736_71">build</span></span>: This runs the TypeScript compiler (<span class="inline-code" id="-2011891282#z9n4736_68">tsc</span>), which compiles the TypeScript files from the <span class="inline-code" id="-2011891282#z9n4736_69">src</span> directory into JavaScript in the <span class="inline-code" id="-2011891282#z9n4736_70">dist</span> directory.</p></li></ul></section></section><section><h2 id="-2011891282#6-example-typescript-file" data-toc="6-example-typescript-file#Typescript-Configuration.md-6-example-typescript-file">6. Example TypeScript File</h2><p id="-2011891282#z9n4736_72">Now, let's create a simple <span class="inline-code" id="-2011891282#z9n4736_75">index.ts</span> file in the <span class="inline-code" id="-2011891282#z9n4736_76">src</span> folder to demonstrate the setup:</p><p id="-2011891282#z9n4736_73"><span class="control" id="-2011891282#z9n4736_77"><span class="inline-code" id="-2011891282#z9n4736_78">src/index.ts</span></span>:</p><div class="detached code-block" id="-2011891282#z9n4736_74"><pre><code class="language-javascript">import http from 'http';

const hostname = 'localhost';
const port = 3000;

const server = http.createServer((req, res) =&gt; {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello, TypeScript with Node.js!\n');
});

server.listen(port, hostname, () =&gt; {
  console.log(`Server running at http://${hostname}:${port}/`);
});</code></pre></div></section><section><h2 id="-2011891282#7-running-the-app" data-toc="7-running-the-app#Typescript-Configuration.md-7-running-the-app">7. Running the App</h2><section><h3 id="-2011891282#development-mode" data-toc="development-mode#Typescript-Configuration.md-development-mode">Development Mode:</h3><p id="-2011891282#z9n4736_81">To run the app in development mode with hot-reloading (using <span class="inline-code" id="-2011891282#z9n4736_84">tsx</span>), run:</p><div class="detached code-block" id="-2011891282#z9n4736_82"><pre><code class="language-bash">npm run dev</code></pre></div><p id="-2011891282#z9n4736_83">This will start the server, and any changes made to your TypeScript files will automatically restart the server.</p></section><section><h3 id="-2011891282#build-and-start" data-toc="build-and-start#Typescript-Configuration.md-build-and-start">Build and Start:</h3><p id="-2011891282#z9n4736_85">To compile your TypeScript code to JavaScript and then run the app:</p><ol class="list list-decimal" id="-2011891282#z9n4736_86" type="1" start="1"><li class="list-item" id="-2011891282#z9n4736_88"><p id="-2011891282#z9n4736_90">First, build the app:</p><div class="detached code-block" id="-2011891282#z9n4736_91"><pre><code class="language-bash">npm run build</code></pre></div><p id="-2011891282#z9n4736_92">This will transpile the TypeScript files and output them to the <span class="inline-code" id="-2011891282#z9n4736_93">dist</span> directory.</p></li><li class="list-item" id="-2011891282#z9n4736_89"><p id="-2011891282#z9n4736_94">Then, run the app:</p><div class="detached code-block" id="-2011891282#z9n4736_95"><pre><code class="language-bash">npm start</code></pre></div></li></ol><p id="-2011891282#z9n4736_87">This will execute the compiled JavaScript files in the <span class="inline-code" id="-2011891282#z9n4736_96">dist</span> directory.</p></section></section><section><h2 id="-2011891282#summary" data-toc="summary#Typescript-Configuration.md-summary">Summary</h2><ol class="list list-decimal" id="-2011891282#z9n4736_97" type="1" start="1"><li class="list-item" id="-2011891282#z9n4736_99"><p><span class="control" id="-2011891282#z9n4736_103">Install Dependencies</span>: Install <span class="inline-code" id="-2011891282#z9n4736_104">typescript</span>, <span class="inline-code" id="-2011891282#z9n4736_105">tsx</span>, and <span class="inline-code" id="-2011891282#z9n4736_106">@types/node</span> to set up TypeScript and run TypeScript files in Node.js without manual compilation.</p></li><li class="list-item" id="-2011891282#z9n4736_100"><p><span class="control" id="-2011891282#z9n4736_107"><span class="inline-code" id="-2011891282#z9n4736_110">tsconfig.json</span></span>: Configure TypeScript settings for a Node.js project with <span class="inline-code" id="-2011891282#z9n4736_108">&quot;module&quot;: &quot;CommonJS&quot;</span> and <span class="inline-code" id="-2011891282#z9n4736_109">&quot;target&quot;: &quot;ES6&quot;</span>.</p></li><li class="list-item" id="-2011891282#z9n4736_101"><p><span class="control" id="-2011891282#z9n4736_111">Scripts</span>: </p><ul class="list" id="-2011891282#z9n4736_112" start="1"><li class="list-item" id="-2011891282#z9n4736_113"><p><span class="inline-code" id="-2011891282#z9n4736_116">start</span>: Runs the compiled app using <span class="inline-code" id="-2011891282#z9n4736_117">node</span>.</p></li><li class="list-item" id="-2011891282#z9n4736_114"><p><span class="inline-code" id="-2011891282#z9n4736_118">dev</span>: Runs the app directly in TypeScript with <span class="inline-code" id="-2011891282#z9n4736_119">tsx</span> in watch mode.</p></li><li class="list-item" id="-2011891282#z9n4736_115"><p><span class="inline-code" id="-2011891282#z9n4736_120">build</span>: Compiles TypeScript files to JavaScript.</p></li></ul></li><li class="list-item" id="-2011891282#z9n4736_102"><p><span class="control" id="-2011891282#z9n4736_121">Project Structure</span>: Keep TypeScript source files in a <span class="inline-code" id="-2011891282#z9n4736_122">src</span> directory and output compiled files into a <span class="inline-code" id="-2011891282#z9n4736_123">dist</span> directory.</p></li></ol><p id="-2011891282#z9n4736_98">This setup provides an efficient workflow for TypeScript development in a Node.js environment, leveraging <span class="inline-code" id="-2011891282#z9n4736_124">tsx</span> for development and <span class="inline-code" id="-2011891282#z9n4736_125">tsc</span> for building production-ready code.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="215822030">5. Modules</h1><p id="215822030#-vtu2no_3">Here&rsquo;s the updated version of the <span class="control" id="215822030#-vtu2no_12">Modules</span> documentation that uses <span class="control" id="215822030#-vtu2no_13">TypeScript</span> to illustrate how to work with modules in both <span class="control" id="215822030#-vtu2no_14">CommonJS</span> and <span class="control" id="215822030#-vtu2no_15">ES6</span> formats.</p><p id="215822030#-vtu2no_5">Node.js supports two module systems: <span class="control" id="215822030#-vtu2no_16">CommonJS</span> (the original module system used by Node.js) and <span class="control" id="215822030#-vtu2no_17">ES6 Modules</span> (the standardized modern module system). This document illustrates how to use modules in <span class="control" id="215822030#-vtu2no_18">TypeScript</span>, with examples for both module systems.</p><section><h2 id="215822030#what-is-a-module-in-node-js" data-toc="what-is-a-module-in-node-js#4-Modules.md-what-is-a-module-in-node-js">What is a Module in Node.js?</h2><p id="215822030#-vtu2no_19">A <span class="control" id="215822030#-vtu2no_23">module</span> in Node.js is a reusable block of code that can be imported into other parts of your application. Modules can contain functions, objects, or entire classes that are encapsulated for reuse across multiple files.</p><p id="215822030#-vtu2no_20">Key points:</p><ul class="list" id="215822030#-vtu2no_21" start="1"><li class="list-item" id="215822030#-vtu2no_24"><p><span class="control" id="215822030#-vtu2no_27">CommonJS</span>: The traditional module system for Node.js.</p></li><li class="list-item" id="215822030#-vtu2no_25"><p><span class="control" id="215822030#-vtu2no_28">ES6 Modules</span>: A modern, standardized JavaScript module system.</p></li><li class="list-item" id="215822030#-vtu2no_26"><p><span class="control" id="215822030#-vtu2no_29">TypeScript</span>: TypeScript adds static typing to JavaScript, enhancing modules with strong types.</p></li></ul></section><section><h2 id="215822030#built-in-modules" data-toc="built-in-modules#4-Modules.md-built-in-modules">Built-in Modules</h2><p id="215822030#-vtu2no_30">Node.js provides built-in modules that offer useful utilities such as working with files, creating HTTP servers, handling paths, and more. You can include and use these modules directly in TypeScript.</p><p id="215822030#-vtu2no_31">Here&rsquo;s how you can use built-in modules in TypeScript:</p><div class="detached code-block" id="215822030#-vtu2no_32"><pre><code class="language-javascript">import * as http from 'http';
import * as fs from 'fs';

const server = http.createServer((req, res) =&gt; {
  fs.readFile('index.html', (err, data) =&gt; {
    if (err) {
      res.writeHead(404, { 'Content-Type': 'text/plain' });
      res.end('File Not Found');
    } else {
      res.writeHead(200, { 'Content-Type': 'text/html' });
      res.end(data);
    }
  });
});

server.listen(8080, () =&gt; {
  console.log('Server running at http://localhost:8080/');
});</code></pre></div></section><section><h2 id="215822030#include-modules" data-toc="include-modules#4-Modules.md-include-modules">Include Modules</h2><p id="215822030#-vtu2no_34">TypeScript supports both CommonJS and ES6 module systems. Here&rsquo;s how to include modules in each system.</p><section><h3 id="215822030#1-commonjs-syntax-in-typescript" data-toc="1-commonjs-syntax-in-typescript#4-Modules.md-1-commonjs-syntax-in-typescript">1. CommonJS Syntax in TypeScript</h3><p id="215822030#-vtu2no_37">You can use <span class="inline-code" id="215822030#-vtu2no_39">require()</span> to import modules in a <span class="control" id="215822030#-vtu2no_40">CommonJS</span> format:</p><div class="detached code-block" id="215822030#-vtu2no_38"><pre><code class="language-javascript">const http = require('http');  // CommonJS syntax</code></pre></div></section><section><h3 id="215822030#2-es6-module-syntax-in-typescript" data-toc="2-es6-module-syntax-in-typescript#4-Modules.md-2-es6-module-syntax-in-typescript">2. ES6 Module Syntax in TypeScript</h3><p id="215822030#-vtu2no_41">You can use <span class="inline-code" id="215822030#-vtu2no_45">import</span> in TypeScript to leverage <span class="control" id="215822030#-vtu2no_46">ES6 Modules</span>:</p><div class="detached code-block" id="215822030#-vtu2no_42"><pre><code class="language-javascript">import * as http from 'http';  // ES6 module syntax</code></pre></div><p id="215822030#-vtu2no_43">TypeScript automatically understands the syntax and compiles it into appropriate module systems based on your configuration.</p></section></section><section><h2 id="215822030#create-your-own-modules" data-toc="create-your-own-modules#4-Modules.md-create-your-own-modules">Create Your Own Modules</h2><p id="215822030#-vtu2no_47">In TypeScript, you can create custom modules in both <span class="control" id="215822030#-vtu2no_50">CommonJS</span> and <span class="control" id="215822030#-vtu2no_51">ES6</span> formats. When using TypeScript, you&rsquo;ll also benefit from static typing and type definitions for better clarity and error-checking.</p><section><h3 id="215822030#1-create-a-commonjs-module-in-typescript" data-toc="1-create-a-commonjs-module-in-typescript#4-Modules.md-1-create-a-commonjs-module-in-typescript">1. Create a CommonJS Module in TypeScript</h3><p id="215822030#-vtu2no_52">In <span class="control" id="215822030#-vtu2no_54">CommonJS</span>, you define and export functions or objects using <span class="inline-code" id="215822030#-vtu2no_55">module.exports</span>. TypeScript supports this syntax and compiles it accordingly.</p><section><h4 id="215822030#example-commonjs-module-in-typescript" data-toc="example-commonjs-module-in-typescript#4-Modules.md-example-commonjs-module-in-typescript">Example: CommonJS Module in TypeScript</h4><p id="215822030#-vtu2no_56"><span class="control" id="215822030#-vtu2no_59">mathOperations.ts</span>:</p><div class="detached code-block" id="215822030#-vtu2no_57"><pre><code class="language-javascript">function add(a: number, b: number): number {
  return a + b;
}

function subtract(a: number, b: number): number {
  return a - b;
}

module.exports = {
  add,
  subtract
};</code></pre></div><p id="215822030#-vtu2no_58">In this example, the <span class="inline-code" id="215822030#-vtu2no_60">add</span> and <span class="inline-code" id="215822030#-vtu2no_61">subtract</span> functions are defined and exported using <span class="inline-code" id="215822030#-vtu2no_62">module.exports</span>. You can include these functions in other files using <span class="inline-code" id="215822030#-vtu2no_63">require()</span>.</p></section></section><section><h3 id="215822030#2-create-an-es6-module-in-typescript" data-toc="2-create-an-es6-module-in-typescript#4-Modules.md-2-create-an-es6-module-in-typescript">2. Create an ES6 Module in TypeScript</h3><p id="215822030#-vtu2no_64">With <span class="control" id="215822030#-vtu2no_66">ES6 modules</span>, TypeScript allows you to use the <span class="inline-code" id="215822030#-vtu2no_67">export</span> keyword to export functionality. This is more modern and aligns with JavaScript&rsquo;s ES6 standards.</p><section><h4 id="215822030#example-es6-module-in-typescript" data-toc="example-es6-module-in-typescript#4-Modules.md-example-es6-module-in-typescript">Example: ES6 Module in TypeScript</h4><p id="215822030#-vtu2no_68"><span class="control" id="215822030#-vtu2no_72">mathOperations.ts</span>:</p><div class="detached code-block" id="215822030#-vtu2no_69"><pre><code class="language-javascript">export function add(a: number, b: number): number {
  return a + b;
}

export function subtract(a: number, b: number): number {
  return a - b;
}</code></pre></div><p id="215822030#-vtu2no_70">Here, the <span class="inline-code" id="215822030#-vtu2no_73">export</span> keyword is used to expose the <span class="inline-code" id="215822030#-vtu2no_74">add</span> and <span class="inline-code" id="215822030#-vtu2no_75">subtract</span> functions to other files.</p></section></section></section><section><h2 id="215822030#include-your-own-module" data-toc="include-your-own-module#4-Modules.md-include-your-own-module">Include Your Own Module</h2><p id="215822030#-vtu2no_76">Once you&rsquo;ve created your custom module, you can include it in other files. TypeScript supports importing both <span class="control" id="215822030#-vtu2no_81">CommonJS</span> and <span class="control" id="215822030#-vtu2no_82">ES6</span> modules.</p><section><h3 id="215822030#1-including-a-commonjs-module-in-typescript" data-toc="1-including-a-commonjs-module-in-typescript#4-Modules.md-1-including-a-commonjs-module-in-typescript">1. Including a CommonJS Module in TypeScript</h3><p id="215822030#-vtu2no_83">To include a <span class="control" id="215822030#-vtu2no_87">CommonJS</span> module in TypeScript, use <span class="inline-code" id="215822030#-vtu2no_88">require()</span>:</p><p id="215822030#-vtu2no_84"><span class="control" id="215822030#-vtu2no_89">app.ts</span>:</p><div class="detached code-block" id="215822030#-vtu2no_85"><pre><code class="language-javascript">const math = require('./mathOperations');

const result = math.add(10, 5);
console.log(`Addition result: ${result}`);</code></pre></div><p id="215822030#-vtu2no_86">In this example, we use <span class="inline-code" id="215822030#-vtu2no_90">require()</span> to import the <span class="inline-code" id="215822030#-vtu2no_91">mathOperations.ts</span> file and then use the <span class="inline-code" id="215822030#-vtu2no_92">add</span> function from the imported module.</p></section><section><h3 id="215822030#2-including-an-es6-module-in-typescript" data-toc="2-including-an-es6-module-in-typescript#4-Modules.md-2-including-an-es6-module-in-typescript">2. Including an ES6 Module in TypeScript</h3><p id="215822030#-vtu2no_93">To include an <span class="control" id="215822030#-vtu2no_97">ES6 module</span> in TypeScript, use <span class="inline-code" id="215822030#-vtu2no_98">import</span>:</p><p id="215822030#-vtu2no_94"><span class="control" id="215822030#-vtu2no_99">app.ts</span>:</p><div class="detached code-block" id="215822030#-vtu2no_95"><pre><code class="language-javascript">import { add, subtract } from './mathOperations';

console.log(`Addition: ${add(10, 5)}`);
console.log(`Subtraction: ${subtract(10, 5)}`);</code></pre></div><p id="215822030#-vtu2no_96">Here, we use the <span class="inline-code" id="215822030#-vtu2no_100">import</span> syntax to bring in the <span class="inline-code" id="215822030#-vtu2no_101">add</span> and <span class="inline-code" id="215822030#-vtu2no_102">subtract</span> functions from <span class="inline-code" id="215822030#-vtu2no_103">mathOperations.ts</span>. TypeScript&rsquo;s static typing ensures that only the exported members are accessible, and type checking is enforced.</p></section><section><h3 id="215822030#folder-structure" data-toc="folder-structure#4-Modules.md-folder-structure">Folder Structure:</h3><p id="215822030#-vtu2no_104">Your project might have the following folder structure when working with modules in TypeScript:</p><div class="detached code-block" id="215822030#-vtu2no_105"><pre><code class="language-none">/my-project
  ├── /modules
  │     └── mathOperations.ts
  ├── app.ts
  └── tsconfig.json</code></pre></div><p id="215822030#-vtu2no_106">In this structure, you can import your custom modules like this:</p><div class="detached code-block" id="215822030#-vtu2no_107"><pre><code class="language-javascript">import { add } from './modules/mathOperations';  // ES6</code></pre></div><div class="detached code-block" id="215822030#-vtu2no_108"><pre><code class="language-javascript">const math = require('./modules/mathOperations');  // CommonJS</code></pre></div></section><section><h3 id="215822030#tsconfig-json-configuration" data-toc="tsconfig-json-configuration#4-Modules.md-tsconfig-json-configuration">tsconfig.json Configuration:</h3><p id="215822030#-vtu2no_109">To ensure TypeScript compiles your code correctly, you&rsquo;ll need a <span class="inline-code" id="215822030#-vtu2no_115">tsconfig.json</span> file, which defines TypeScript compiler options, including how to handle modules.</p><p id="215822030#-vtu2no_110">Here&rsquo;s an example configuration:</p><p id="215822030#-vtu2no_111"><span class="control" id="215822030#-vtu2no_116">tsconfig.json</span>:</p><div class="detached code-block" id="215822030#-vtu2no_112"><pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
     &quot;target&quot;: &quot;ES6&quot;, /* Set the JavaScript language version for emitted JavaScript and include compatible library declarations. */
     &quot;module&quot;: &quot;CommonJS&quot;, /* Specify what module code is generated. */
     &quot;rootDir&quot;: &quot;./src&quot;, /* Specify the root folder within your source files. */
     &quot;outDir&quot;: &quot;./dist&quot;, /* Specify an output folder for all emitted files. */
     &quot;forceConsistentCasingInFileNames&quot;: true, /* Ensure that casing is correct in imports. */
     &quot;esModuleInterop&quot;: true, /* Emit additional JavaScript to ease support for importing CommonJS modules. This enables 'allowSyntheticDefaultImports' for type compatibility. */
     &quot;strict&quot;: true, /* Enable all strict type-checking options. */
     &quot;skipLibCheck&quot;: true /* Skip type checking all .d.ts files. */
  },
  &quot;include&quot;: [&quot;./**/*.ts&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;]
}</code></pre></div><p id="215822030#-vtu2no_113">This configuration ensures that TypeScript compiles <span class="inline-code" id="215822030#-vtu2no_117">.ts</span> files into the <span class="inline-code" id="215822030#-vtu2no_118">dist</span> directory, and it compiles based on the module system you specify (<span class="inline-code" id="215822030#-vtu2no_119">commonjs</span> or <span class="inline-code" id="215822030#-vtu2no_120">esnext</span> for ES6).</p></section></section><section><h2 id="215822030#summary" data-toc="summary#4-Modules.md-summary">Summary:</h2><ol class="list list-decimal" id="215822030#-vtu2no_121" type="1" start="1"><li class="list-item" id="215822030#-vtu2no_123"><p id="215822030#-vtu2no_129"><span class="control" id="215822030#-vtu2no_131">What is a Module?</span></p><ul class="list" id="215822030#-vtu2no_130" start="1"><li class="list-item" id="215822030#-vtu2no_132"><p>A reusable block of code in Node.js. Modules help organize code efficiently.</p></li></ul></li><li class="list-item" id="215822030#-vtu2no_124"><p id="215822030#-vtu2no_133"><span class="control" id="215822030#-vtu2no_135">Built-in Modules</span>:</p><ul class="list" id="215822030#-vtu2no_134" start="1"><li class="list-item" id="215822030#-vtu2no_136"><p>Node.js provides various built-in modules like <span class="inline-code" id="215822030#-vtu2no_137">http</span>, <span class="inline-code" id="215822030#-vtu2no_138">fs</span>, and <span class="inline-code" id="215822030#-vtu2no_139">path</span>.</p></li></ul></li><li class="list-item" id="215822030#-vtu2no_125"><p id="215822030#-vtu2no_140"><span class="control" id="215822030#-vtu2no_142">Include Modules</span>:</p><ul class="list" id="215822030#-vtu2no_141" start="1"><li class="list-item" id="215822030#-vtu2no_143"><p>Use <span class="inline-code" id="215822030#-vtu2no_145">require()</span> for <span class="control" id="215822030#-vtu2no_146">CommonJS</span> modules.</p></li><li class="list-item" id="215822030#-vtu2no_144"><p>Use <span class="inline-code" id="215822030#-vtu2no_147">import</span> for <span class="control" id="215822030#-vtu2no_148">ES6</span> modules.</p></li></ul></li><li class="list-item" id="215822030#-vtu2no_126"><p id="215822030#-vtu2no_149"><span class="control" id="215822030#-vtu2no_151">Create Your Own Modules</span>:</p><ul class="list" id="215822030#-vtu2no_150" start="1"><li class="list-item" id="215822030#-vtu2no_152"><p><span class="control" id="215822030#-vtu2no_154">CommonJS</span>: Use <span class="inline-code" id="215822030#-vtu2no_155">module.exports</span> to export code.</p></li><li class="list-item" id="215822030#-vtu2no_153"><p><span class="control" id="215822030#-vtu2no_156">ES6</span>: Use the <span class="inline-code" id="215822030#-vtu2no_157">export</span> keyword to export code.</p></li></ul></li><li class="list-item" id="215822030#-vtu2no_127"><p id="215822030#-vtu2no_158"><span class="control" id="215822030#-vtu2no_160">Include Your Own Module</span>:</p><ul class="list" id="215822030#-vtu2no_159" start="1"><li class="list-item" id="215822030#-vtu2no_161"><p><span class="control" id="215822030#-vtu2no_163">CommonJS</span>: Use <span class="inline-code" id="215822030#-vtu2no_164">require()</span> to import modules.</p></li><li class="list-item" id="215822030#-vtu2no_162"><p><span class="control" id="215822030#-vtu2no_165">ES6</span>: Use <span class="inline-code" id="215822030#-vtu2no_166">import</span> to bring in modules.</p></li></ul></li><li class="list-item" id="215822030#-vtu2no_128"><p id="215822030#-vtu2no_167"><span class="control" id="215822030#-vtu2no_169">TypeScript Integration</span>:</p><ul class="list" id="215822030#-vtu2no_168" start="1"><li class="list-item" id="215822030#-vtu2no_170"><p>TypeScript adds static typing to both <span class="control" id="215822030#-vtu2no_172">CommonJS</span> and <span class="control" id="215822030#-vtu2no_173">ES6</span> modules.</p></li><li class="list-item" id="215822030#-vtu2no_171"><p>Use <span class="inline-code" id="215822030#-vtu2no_174">tsconfig.json</span> to configure the TypeScript compiler based on your preferred module system.</p></li></ul></li></ol></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-920554112">6. Node.js Globals</h1><p id="-920554112#-qmr2ee_3">Node.js provides several built-in global objects. These are available globally and don't require importing any modules. They can be accessed from any part of your application. Understanding these global objects is crucial for writing effective and efficient Node.js applications.</p><section><h2 id="-920554112#what-are-globals" data-toc="what-are-globals#6-Node-js-Globals.md-what-are-globals">What are Globals?</h2><p id="-920554112#-qmr2ee_7">In Node.js, <span class="control" id="-920554112#-qmr2ee_9">Globals</span> are objects or functions that are available throughout the entire runtime without the need to import or require any additional modules. They can be accessed directly within any module or file without needing to reference them explicitly.</p><p id="-920554112#-qmr2ee_8">However, it's important to note that Node.js aims to minimize the use of global objects as it encourages modularity and explicit dependencies. Using global objects should be done with caution to avoid issues with maintainability and scope.</p></section><section><h2 id="-920554112#common-node-js-global-objects" data-toc="common-node-js-global-objects#6-Node-js-Globals.md-common-node-js-global-objects">Common Node.js Global Objects</h2><p id="-920554112#-qmr2ee_10">The following are some of the most commonly used global objects in Node.js:</p><section><h3 id="-920554112#i-dirname" data-toc="i-dirname#6-Node-js-Globals.md-i-dirname">i. __dirname</h3><p id="-920554112#-qmr2ee_17">The <span class="inline-code" id="-920554112#-qmr2ee_22">__dirname</span> global object represents the directory name of the current module (i.e., the file containing the running code). It provides the absolute path to the directory where the currently executing file is located.</p><p id="-920554112#-qmr2ee_18">This is especially useful for handling file paths dynamically. For example, you may need to access resources or files relative to your module, no matter where your application is being run from.</p><div class="detached code-block" id="-920554112#-qmr2ee_19"><pre><code class="language-javascript">import * as path from 'path';
import * as fs from 'fs';

// Example: Use __dirname to handle file paths dynamically
const filePath = path.join(__dirname, 'data', 'example.txt');

// Checking if the file exists before reading
if (fs.existsSync(filePath)) {
  const fileContent = fs.readFileSync(filePath, 'utf-8');
  console.log('File Content:', fileContent);
} else {
  console.log(`File not found at ${filePath}`);
}

// Output __dirname value
console.log('Current directory:', __dirname);</code></pre></div><ul class="list" id="-920554112#-qmr2ee_20" start="1"><li class="list-item" id="-920554112#-qmr2ee_23"><p><span class="control" id="-920554112#-qmr2ee_24">Use case</span>: File path operations that need the relative path from the current module's directory, such as reading or writing files within the application.</p></li></ul></section><section><h3 id="-920554112#ii-filename" data-toc="ii-filename#6-Node-js-Globals.md-ii-filename">ii. __filename</h3><p id="-920554112#-qmr2ee_26">The <span class="inline-code" id="-920554112#-qmr2ee_30">__filename</span> global object provides the absolute path of the current file being executed, including the file name itself. It can be useful in logging, debugging, or when you need to dynamically work with the path of the current script.</p><div class="detached code-block" id="-920554112#-qmr2ee_27"><pre><code class="language-javascript">import * as path from 'path';

// Example: __filename in action
console.log('Full file path:', __filename);

// Extract directory name from __filename
const currentDir = path.dirname(__filename);
console.log('Directory name:', currentDir);

// Extract base file name (e.g., 'index.js') from __filename
const baseFileName = path.basename(__filename);
console.log('Base file name:', baseFileName);

// Extract file extension (e.g., '.js')
const fileExtension = path.extname(__filename);
console.log('File extension:', fileExtension);

// Construct a path relative to this file
const relativePath = path.join(currentDir, 'config', 'settings.json');
console.log('Relative file path:', relativePath);</code></pre></div><ul class="list" id="-920554112#-qmr2ee_28" start="1"><li class="list-item" id="-920554112#-qmr2ee_31"><p><span class="control" id="-920554112#-qmr2ee_32">Use case</span>: Dynamic operations involving the file path of the current file, like logging its location, or performing actions based on the current file&rsquo;s directory.</p></li></ul></section><section><h3 id="-920554112#iii-exports" data-toc="iii-exports#6-Node-js-Globals.md-iii-exports">iii. exports</h3><p id="-920554112#-qmr2ee_34">In Node.js, <span class="inline-code" id="-920554112#-qmr2ee_40">exports</span> is an object that is used to expose functionalities from a module to other files. It's used to define the public interface of the module. You can export variables, functions, or classes to be available for other files using the <span class="inline-code" id="-920554112#-qmr2ee_41">exports</span> object.</p><div class="detached code-block" id="-920554112#-qmr2ee_35"><pre><code class="language-javascript">// Example: Using exports in a module
export const sayHello = () =&gt; {
  console.log('Hello, World!');
};</code></pre></div><p id="-920554112#-qmr2ee_36">In another file, you can import this function as follows:</p><div class="detached code-block" id="-920554112#-qmr2ee_37"><pre><code class="language-javascript">import { sayHello } from './moduleFile';
sayHello();  // Output: Hello, World!</code></pre></div><ul class="list" id="-920554112#-qmr2ee_38" start="1"><li class="list-item" id="-920554112#-qmr2ee_42"><p><span class="control" id="-920554112#-qmr2ee_43">Use case</span>: Sharing functions, variables, or classes from one file to be used in other parts of your application.</p></li></ul></section><section><h3 id="-920554112#iv-module" data-toc="iv-module#6-Node-js-Globals.md-iv-module">iv. module</h3><p id="-920554112#-qmr2ee_45">The <span class="inline-code" id="-920554112#-qmr2ee_49">module</span> object represents the current module and provides information about it. It's an object that contains properties like <span class="inline-code" id="-920554112#-qmr2ee_50">exports</span> (for exporting the module&rsquo;s content) and <span class="inline-code" id="-920554112#-qmr2ee_51">filename</span> (to get the absolute path of the module file).</p><div class="detached code-block" id="-920554112#-qmr2ee_46"><pre><code class="language-javascript">// Example: Inspecting the module object
console.log(module);  // Output: Module details (such as exports, id, filename)</code></pre></div><p id="-920554112#-qmr2ee_47">Using <span class="inline-code" id="-920554112#-qmr2ee_52">module.exports</span>, you can overwrite the default exports object.</p></section><section><h3 id="-920554112#v-require" data-toc="v-require#6-Node-js-Globals.md-v-require">v. require()</h3><p id="-920554112#-qmr2ee_54"><span class="inline-code" id="-920554112#-qmr2ee_59">require()</span> is a built-in function used to include modules. It is used to load and use modules from other files or node modules. In TypeScript, you typically use the <span class="inline-code" id="-920554112#-qmr2ee_60">import</span> syntax, but <span class="inline-code" id="-920554112#-qmr2ee_61">require()</span> is still relevant in some use cases like when working with older JavaScript modules.</p><div class="detached code-block" id="-920554112#-qmr2ee_55"><pre><code class="language-javascript">// Example: Using require() to load a module
const fs = require('fs');
const data = fs.readFileSync('example.txt', 'utf8');
console.log(data);</code></pre></div><p id="-920554112#-qmr2ee_56">In TypeScript, the equivalent of <span class="inline-code" id="-920554112#-qmr2ee_62">require()</span> is typically:</p><div class="detached code-block" id="-920554112#-qmr2ee_57"><pre><code class="language-javascript">import * as fs from 'fs';
const data = fs.readFileSync('example.txt', 'utf8');
console.log(data);</code></pre></div></section></section><section><h2 id="-920554112#es-global-objects" data-toc="es-global-objects#6-Node-js-Globals.md-es-global-objects">ES Global Objects</h2><p id="-920554112#-qmr2ee_63">In addition to the Node.js-specific global objects, Node.js also exposes many of the ECMAScript (ES) global objects that are part of the JavaScript language itself. These objects are available in all JavaScript environments (browser, server-side, etc.), and they include objects like:</p><ul class="list" id="-920554112#-qmr2ee_64" start="1"><li class="list-item" id="-920554112#-qmr2ee_68"><p id="-920554112#-qmr2ee_73"><span class="control" id="-920554112#-qmr2ee_75"><span class="inline-code" id="-920554112#-qmr2ee_76">console</span></span>: Used for printing information, warnings, or errors to the terminal.</p><div class="detached code-block" id="-920554112#-qmr2ee_74"><pre><code class="language-javascript">console.log('This is a message');
console.error('This is an error');</code></pre></div></li><li class="list-item" id="-920554112#-qmr2ee_69"><p id="-920554112#-qmr2ee_77"><span class="control" id="-920554112#-qmr2ee_79"><span class="inline-code" id="-920554112#-qmr2ee_80">setTimeout()</span>/<span class="inline-code" id="-920554112#-qmr2ee_81">setInterval()</span></span>: Used to execute a function after a specified delay or repeatedly at intervals.</p><div class="detached code-block" id="-920554112#-qmr2ee_78"><pre><code class="language-javascript">setTimeout(() =&gt; {
  console.log('This message appears after 2 seconds');
}, 2000);

setInterval(() =&gt; {
  console.log('This message repeats every 3 seconds');
}, 3000);</code></pre></div></li><li class="list-item" id="-920554112#-qmr2ee_70"><p id="-920554112#-qmr2ee_82"><span class="control" id="-920554112#-qmr2ee_84"><span class="inline-code" id="-920554112#-qmr2ee_85">Promise</span></span>: A global object that represents an asynchronous operation that may complete at some point in the future.</p><div class="detached code-block" id="-920554112#-qmr2ee_83"><pre><code class="language-javascript">const promise = new Promise((resolve, reject) =&gt; {
  setTimeout(() =&gt; {
    resolve('Promise resolved!');
  }, 1000);
});

promise.then(message =&gt; {
  console.log(message);  // Output: Promise resolved!
});</code></pre></div></li><li class="list-item" id="-920554112#-qmr2ee_71"><p id="-920554112#-qmr2ee_86"><span class="control" id="-920554112#-qmr2ee_88"><span class="inline-code" id="-920554112#-qmr2ee_90">Buffer</span></span>: Available globally in Node.js, the <span class="inline-code" id="-920554112#-qmr2ee_89">Buffer</span> class is used to handle binary data.</p><div class="detached code-block" id="-920554112#-qmr2ee_87"><pre><code class="language-javascript">const buffer = Buffer.from('Hello, world!', 'utf8');
console.log(buffer.toString());  // Output: Hello, world!</code></pre></div></li><li class="list-item" id="-920554112#-qmr2ee_72"><p id="-920554112#-qmr2ee_91"><span class="control" id="-920554112#-qmr2ee_93"><span class="inline-code" id="-920554112#-qmr2ee_94">process</span></span>: A Node.js-specific object that provides information about the current process, as well as methods for controlling it.</p><div class="detached code-block" id="-920554112#-qmr2ee_92"><pre><code class="language-javascript">console.log(process.env);  // Outputs environment variables
process.exit(1);  // Terminates the process with an error code</code></pre></div></li></ul><p id="-920554112#-qmr2ee_65">These objects are available globally in Node.js as part of the underlying JavaScript language and the Node.js runtime.</p><p id="-920554112#-qmr2ee_67">This section on <span class="control" id="-920554112#-qmr2ee_95">Node.js Globals</span> introduces developers to essential global objects they will frequently encounter when building applications in Node.js. It provides a solid foundation for understanding the Node.js environment and its integration with ECMAScript features.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1815655717">7. HTTP Module</h1><p id="-1815655717#o7havz_3">The HTTP module in Node.js provides the functionality to create web servers and handle HTTP requests and responses. Additionally, Node.js supports HTTP/2 and HTTPS for improved performance and secure communication. Each protocol offers unique features and is widely used to handle web traffic.</p><section><h2 id="-1815655717#http" data-toc="http#7-HTTP-Module.md-http">HTTP</h2><p id="-1815655717#o7havz_8">The HTTP (Hypertext Transfer Protocol) module in Node.js is used to create and manage basic web servers. It provides functionality to create a server, listen for incoming requests, and respond with data. This is one of the core modules in Node.js, allowing developers to set up a web server with minimal setup.</p><section><h3 id="-1815655717#key-features" data-toc="key-features#7-HTTP-Module.md-key-features">Key Features:</h3><ul class="list" id="-1815655717#o7havz_13" start="1"><li class="list-item" id="-1815655717#o7havz_14"><p>Handling basic HTTP requests and responses (GET, POST, PUT, DELETE, etc.)</p></li><li class="list-item" id="-1815655717#o7havz_15"><p>Managing request headers and response data</p></li><li class="list-item" id="-1815655717#o7havz_16"><p>Easy access to URL and query parameters</p></li></ul></section><section><h3 id="-1815655717#example-basic-http-server-in-node-js-with-typescript" data-toc="example-basic-http-server-in-node-js-with-typescript#7-HTTP-Module.md-example-basic-http-server-in-node-js-with-typescript">Example: Basic HTTP Server in Node.js with TypeScript</h3><div class="detached code-block" id="-1815655717#o7havz_17"><pre><code class="language-javascript">import * as http from 'http';

// Create a basic HTTP server
const server = http.createServer((req, res) =&gt; {
  // Set the response header and status code
  res.writeHead(200, { 'Content-Type': 'text/plain' });

  // Send a response based on the URL
  if (req.url === '/') {
    res.end('Welcome to the homepage!');
  } else if (req.url === '/about') {
    res.end('About us page');
  } else {
    res.end('404 - Page not found');
  }
});

// Listen on port 3000
server.listen(3000, () =&gt; {
  console.log('Server is running on http://localhost:3000');
});</code></pre></div></section><section><h3 id="-1815655717#explanation" data-toc="explanation#7-HTTP-Module.md-explanation">Explanation:</h3><ul class="list" id="-1815655717#o7havz_18" start="1"><li class="list-item" id="-1815655717#o7havz_19"><p><span class="control" id="-1815655717#o7havz_23"><span class="inline-code" id="-1815655717#o7havz_24">http.createServer()</span></span>: Creates an HTTP server that listens for incoming requests.</p></li><li class="list-item" id="-1815655717#o7havz_20"><p><span class="control" id="-1815655717#o7havz_25"><span class="inline-code" id="-1815655717#o7havz_26">req.url</span></span>: Captures the URL of the incoming request, which allows routing to different responses.</p></li><li class="list-item" id="-1815655717#o7havz_21"><p><span class="control" id="-1815655717#o7havz_27"><span class="inline-code" id="-1815655717#o7havz_28">res.writeHead()</span></span>: Sets the HTTP status code and headers before sending the response.</p></li><li class="list-item" id="-1815655717#o7havz_22"><p><span class="control" id="-1815655717#o7havz_29"><span class="inline-code" id="-1815655717#o7havz_30">res.end()</span></span>: Ends the response and sends it to the client.</p></li></ul></section><section><h3 id="-1815655717#use-cases" data-toc="use-cases#7-HTTP-Module.md-use-cases">Use Cases:</h3><ul class="list" id="-1815655717#o7havz_31" start="1"><li class="list-item" id="-1815655717#o7havz_33"><p>Lightweight web servers for testing or small applications.</p></li><li class="list-item" id="-1815655717#o7havz_34"><p>Handling basic APIs and static file serving.</p></li></ul></section></section><section><h2 id="-1815655717#http-2" data-toc="http-2#7-HTTP-Module.md-http-2">HTTP/2</h2><p id="-1815655717#o7havz_35">HTTP/2 is a major revision of the HTTP protocol that introduces several improvements over HTTP/1.1, including better performance and reduced latency. Node.js provides native support for HTTP/2 via the <span class="inline-code" id="-1815655717#o7havz_40">http2</span> module. Key benefits include multiplexing (allowing multiple requests and responses to be sent over a single connection), header compression, and server push.</p><section><h3 id="-1815655717#key-features" data-toc="key-features#7-HTTP-Module.md-key-features">Key Features:</h3><ul class="list" id="-1815655717#o7havz_41" start="1"><li class="list-item" id="-1815655717#o7havz_42"><p><span class="control" id="-1815655717#o7havz_45">Multiplexing</span>: Multiple requests and responses over a single TCP connection.</p></li><li class="list-item" id="-1815655717#o7havz_43"><p><span class="control" id="-1815655717#o7havz_46">Header Compression</span>: Compresses HTTP headers to reduce overhead.</p></li><li class="list-item" id="-1815655717#o7havz_44"><p><span class="control" id="-1815655717#o7havz_47">Server Push</span>: The server can push resources (like CSS, JS files) to the client before the client even requests them.</p></li></ul></section><section><h3 id="-1815655717#example-basic-http-2-server-in-node-js-with-typescript" data-toc="example-basic-http-2-server-in-node-js-with-typescript#7-HTTP-Module.md-example-basic-http-2-server-in-node-js-with-typescript">Example: Basic HTTP/2 Server in Node.js with TypeScript</h3><div class="detached code-block" id="-1815655717#o7havz_48"><pre><code class="language-javascript">import * as http2 from 'http2';
import * as fs from 'fs';

// Load SSL certificates for secure connection
// learn how to generate server-key.pem &amp; server-cert.pem from 7.1 Install OpenSSL on Windows
const options = {
  key: fs.readFileSync('server-key.pem'),
  cert: fs.readFileSync('server-cert.pem')
};

// Create an HTTP/2 server
const server = http2.createSecureServer(options);

server.on('stream', (stream, headers) =&gt; {
  // Respond to HTTP/2 requests
  const path = headers[':path'];
  
  if (path === '/') {
    stream.respond({
      'content-type': 'text/html',
      ':status': 200
    });
    stream.end('&lt;h1&gt;Welcome to the HTTP/2 Server&lt;/h1&gt;');
  } else if (path === '/about') {
    stream.respond({
      'content-type': 'text/html',
      ':status': 200
    });
    stream.end('&lt;h1&gt;About Us&lt;/h1&gt;');
  } else {
    stream.respond({
      ':status': 404
    });
    stream.end('404 - Not Found');
  }
});

// Listen on port 8443
server.listen(8443, () =&gt; {
  console.log('HTTP/2 server is running on https://localhost:8443');
});</code></pre></div></section><section><h3 id="-1815655717#explanation" data-toc="explanation#7-HTTP-Module.md-explanation">Explanation:</h3><ul class="list" id="-1815655717#o7havz_49" start="1"><li class="list-item" id="-1815655717#o7havz_50"><p><span class="control" id="-1815655717#o7havz_53"><span class="inline-code" id="-1815655717#o7havz_54">http2.createSecureServer()</span></span>: Creates a secure HTTP/2 server using SSL certificates.</p></li><li class="list-item" id="-1815655717#o7havz_51"><p><span class="control" id="-1815655717#o7havz_55"><span class="inline-code" id="-1815655717#o7havz_56">stream.respond()</span></span>: Sends headers and status code for each incoming request.</p></li><li class="list-item" id="-1815655717#o7havz_52"><p><span class="control" id="-1815655717#o7havz_57"><span class="inline-code" id="-1815655717#o7havz_58">stream.end()</span></span>: Ends the response and sends data to the client.</p></li></ul></section><section><h3 id="-1815655717#use-cases" data-toc="use-cases#7-HTTP-Module.md-use-cases">Use Cases:</h3><ul class="list" id="-1815655717#o7havz_59" start="1"><li class="list-item" id="-1815655717#o7havz_61"><p>Modern web applications that require faster loading times and efficient resource loading.</p></li><li class="list-item" id="-1815655717#o7havz_62"><p>Applications that need to support Server Push for improved user experience.</p></li></ul></section></section><section><h2 id="-1815655717#https" data-toc="https#7-HTTP-Module.md-https">HTTPS</h2><p id="-1815655717#o7havz_63">HTTPS (Hypertext Transfer Protocol Secure) is an extension of HTTP that provides secure communication over the network using SSL/TLS encryption. In Node.js, the <span class="inline-code" id="-1815655717#o7havz_68">https</span> module is used to create secure servers. HTTPS ensures that all data exchanged between the server and the client is encrypted, protecting sensitive information from being intercepted.</p><section><h3 id="-1815655717#key-features" data-toc="key-features#7-HTTP-Module.md-key-features">Key Features:</h3><ul class="list" id="-1815655717#o7havz_69" start="1"><li class="list-item" id="-1815655717#o7havz_70"><p><span class="control" id="-1815655717#o7havz_72">SSL/TLS Encryption</span>: Secure communication using certificates.</p></li><li class="list-item" id="-1815655717#o7havz_71"><p><span class="control" id="-1815655717#o7havz_73">Secure Data Transmission</span>: Protects sensitive information (like login credentials, payment info).</p></li></ul></section><section><h3 id="-1815655717#example-basic-https-server-in-node-js-with-typescript" data-toc="example-basic-https-server-in-node-js-with-typescript#7-HTTP-Module.md-example-basic-https-server-in-node-js-with-typescript">Example: Basic HTTPS Server in Node.js with TypeScript</h3><div class="detached code-block" id="-1815655717#o7havz_74"><pre><code class="language-javascript">import * as https from 'https';
import * as fs from 'fs';

// Load SSL certificates
const options = {
  key: fs.readFileSync('server-key.pem'),
  cert: fs.readFileSync('server-cert.pem')
};

// Create a basic HTTPS server
const server = https.createServer(options, (req, res) =&gt; {
  res.writeHead(200, { 'Content-Type': 'text/plain' });

  // Respond to requests based on URL
  if (req.url === '/') {
    res.end('Welcome to the secure homepage!');
  } else if (req.url === '/about') {
    res.end('About us page (secure)');
  } else {
    res.end('404 - Secure page not found');
  }
});

// Listen on port 443 (default for HTTPS)
server.listen(443, () =&gt; {
  console.log('HTTPS server is running on https://localhost');
});</code></pre></div></section><section><h3 id="-1815655717#explanation" data-toc="explanation#7-HTTP-Module.md-explanation">Explanation:</h3><ul class="list" id="-1815655717#o7havz_75" start="1"><li class="list-item" id="-1815655717#o7havz_76"><p><span class="control" id="-1815655717#o7havz_79">SSL Certificates</span>: The <span class="inline-code" id="-1815655717#o7havz_80">options</span> object includes the private key and certificate required for secure connections.</p></li><li class="list-item" id="-1815655717#o7havz_77"><p><span class="control" id="-1815655717#o7havz_81"><span class="inline-code" id="-1815655717#o7havz_82">https.createServer()</span></span>: Creates an HTTPS server using SSL/TLS encryption.</p></li><li class="list-item" id="-1815655717#o7havz_78"><p><span class="control" id="-1815655717#o7havz_83">Port 443</span>: The standard port for HTTPS, ensuring that all communication is encrypted.</p></li></ul></section><section><h3 id="-1815655717#use-cases" data-toc="use-cases#7-HTTP-Module.md-use-cases">Use Cases:</h3><ul class="list" id="-1815655717#o7havz_84" start="1"><li class="list-item" id="-1815655717#o7havz_86"><p>Websites or APIs that need to handle sensitive data securely, such as login systems, financial transactions, or private communications.</p></li><li class="list-item" id="-1815655717#o7havz_87"><p>Any application that wants to ensure security and privacy by default.</p></li></ul></section></section><section><h2 id="-1815655717#summary" data-toc="summary#7-HTTP-Module.md-summary">Summary</h2><ul class="list" id="-1815655717#o7havz_88" start="1"><li class="list-item" id="-1815655717#o7havz_90"><p><span class="control" id="-1815655717#o7havz_93">HTTP</span>: Ideal for building simple web servers or APIs where performance and security are not primary concerns. However, it is commonly used for local development and testing.</p></li><li class="list-item" id="-1815655717#o7havz_91"><p><span class="control" id="-1815655717#o7havz_94">HTTP/2</span>: Offers significant performance improvements over HTTP/1.1, including multiplexing and server push, which makes it ideal for modern web applications.</p></li><li class="list-item" id="-1815655717#o7havz_92"><p><span class="control" id="-1815655717#o7havz_95">HTTPS</span>: Provides a secure communication layer with SSL/TLS encryption, essential for any application handling sensitive user data. It ensures the integrity and privacy of data exchanged between client and server.</p></li></ul><p id="-1815655717#o7havz_89">These modules enable developers to create flexible, high-performance, and secure applications for various use cases.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="2035172722">7.1 Install OpenSSL on Windows</h1><p id="2035172722#xdss7y_3">You can generate the <span class="inline-code" id="2035172722#xdss7y_11">server-key.pem</span> and <span class="inline-code" id="2035172722#xdss7y_12">server-cert.pem</span> files on Windows using OpenSSL. Here's a step-by-step guide to generate the self-signed certificates on Windows.</p><p id="2035172722#xdss7y_4">Configuring OpenSSL on Windows involves downloading and installing the appropriate binaries, setting up environment variables, and verifying the installation. Below is a step-by-step guide to help you through the process.</p><section><h2 id="2035172722#1-understanding-openssl" data-toc="1-understanding-openssl#Install-OpenSSL-on-Windows.md-1-understanding-openssl">1. Understanding OpenSSL</h2><p id="2035172722#xdss7y_14"><span class="control" id="2035172722#xdss7y_16">OpenSSL</span> is an open-source toolkit for the Transport Layer Security (TLS) and Secure Sockets Layer (SSL) protocols. It is widely used for securing communications over computer networks and for managing cryptographic keys and certificates.</p></section><section><h2 id="2035172722#2-downloading-openssl" data-toc="2-downloading-openssl#Install-OpenSSL-on-Windows.md-2-downloading-openssl">2. Downloading OpenSSL</h2><p id="2035172722#xdss7y_18">OpenSSL doesn't provide official Windows binaries, but trusted third-party providers offer precompiled versions:</p><section><h3 id="2035172722#shining-light-productions" data-toc="shining-light-productions#Install-OpenSSL-on-Windows.md-shining-light-productions">Shining Light Productions</h3><ol class="list list-decimal" id="2035172722#xdss7y_22" type="1" start="1"><li class="list-item" id="2035172722#xdss7y_24"><p id="2035172722#xdss7y_27"><span class="control" id="2035172722#xdss7y_29">Visit the Website:</span></p><ul class="list" id="2035172722#xdss7y_28" start="1"><li class="list-item" id="2035172722#xdss7y_30"><p>Go to Shining Light Productions OpenSSL Binaries (<a href="https://slproweb.com/products/Win32OpenSSL.html">https://slproweb.com/products/Win32OpenSSL.html</a>).</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_25"><p id="2035172722#xdss7y_32"><span class="control" id="2035172722#xdss7y_34">Choose the Right Installer:</span></p><ul class="list" id="2035172722#xdss7y_33" start="1"><li class="list-item" id="2035172722#xdss7y_35"><p><span class="control" id="2035172722#xdss7y_38">Version:</span> Select the latest stable version compatible with your needs.</p></li><li class="list-item" id="2035172722#xdss7y_36"><p><span class="control" id="2035172722#xdss7y_39">Architecture:</span> Choose between Win32 (32-bit) or Win64 (64-bit) based on your system.</p></li><li class="list-item" id="2035172722#xdss7y_37"><p><span class="control" id="2035172722#xdss7y_40">Light vs. Full:</span> The &quot;Light&quot; version includes the essential components, while the &quot;Full&quot; version contains additional tools.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_26"><p id="2035172722#xdss7y_41"><span class="control" id="2035172722#xdss7y_43">Download the Installer:</span></p><ul class="list" id="2035172722#xdss7y_42" start="1"><li class="list-item" id="2035172722#xdss7y_44"><p>Click on the appropriate <span class="inline-code" id="2035172722#xdss7y_45">.exe</span> installer to download.</p></li></ul></li></ol></section></section><section><h2 id="2035172722#3-installing-openssl" data-toc="3-installing-openssl#Install-OpenSSL-on-Windows.md-3-installing-openssl">3. Installing OpenSSL</h2><section><h3 id="2035172722#using-shining-light-productions-installer" data-toc="using-shining-light-productions-installer#Install-OpenSSL-on-Windows.md-using-shining-light-productions-installer">Using Shining Light Productions Installer</h3><ol class="list list-decimal" id="2035172722#xdss7y_50" type="1" start="1"><li class="list-item" id="2035172722#xdss7y_52"><p id="2035172722#xdss7y_55"><span class="control" id="2035172722#xdss7y_57">Run the Installer:</span></p><ul class="list" id="2035172722#xdss7y_56" start="1"><li class="list-item" id="2035172722#xdss7y_58"><p>Double-click the downloaded <span class="inline-code" id="2035172722#xdss7y_59">.exe</span> file.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_53"><p id="2035172722#xdss7y_60"><span class="control" id="2035172722#xdss7y_62">Follow the Installation Wizard:</span></p><ul class="list" id="2035172722#xdss7y_61" start="1"><li class="list-item" id="2035172722#xdss7y_63"><p><span class="control" id="2035172722#xdss7y_67">License Agreement:</span> Accept the terms and proceed.</p></li><li class="list-item" id="2035172722#xdss7y_64"><p><span class="control" id="2035172722#xdss7y_68">Destination Directory:</span> Choose the installation path (default is usually fine).</p></li><li class="list-item" id="2035172722#xdss7y_65"><p><span class="control" id="2035172722#xdss7y_69">Select Components:</span></p><ul class="list" id="2035172722#xdss7y_70" start="1"><li class="list-item" id="2035172722#xdss7y_71"><p>Ensure that the &quot;OpenSSL binaries&quot; and &quot;OpenSSL libraries&quot; are selected.</p></li><li class="list-item" id="2035172722#xdss7y_72"><p>Optionally, include the &quot;Copy OpenSSL DLLs to the Windows system directory&quot; if desired.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_66"><p><span class="control" id="2035172722#xdss7y_73">Install:</span> Click <span class="inline-code" id="2035172722#xdss7y_74">Install</span> to begin the process.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_54"><p id="2035172722#xdss7y_75"><span class="control" id="2035172722#xdss7y_77">Complete Installation:</span></p><ul class="list" id="2035172722#xdss7y_76" start="1"><li class="list-item" id="2035172722#xdss7y_78"><p>Finish the wizard once installation is complete.</p></li></ul></li></ol></section></section><section><h2 id="2035172722#5-configuring-environment-variables" data-toc="5-configuring-environment-variables#Install-OpenSSL-on-Windows.md-5-configuring-environment-variables">5. Configuring Environment Variables</h2><p id="2035172722#xdss7y_80">To use OpenSSL from the Command Prompt, you need to add its <span class="inline-code" id="2035172722#xdss7y_83">bin</span> directory to the system <span class="inline-code" id="2035172722#xdss7y_84">PATH</span>.</p><ol class="list list-decimal" id="2035172722#xdss7y_81" type="1" start="1"><li class="list-item" id="2035172722#xdss7y_85"><p id="2035172722#xdss7y_88"><span class="control" id="2035172722#xdss7y_90">Locate OpenSSL Installation Directory:</span></p><ul class="list" id="2035172722#xdss7y_89" start="1"><li class="list-item" id="2035172722#xdss7y_91"><p>Typically, it's installed in <span class="inline-code" id="2035172722#xdss7y_92">C:\OpenSSL-Win64</span> or <span class="inline-code" id="2035172722#xdss7y_93">C:\OpenSSL-Win32</span>.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_86"><p id="2035172722#xdss7y_94"><span class="control" id="2035172722#xdss7y_96">Add to PATH:</span></p><ul class="list" id="2035172722#xdss7y_95" start="1"><li class="list-item" id="2035172722#xdss7y_97"><p><span class="control" id="2035172722#xdss7y_102">Open System Properties:</span></p><ul class="list" id="2035172722#xdss7y_103" start="1"><li class="list-item" id="2035172722#xdss7y_104"><p>Press <span class="inline-code" id="2035172722#xdss7y_105">Win + X</span>, select <span class="inline-code" id="2035172722#xdss7y_106">System</span>, then <span class="inline-code" id="2035172722#xdss7y_107">Advanced system settings</span>.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_98"><p><span class="control" id="2035172722#xdss7y_108">Environment Variables:</span></p><ul class="list" id="2035172722#xdss7y_109" start="1"><li class="list-item" id="2035172722#xdss7y_110"><p>Click on <span class="inline-code" id="2035172722#xdss7y_111">Environment Variables</span>.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_99"><p><span class="control" id="2035172722#xdss7y_112">Edit PATH:</span></p><ul class="list" id="2035172722#xdss7y_113" start="1"><li class="list-item" id="2035172722#xdss7y_114"><p>Under <span class="inline-code" id="2035172722#xdss7y_115">System variables</span>, find and select <span class="inline-code" id="2035172722#xdss7y_116">Path</span>, then click <span class="inline-code" id="2035172722#xdss7y_117">Edit</span>.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_100"><p><span class="control" id="2035172722#xdss7y_118">Add New Entry:</span></p><ul class="list" id="2035172722#xdss7y_119" start="1"><li class="list-item" id="2035172722#xdss7y_120"><p>Click <span class="inline-code" id="2035172722#xdss7y_121">New</span> and enter the path to the OpenSSL <span class="inline-code" id="2035172722#xdss7y_122">bin</span> directory, e.g., <span class="inline-code" id="2035172722#xdss7y_123">C:\OpenSSL-Win64\bin</span>.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_101"><p><span class="control" id="2035172722#xdss7y_124">Save Changes:</span></p><ul class="list" id="2035172722#xdss7y_125" start="1"><li class="list-item" id="2035172722#xdss7y_126"><p>Click <span class="inline-code" id="2035172722#xdss7y_127">OK</span> on all dialogs to apply the changes.</p></li></ul></li></ul></li><li class="list-item" id="2035172722#xdss7y_87"><p id="2035172722#xdss7y_128"><span class="control" id="2035172722#xdss7y_130">Verify PATH Update:</span></p><ul class="list" id="2035172722#xdss7y_129" start="1"><li class="list-item" id="2035172722#xdss7y_131"><p id="2035172722#xdss7y_133">Open a new Command Prompt window and run:</p><div class="detached code-block" id="2035172722#xdss7y_134"><pre><code class="language-bash">echo %PATH%</code></pre></div></li><li class="list-item" id="2035172722#xdss7y_132"><p id="2035172722#xdss7y_135">Ensure the OpenSSL <span class="inline-code" id="2035172722#xdss7y_136">bin</span> path is listed.</p></li></ul></li></ol></section><section><h2 id="2035172722#6-verifying-the-installation" data-toc="6-verifying-the-installation#Install-OpenSSL-on-Windows.md-6-verifying-the-installation">6. Verifying the Installation</h2><ol class="list list-decimal" id="2035172722#xdss7y_138" type="1" start="1"><li class="list-item" id="2035172722#xdss7y_140"><p id="2035172722#xdss7y_143"><span class="control" id="2035172722#xdss7y_145">Open Command Prompt:</span></p><ul class="list" id="2035172722#xdss7y_144" start="1"><li class="list-item" id="2035172722#xdss7y_146"><p>Press <span class="inline-code" id="2035172722#xdss7y_147">Win + R</span>, type <span class="inline-code" id="2035172722#xdss7y_148">cmd</span>, and press <span class="inline-code" id="2035172722#xdss7y_149">Enter</span>.</p></li></ul></li><li class="list-item" id="2035172722#xdss7y_141"><p id="2035172722#xdss7y_150"><span class="control" id="2035172722#xdss7y_152">Check OpenSSL Version:</span></p><ul class="list" id="2035172722#xdss7y_151" start="1"><li class="list-item" id="2035172722#xdss7y_153"><p id="2035172722#xdss7y_155">Run the command:</p><div class="detached code-block" id="2035172722#xdss7y_156"><pre><code class="language-bash">openssl version</code></pre></div></li><li class="list-item" id="2035172722#xdss7y_154"><p id="2035172722#xdss7y_157">You should see output similar to:</p><div class="detached code-block" id="2035172722#xdss7y_158"><pre><code class="language-none">OpenSSL 1.1.1k  25 Mar 2021</code></pre></div></li></ul></li><li class="list-item" id="2035172722#xdss7y_142"><p id="2035172722#xdss7y_159"><span class="control" id="2035172722#xdss7y_161">Basic Test:</span></p><ul class="list" id="2035172722#xdss7y_160" start="1"><li class="list-item" id="2035172722#xdss7y_162"><p id="2035172722#xdss7y_164">Generate a test key:</p><div class="detached code-block" id="2035172722#xdss7y_165"><pre><code class="language-bash">openssl genrsa -out test.key 2048</code></pre></div></li><li class="list-item" id="2035172722#xdss7y_163"><p id="2035172722#xdss7y_166">If the command executes without errors and <span class="inline-code" id="2035172722#xdss7y_167">test.key</span> is created, OpenSSL is functioning correctly.</p></li></ul></li></ol></section><section><h2 id="2035172722#7-common-configuration-tasks" data-toc="7-common-configuration-tasks#Install-OpenSSL-on-Windows.md-7-common-configuration-tasks">7. Common Configuration Tasks</h2><section><h3 id="2035172722#generating-a-private-key-and-certificate-signing-request-csr" data-toc="generating-a-private-key-and-certificate-signing-request-csr#Install-OpenSSL-on-Windows.md-generating-a-private-key-and-certificate-signing-request-csr">Generating a Private Key and Certificate Signing Request (CSR)</h3></section><section><h3 id="2035172722#step-1-generate-private-key" data-toc="step-1-generate-private-key#Install-OpenSSL-on-Windows.md-step-1-generate-private-key">Step 1. Generate Private Key:</h3><div class="detached code-block" id="2035172722#xdss7y_178"><pre><code class="language-bash">openssl genrsa -out myprivate.key 2048</code></pre></div></section><section><h3 id="2035172722#step-2-generate-csr" data-toc="step-2-generate-csr#Install-OpenSSL-on-Windows.md-step-2-generate-csr">Step 2. Generate CSR:</h3><div class="detached code-block" id="2035172722#xdss7y_179"><pre><code class="language-bash">openssl req -new -key myprivate.key -out myrequest.csr</code></pre></div><div class="detached code-block" id="2035172722#xdss7y_180"><pre><code class="language-none">- Follow the prompts to enter information like Country, State, Organization, etc.</code></pre></div></section><section><h3 id="2035172722#step-3-generate-the-private-key-and-self-signed-certificate" data-toc="step-3-generate-the-private-key-and-self-signed-certificate#Install-OpenSSL-on-Windows.md-step-3-generate-the-private-key-and-self-signed-certificate">Step 3: Generate the Private Key and Self-Signed Certificate</h3><section><h4 id="2035172722#1-generate-the-private-key-server-key-pem" data-toc="1-generate-the-private-key-server-key-pem#Install-OpenSSL-on-Windows.md-1-generate-the-private-key-server-key-pem">1. Generate the Private Key (server-key.pem)</h4><p id="2035172722#xdss7y_185">Run the following command to generate a 2048-bit RSA private key:</p><div class="detached code-block" id="2035172722#xdss7y_186"><pre><code class="language-bash">openssl genrsa -out server-key.pem 2048</code></pre></div><p id="2035172722#xdss7y_187">This command will create the <span class="inline-code" id="2035172722#xdss7y_189">server-key.pem</span> file, which contains the private key.</p></section><section><h4 id="2035172722#2-generate-the-certificate-signing-request-csr" data-toc="2-generate-the-certificate-signing-request-csr#Install-OpenSSL-on-Windows.md-2-generate-the-certificate-signing-request-csr">2. Generate the Certificate Signing Request (CSR)</h4><p id="2035172722#xdss7y_190">Next, generate a Certificate Signing Request (CSR) using the private key:</p><div class="detached code-block" id="2035172722#xdss7y_191"><pre><code class="language-bash">openssl req -new -key server-key.pem -out server-csr.pem</code></pre></div><p id="2035172722#xdss7y_192">When prompted, enter the required information. Here's an example:</p><div class="detached code-block" id="2035172722#xdss7y_193"><pre><code class="language-none">Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:California
Locality Name (eg, city) []:San Francisco
Organization Name (eg, company) [Internet Widgits Pty Ltd]:MyCompany
Organizational Unit Name (eg, section) []:Development
Common Name (e.g. server FQDN or YOUR name) []:localhost
Email Address []:admin@mycompany.com</code></pre></div><p id="2035172722#xdss7y_194">For the <span class="control" id="2035172722#xdss7y_195">Common Name</span>, use <span class="inline-code" id="2035172722#xdss7y_196">localhost</span> if you're generating the certificate for local development.</p></section><section><h4 id="2035172722#3-generate-the-self-signed-certificate-server-cert-pem" data-toc="3-generate-the-self-signed-certificate-server-cert-pem#Install-OpenSSL-on-Windows.md-3-generate-the-self-signed-certificate-server-cert-pem">3. Generate the Self-Signed Certificate (server-cert.pem)</h4><p id="2035172722#xdss7y_198">Finally, generate a self-signed certificate using the CSR and the private key:</p><div class="detached code-block" id="2035172722#xdss7y_199"><pre><code class="language-bash">openssl x509 -req -in server-csr.pem -signkey server-key.pem -out server-cert.pem -days 365</code></pre></div><p id="2035172722#xdss7y_200">This will create the <span class="inline-code" id="2035172722#xdss7y_202">server-cert.pem</span> file, which is valid for 365 days.</p></section></section><section><h3 id="2035172722#step-4-use-the-certificates-in-your-node-js-application" data-toc="step-4-use-the-certificates-in-your-node-js-application#Install-OpenSSL-on-Windows.md-step-4-use-the-certificates-in-your-node-js-application">Step 4: Use the Certificates in Your Node.js Application</h3><p id="2035172722#xdss7y_203">You should now have the following files in your working directory:</p><ul class="list" id="2035172722#xdss7y_204" start="1"><li class="list-item" id="2035172722#xdss7y_206"><p><span class="inline-code" id="2035172722#xdss7y_208">server-key.pem</span>: The private key.</p></li><li class="list-item" id="2035172722#xdss7y_207"><p><span class="inline-code" id="2035172722#xdss7y_209">server-cert.pem</span>: The self-signed certificate.</p></li></ul><p id="2035172722#xdss7y_205">These files can be used in your Node.js HTTPS and HTTP/2 applications.</p></section><section><h3 id="2035172722#final-notes" data-toc="final-notes#Install-OpenSSL-on-Windows.md-final-notes">Final Notes:</h3><ul class="list" id="2035172722#xdss7y_210" start="1"><li class="list-item" id="2035172722#xdss7y_211"><p>You can use these certificates for local development. When using them in a browser, it will show a security warning because the certificates are self-signed and not trusted by default.</p></li><li class="list-item" id="2035172722#xdss7y_212"><p>In production, you'll need to obtain SSL certificates from a trusted Certificate Authority (CA), such as Let's Encrypt or a paid provider like DigiCert or GlobalSign.</p></li></ul></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="343909646">8. File System Module</h1><p id="343909646#z51ikn6_3">Node.js provides a built-in module called <span class="inline-code" id="343909646#z51ikn6_16">fs</span> (File System), which allows you to interact with the file system on your server. With this module, you can perform various file operations such as reading, writing, updating, deleting, and renaming files. You can also use Node.js as a file server to handle file requests from clients.</p><section><h2 id="343909646#node-js-as-a-file-server" data-toc="node-js-as-a-file-server#8-File-System-Module.md-node-js-as-a-file-server">Node.js as a File Server</h2><p id="343909646#z51ikn6_17">Using Node.js as a file server, you can read and serve files to users, or allow file manipulations like creating, updating, deleting, or renaming files. The <span class="inline-code" id="343909646#z51ikn6_19">fs</span> module provides both asynchronous and synchronous methods for these operations. It's important to use asynchronous methods whenever possible to prevent blocking the event loop.</p><p id="343909646#z51ikn6_18">Below are some common operations you can perform with the <span class="inline-code" id="343909646#z51ikn6_20">fs</span> module:</p></section><section><h2 id="343909646#i-read-files" data-toc="i-read-files#8-File-System-Module.md-i-read-files">i. Read Files</h2><p id="343909646#z51ikn6_21">To read the contents of a file, you can use the <span class="inline-code" id="343909646#z51ikn6_23">fs.readFile()</span> method asynchronously. This method reads the entire file into memory.</p><section><h3 id="343909646#example-reading-a-file-asynchronously" data-toc="example-reading-a-file-asynchronously#8-File-System-Module.md-example-reading-a-file-asynchronously">Example: Reading a File Asynchronously</h3><div class="detached code-block" id="343909646#z51ikn6_24"><pre><code class="language-javascript">import * as fs from 'fs';
import * as http from 'http';
import * as path from 'path';

// Define the path to the data directory and the file
const dataDir = path.join(__dirname, 'data');
const filePath = path.join(dataDir, 'example.txt');

// Ensure the data directory exists
if (!fs.existsSync(dataDir)) {
  fs.mkdirSync(dataDir, { recursive: true });
  console.log('Data directory created.');
}

// Example: Serving a file using Node.js
const server = http.createServer((req, res) =&gt; {
  // Reading the requested file asynchronously
  fs.readFile(filePath, 'utf-8', (err, data) =&gt; {
    if (err) {
      res.writeHead(404, { 'Content-Type': 'text/plain' });
      res.end('File not found');
    } else {
      res.writeHead(200, { 'Content-Type': 'text/plain' });
      res.end(data);
    }
  });
});

// Listen on port 3000
server.listen(3000, () =&gt; {
  console.log('Server is running at http://localhost:3000');
});</code></pre></div><section><h4 id="343909646#explanation" data-toc="explanation#8-File-System-Module.md-explanation">Explanation:</h4><ul class="list" id="343909646#z51ikn6_27" start="1"><li class="list-item" id="343909646#z51ikn6_28"><p><span class="control" id="343909646#z51ikn6_31"><span class="inline-code" id="343909646#z51ikn6_33">fs.existsSync()</span></span>: Checks if the <span class="inline-code" id="343909646#z51ikn6_32">data</span> directory exists.</p></li><li class="list-item" id="343909646#z51ikn6_29"><p><span class="control" id="343909646#z51ikn6_34"><span class="inline-code" id="343909646#z51ikn6_36">fs.mkdirSync()</span></span>: Creates the <span class="inline-code" id="343909646#z51ikn6_35">data</span> directory if it doesn't exist.</p></li><li class="list-item" id="343909646#z51ikn6_30"><p><span class="control" id="343909646#z51ikn6_37"><span class="inline-code" id="343909646#z51ikn6_38">path.join()</span></span>: Constructs the file paths in a cross-platform manner.</p></li></ul></section><section><h4 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h4><ul class="list" id="343909646#z51ikn6_39" start="1"><li class="list-item" id="343909646#z51ikn6_40"><p>Serve files like HTML, CSS, JavaScript, or other resources to clients in a web server.</p></li></ul></section></section></section><section><h2 id="343909646#ii-create-files" data-toc="ii-create-files#8-File-System-Module.md-ii-create-files">ii. Create Files</h2><p id="343909646#z51ikn6_41">You can create new files in Node.js using <span class="inline-code" id="343909646#z51ikn6_44">fs.writeFile()</span> or <span class="inline-code" id="343909646#z51ikn6_45">fs.appendFile()</span>. The <span class="inline-code" id="343909646#z51ikn6_46">writeFile()</span> method creates a new file and writes content to it, overwriting the file if it already exists, while <span class="inline-code" id="343909646#z51ikn6_47">appendFile()</span> adds data to the end of an existing file or creates the file if it doesn&rsquo;t exist.</p><section><h3 id="343909646#example-creating-a-new-file" data-toc="example-creating-a-new-file#8-File-System-Module.md-example-creating-a-new-file">Example: Creating a New File</h3><div class="detached code-block" id="343909646#z51ikn6_48"><pre><code class="language-javascript">import * as fs from 'fs';
import * as path from 'path';

const dataDir = path.join(__dirname, 'data');
const filePath = path.join(dataDir, 'newfile.txt');

// Ensure the data directory exists
if (!fs.existsSync(dataDir)) {
  fs.mkdirSync(dataDir, { recursive: true });
}

// Creating and writing to a file
fs.writeFile(filePath, 'Hello, this is a newly created file!', (err) =&gt; {
  if (err) throw err;
  console.log('File created and written successfully');
});</code></pre></div></section><section><h3 id="343909646#example-appending-data-to-a-file" data-toc="example-appending-data-to-a-file#8-File-System-Module.md-example-appending-data-to-a-file">Example: Appending Data to a File</h3><div class="detached code-block" id="343909646#z51ikn6_49"><pre><code class="language-javascript">import * as fs from 'fs';
import * as path from 'path';

const dataDir = path.join(__dirname, 'data');
const filePath = path.join(dataDir, 'newfile.txt');

// Appending data to an existing file
fs.appendFile(filePath, '\nAppending more content to the file.', (err) =&gt; {
  if (err) throw err;
  console.log('Content appended successfully');
});</code></pre></div><section><h4 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h4><ul class="list" id="343909646#z51ikn6_51" start="1"><li class="list-item" id="343909646#z51ikn6_52"><p>Creating new files for logging, storing data, or dynamically generating files.</p></li></ul></section></section></section><section><h2 id="343909646#iii-update-files" data-toc="iii-update-files#8-File-System-Module.md-iii-update-files">iii. Update Files</h2><p id="343909646#z51ikn6_53">You can update a file by either writing to it again (overwriting the content) using <span class="inline-code" id="343909646#z51ikn6_56">fs.writeFile()</span> or appending new content to the existing file using <span class="inline-code" id="343909646#z51ikn6_57">fs.appendFile()</span>.</p><section><h3 id="343909646#example-overwriting-a-file" data-toc="example-overwriting-a-file#8-File-System-Module.md-example-overwriting-a-file">Example: Overwriting a File</h3><div class="detached code-block" id="343909646#z51ikn6_58"><pre><code class="language-javascript">import * as fs from 'fs';
import * as path from 'path';

const dataDir = path.join(__dirname, 'data');
const filePath = path.join(dataDir, 'newfile.txt');

// Overwriting the content of a file
fs.writeFile(filePath, 'This content replaces the old one.', (err) =&gt; {
  if (err) throw err;
  console.log('File content overwritten successfully');
});</code></pre></div></section><section><h3 id="343909646#example-appending-to-a-file" data-toc="example-appending-to-a-file#8-File-System-Module.md-example-appending-to-a-file">Example: Appending to a File</h3><div class="detached code-block" id="343909646#z51ikn6_59"><pre><code class="language-javascript">import * as fs from 'fs';
import * as path from 'path';

const dataDir = path.join(__dirname, 'data');
const filePath = path.join(dataDir, 'newfile.txt');

// Appending content to a file
fs.appendFile(filePath, '\nMore content being added.', (err) =&gt; {
  if (err) throw err;
  console.log('File updated with new content');
});</code></pre></div><section><h4 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h4><ul class="list" id="343909646#z51ikn6_61" start="1"><li class="list-item" id="343909646#z51ikn6_62"><p>Updating logs, modifying data files, or appending new data to reports.</p></li></ul></section></section></section><section><h2 id="343909646#iv-delete-files" data-toc="iv-delete-files#8-File-System-Module.md-iv-delete-files">iv. Delete Files</h2><p id="343909646#z51ikn6_63">You can delete files using the <span class="inline-code" id="343909646#z51ikn6_65">fs.unlink()</span> method.</p><section><h3 id="343909646#example-deleting-a-file" data-toc="example-deleting-a-file#8-File-System-Module.md-example-deleting-a-file">Example: Deleting a File</h3><div class="detached code-block" id="343909646#z51ikn6_66"><pre><code class="language-javascript">import * as fs from 'fs';
import * as path from 'path';

const dataDir = path.join(__dirname, 'data');
const filePath = path.join(dataDir, 'newfile.txt');

// Deleting a file
fs.unlink(filePath, (err) =&gt; {
  if (err) throw err;
  console.log('File deleted successfully');
});</code></pre></div><section><h4 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h4><ul class="list" id="343909646#z51ikn6_68" start="1"><li class="list-item" id="343909646#z51ikn6_69"><p>Removing temporary files or cleaning up old data files that are no longer needed.</p></li></ul></section></section></section><section><h2 id="343909646#v-rename-files" data-toc="v-rename-files#8-File-System-Module.md-v-rename-files">v. Rename Files</h2><p id="343909646#z51ikn6_70">To rename a file, use the <span class="inline-code" id="343909646#z51ikn6_73">fs.rename()</span> method.</p><section><h3 id="343909646#example-renaming-a-file" data-toc="example-renaming-a-file#8-File-System-Module.md-example-renaming-a-file">Example: Renaming a File</h3><div class="detached code-block" id="343909646#z51ikn6_74"><pre><code class="language-javascript">import * as fs from 'fs';
import * as path from 'path';

const dataDir = path.join(__dirname, 'data');
const oldFilePath = path.join(dataDir, 'oldfile.txt');
const newFilePath = path.join(dataDir, 'newfile.txt');

// Renaming a file
fs.rename(oldFilePath, newFilePath, (err) =&gt; {
  if (err) throw err;
  console.log('File renamed successfully');
});</code></pre></div><section><h4 id="343909646#use-case" data-toc="use-case#8-File-System-Module.md-use-case">Use Case:</h4><ul class="list" id="343909646#z51ikn6_76" start="1"><li class="list-item" id="343909646#z51ikn6_78"><p>Organizing files, managing file versions, or moving files within the same directory.</p></li></ul></section></section><section><h3 id="343909646#complete-example-node-js-https-file-server-with-crud-operations" data-toc="complete-example-node-js-https-file-server-with-crud-operations#8-File-System-Module.md-complete-example-node-js-https-file-server-with-crud-operations">Complete Example: Node.js HTTPS File Server with CRUD Operations</h3><p id="343909646#z51ikn6_79">Below is an enhanced example that:</p><ul class="list" id="343909646#z51ikn6_80" start="1"><li class="list-item" id="343909646#z51ikn6_86"><p>Reads and writes files from the <span class="inline-code" id="343909646#z51ikn6_90">./src/data</span> folder.</p></li><li class="list-item" id="343909646#z51ikn6_87"><p>Creates the <span class="inline-code" id="343909646#z51ikn6_91">data</span> folder when the server starts if it doesn't exist.</p></li><li class="list-item" id="343909646#z51ikn6_88"><p>Provides endpoints for all CRUD operations.</p></li><li class="list-item" id="343909646#z51ikn6_89"><p>Demonstrates how to interact with the server using HTTP methods.</p></li></ul><section><h4 id="343909646#project-structure" data-toc="project-structure#8-File-System-Module.md-project-structure">Project Structure</h4><div class="detached code-block" id="343909646#z51ikn6_92"><pre><code class="language-none">HTTPS/
├── src/
│   ├── data/
│   └── index.ts
├── package.json
├── tsconfig.json
└── node_modules/</code></pre></div></section><section><h4 id="343909646#step-by-step-implementation" data-toc="step-by-step-implementation#8-File-System-Module.md-step-by-step-implementation">Step-by-Step Implementation</h4><ol class="list list-decimal" id="343909646#z51ikn6_93" type="1" start="1"><li class="list-item" id="343909646#z51ikn6_94"><p id="343909646#z51ikn6_98"><span class="control" id="343909646#z51ikn6_101">Initialize the Project</span></p><p id="343909646#z51ikn6_99">Ensure you have initialized your project and installed necessary dependencies.</p><div class="detached code-block" id="343909646#z51ikn6_100"><pre><code class="language-bash">npm init -y
npm install typescript tsx --save-dev</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_95"><p id="343909646#z51ikn6_102"><span class="control" id="343909646#z51ikn6_105">Configure TypeScript (<span class="inline-code" id="343909646#z51ikn6_106">tsconfig.json</span>)</span></p><p id="343909646#z51ikn6_103">Create a <span class="inline-code" id="343909646#z51ikn6_107">tsconfig.json</span> in your project root with the following content:</p><div class="detached code-block" id="343909646#z51ikn6_104"><pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES2020&quot;,
    &quot;module&quot;: &quot;ESNext&quot;,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;outDir&quot;: &quot;./dist&quot;,
    &quot;rootDir&quot;: &quot;./src&quot;,
    &quot;strict&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;forceConsistentCasingInFileNames&quot;: true,
    &quot;skipLibCheck&quot;: true
  },
  &quot;include&quot;: [&quot;src&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;]
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_96"><p id="343909646#z51ikn6_108"><span class="control" id="343909646#z51ikn6_111">Update <span class="inline-code" id="343909646#z51ikn6_112">package.json</span> Scripts</span></p><p id="343909646#z51ikn6_109">Add the following scripts to your <span class="inline-code" id="343909646#z51ikn6_113">package.json</span>:</p><div class="detached code-block" id="343909646#z51ikn6_110"><pre><code class="language-json">{
  &quot;name&quot;: &quot;https-file-server&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;type&quot;: &quot;module&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;tsx src/index.ts&quot;,
    &quot;build&quot;: &quot;tsc&quot;,
    &quot;serve&quot;: &quot;node dist/index.js&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;typescript&quot;: &quot;^4.0.0&quot;,
    &quot;tsx&quot;: &quot;^4.19.1&quot;
  }
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_97"><p id="343909646#z51ikn6_114"><span class="control" id="343909646#z51ikn6_116">Create the HTTPS Server (<span class="inline-code" id="343909646#z51ikn6_117">src/index.ts</span>)</span></p><div class="detached code-block" id="343909646#z51ikn6_115"><pre><code class="language-ts">import * as https from 'https';
import * as fs from 'fs';
import * as path from 'path';
import { IncomingMessage, ServerResponse } from 'http';
import { URL } from 'url';

// Define the path to the data directory
const dataDir = path.join(__dirname, 'data');

// Ensure the data directory exists
if (!fs.existsSync(dataDir)) {
  fs.mkdirSync(dataDir, { recursive: true });
  console.log('Data directory created.');
}

// Define SSL certificates
const options = {
  key: fs.readFileSync(path.join(__dirname, '..', 'server-key.pem')),
  cert: fs.readFileSync(path.join(__dirname, '..', 'server-cert.pem'))
};

// Create HTTPS server
const server = https.createServer(options, (req: IncomingMessage, res: ServerResponse) =&gt; {
  const parsedUrl = new URL(req.url || '', `https://${req.headers.host}`);
  const pathname = parsedUrl.pathname;

  // Set CORS headers (optional, for API usage)
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

  // Handle preflight requests
  if (req.method === 'OPTIONS') {
    res.writeHead(204);
    res.end();
    return;
  }

  // Routing
  if (pathname === '/' &amp;&amp; req.method === 'GET') {
    // Read the empty file
    const filePath = path.join(dataDir, 'data.txt');
    fs.readFile(filePath, 'utf-8', (err, data) =&gt; {
      if (err) {
        // If file doesn't exist, send an empty response
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ message: 'File is empty or does not exist.' }));
      } else {
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ content: data }));
      }
    });
  } else if (pathname === '/create' &amp;&amp; req.method === 'POST') {
    // Create or overwrite the file with posted data
    let body = '';
    req.on('data', chunk =&gt; {
      body += chunk.toString();
    });
    req.on('end', () =&gt; {
      const filePath = path.join(dataDir, 'data.txt');
      fs.writeFile(filePath, body, (err) =&gt; {
        if (err) {
          res.writeHead(500, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ error: 'Failed to write data.' }));
        } else {
          res.writeHead(201, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ message: 'Data saved successfully.' }));
        }
      });
    });
  } else if (pathname === '/read' &amp;&amp; req.method === 'GET') {
    // Read the file with data
    const filePath = path.join(dataDir, 'data.txt');
    fs.readFile(filePath, 'utf-8', (err, data) =&gt; {
      if (err) {
        res.writeHead(404, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ error: 'File not found.' }));
      } else {
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ content: data }));
      }
    });
  } else if (pathname === '/update' &amp;&amp; req.method === 'PUT') {
    // Update the file by appending data
    let body = '';
    req.on('data', chunk =&gt; {
      body += chunk.toString();
    });
    req.on('end', () =&gt; {
      const filePath = path.join(dataDir, 'data.txt');
      fs.appendFile(filePath, body, (err) =&gt; {
        if (err) {
          res.writeHead(500, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ error: 'Failed to update data.' }));
        } else {
          res.writeHead(200, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ message: 'Data updated successfully.' }));
        }
      });
    });
  } else if (pathname === '/delete' &amp;&amp; req.method === 'DELETE') {
    // Delete the file
    const filePath = path.join(dataDir, 'data.txt');
    fs.unlink(filePath, (err) =&gt; {
      if (err) {
        res.writeHead(404, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ error: 'File not found.' }));
      } else {
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ message: 'File deleted successfully.' }));
      }
    });
  } else if (pathname === '/rename' &amp;&amp; req.method === 'PUT') {
    // Rename the file
    const oldPath = path.join(dataDir, 'data.txt');
    const newPath = path.join(dataDir, 'renamedData.txt');
    fs.rename(oldPath, newPath, (err) =&gt; {
      if (err) {
        res.writeHead(500, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ error: 'Failed to rename file.' }));
      } else {
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ message: 'File renamed successfully.' }));
      }
    });
  } else {
    res.writeHead(404, { 'Content-Type': 'application/json' });
    res.end(JSON.stringify({ error: 'Route not found.' }));
  }
});

// Listen on port 8443 (using a non-privileged port for development)
const PORT = process.env.PORT || 8443;
server.listen(PORT, () =&gt; {
  console.log(`HTTPS server is running on https://localhost:${PORT}`);
});</code></pre></div></li></ol></section><section><h4 id="343909646#explanation" data-toc="explanation#8-File-System-Module.md-explanation">Explanation:</h4><ol class="list list-decimal" id="343909646#z51ikn6_118" type="1" start="1"><li class="list-item" id="343909646#z51ikn6_119"><p id="343909646#z51ikn6_124"><span class="control" id="343909646#z51ikn6_126">Directory Setup:</span></p><ul class="list" id="343909646#z51ikn6_125" start="1"><li class="list-item" id="343909646#z51ikn6_127"><p><span class="control" id="343909646#z51ikn6_129"><span class="inline-code" id="343909646#z51ikn6_132">dataDir</span></span>: Specifies the path to the <span class="inline-code" id="343909646#z51ikn6_130">data</span> folder within <span class="inline-code" id="343909646#z51ikn6_131">./src/data</span>.</p></li><li class="list-item" id="343909646#z51ikn6_128"><p><span class="control" id="343909646#z51ikn6_133">Directory Creation:</span> Checks if the <span class="inline-code" id="343909646#z51ikn6_134">data</span> directory exists; if not, it creates it using <span class="inline-code" id="343909646#z51ikn6_135">fs.mkdirSync()</span>.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_120"><p id="343909646#z51ikn6_136"><span class="control" id="343909646#z51ikn6_138">SSL Certificates:</span></p><ul class="list" id="343909646#z51ikn6_137" start="1"><li class="list-item" id="343909646#z51ikn6_139"><p>Ensure that your <span class="inline-code" id="343909646#z51ikn6_141">server-key.pem</span> and <span class="inline-code" id="343909646#z51ikn6_142">server-cert.pem</span> files are located in the project root (one level above <span class="inline-code" id="343909646#z51ikn6_143">src</span>).</p></li><li class="list-item" id="343909646#z51ikn6_140"><p>Adjust the paths accordingly if your certificates are stored elsewhere.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_121"><p id="343909646#z51ikn6_144"><span class="control" id="343909646#z51ikn6_146">Server Routing:</span></p><ul class="list" id="343909646#z51ikn6_145" start="1"><li class="list-item" id="343909646#z51ikn6_147"><p><span class="control" id="343909646#z51ikn6_153"><span class="inline-code" id="343909646#z51ikn6_155">/</span> (GET):</span> Reads and returns the content of an empty or non-existent <span class="inline-code" id="343909646#z51ikn6_154">data.txt</span> file.</p></li><li class="list-item" id="343909646#z51ikn6_148"><p><span class="control" id="343909646#z51ikn6_156"><span class="inline-code" id="343909646#z51ikn6_158">/create</span> (POST):</span> Receives data in the request body and saves it to <span class="inline-code" id="343909646#z51ikn6_157">data.txt</span>.</p></li><li class="list-item" id="343909646#z51ikn6_149"><p><span class="control" id="343909646#z51ikn6_159"><span class="inline-code" id="343909646#z51ikn6_161">/read</span> (GET):</span> Reads and returns the content of <span class="inline-code" id="343909646#z51ikn6_160">data.txt</span>.</p></li><li class="list-item" id="343909646#z51ikn6_150"><p><span class="control" id="343909646#z51ikn6_162"><span class="inline-code" id="343909646#z51ikn6_164">/update</span> (PUT):</span> Appends data to <span class="inline-code" id="343909646#z51ikn6_163">data.txt</span>.</p></li><li class="list-item" id="343909646#z51ikn6_151"><p><span class="control" id="343909646#z51ikn6_165"><span class="inline-code" id="343909646#z51ikn6_167">/delete</span> (DELETE):</span> Deletes <span class="inline-code" id="343909646#z51ikn6_166">data.txt</span>.</p></li><li class="list-item" id="343909646#z51ikn6_152"><p><span class="control" id="343909646#z51ikn6_168"><span class="inline-code" id="343909646#z51ikn6_171">/rename</span> (PUT):</span> Renames <span class="inline-code" id="343909646#z51ikn6_169">data.txt</span> to <span class="inline-code" id="343909646#z51ikn6_170">renamedData.txt</span>.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_122"><p id="343909646#z51ikn6_172"><span class="control" id="343909646#z51ikn6_174">CORS Headers:</span></p><ul class="list" id="343909646#z51ikn6_173" start="1"><li class="list-item" id="343909646#z51ikn6_175"><p>Added CORS headers to allow cross-origin requests, which is useful if you interact with the API from different origins.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_123"><p id="343909646#z51ikn6_176"><span class="control" id="343909646#z51ikn6_178">Port Configuration:</span></p><ul class="list" id="343909646#z51ikn6_177" start="1"><li class="list-item" id="343909646#z51ikn6_179"><p>The server listens on port <span class="inline-code" id="343909646#z51ikn6_180">8443</span> by default to avoid permission issues. You can change this by setting the <span class="inline-code" id="343909646#z51ikn6_181">PORT</span> environment variable.</p></li></ul></li></ol></section><section><h4 id="343909646#interacting-with-the-server" data-toc="interacting-with-the-server#8-File-System-Module.md-interacting-with-the-server">Interacting with the Server</h4><p id="343909646#z51ikn6_182">You can interact with the server using tools like <span class="control" id="343909646#z51ikn6_184">curl</span>, <span class="control" id="343909646#z51ikn6_185">Postman</span>, or any HTTP client.</p><ol class="list list-decimal" id="343909646#z51ikn6_183" type="1" start="1"><li class="list-item" id="343909646#z51ikn6_186"><p id="343909646#z51ikn6_193"><span class="control" id="343909646#z51ikn6_198">Read the Empty File (<span class="inline-code" id="343909646#z51ikn6_199">/</span> Endpoint)</span></p><p id="343909646#z51ikn6_194"><span class="control" id="343909646#z51ikn6_200">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_195"><pre><code class="language-bash">curl -k https://localhost:8443/</code></pre></div><p id="343909646#z51ikn6_196"><span class="control" id="343909646#z51ikn6_201">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_197"><pre><code class="language-json">{
  &quot;message&quot;: &quot;File is empty or does not exist.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_187"><p id="343909646#z51ikn6_202"><span class="control" id="343909646#z51ikn6_207">Create/Overwrite the File (<span class="inline-code" id="343909646#z51ikn6_208">/create</span> Endpoint)</span></p><p id="343909646#z51ikn6_203"><span class="control" id="343909646#z51ikn6_209">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_204"><pre><code class="language-bash">curl -k -X POST https://localhost:8443/create -d &quot;This is the initial content of the file.&quot;</code></pre></div><p id="343909646#z51ikn6_205"><span class="control" id="343909646#z51ikn6_210">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_206"><pre><code class="language-json">{
  &quot;message&quot;: &quot;Data saved successfully.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_188"><p id="343909646#z51ikn6_211"><span class="control" id="343909646#z51ikn6_216">Read the File with Data (<span class="inline-code" id="343909646#z51ikn6_217">/read</span> Endpoint)</span></p><p id="343909646#z51ikn6_212"><span class="control" id="343909646#z51ikn6_218">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_213"><pre><code class="language-bash">curl -k https://localhost:8443/read</code></pre></div><p id="343909646#z51ikn6_214"><span class="control" id="343909646#z51ikn6_219">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_215"><pre><code class="language-json">{
  &quot;content&quot;: &quot;This is the initial content of the file.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_189"><p id="343909646#z51ikn6_220"><span class="control" id="343909646#z51ikn6_225">Update the File by Appending Data (<span class="inline-code" id="343909646#z51ikn6_226">/update</span> Endpoint)</span></p><p id="343909646#z51ikn6_221"><span class="control" id="343909646#z51ikn6_227">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_222"><pre><code class="language-bash">curl -k -X PUT https://localhost:8443/update -d &quot; Appended content.&quot;</code></pre></div><p id="343909646#z51ikn6_223"><span class="control" id="343909646#z51ikn6_228">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_224"><pre><code class="language-json">{
  &quot;message&quot;: &quot;Data updated successfully.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_190"><p id="343909646#z51ikn6_229"><span class="control" id="343909646#z51ikn6_234">Read the Updated File (<span class="inline-code" id="343909646#z51ikn6_235">/read</span> Endpoint)</span></p><p id="343909646#z51ikn6_230"><span class="control" id="343909646#z51ikn6_236">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_231"><pre><code class="language-bash">curl -k https://localhost:8443/read</code></pre></div><p id="343909646#z51ikn6_232"><span class="control" id="343909646#z51ikn6_237">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_233"><pre><code class="language-json">{
  &quot;content&quot;: &quot;This is the initial content of the file. Appended content.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_191"><p id="343909646#z51ikn6_238"><span class="control" id="343909646#z51ikn6_243">Delete the File (<span class="inline-code" id="343909646#z51ikn6_244">/delete</span> Endpoint)</span></p><p id="343909646#z51ikn6_239"><span class="control" id="343909646#z51ikn6_245">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_240"><pre><code class="language-bash">curl -k -X DELETE https://localhost:8443/delete</code></pre></div><p id="343909646#z51ikn6_241"><span class="control" id="343909646#z51ikn6_246">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_242"><pre><code class="language-json">{
  &quot;message&quot;: &quot;File deleted successfully.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_192"><p id="343909646#z51ikn6_247"><span class="control" id="343909646#z51ikn6_255">Rename the File (<span class="inline-code" id="343909646#z51ikn6_256">/rename</span> Endpoint)</span></p><p id="343909646#z51ikn6_248"><span class="control" id="343909646#z51ikn6_257">Note:</span> Ensure that <span class="inline-code" id="343909646#z51ikn6_258">data.txt</span> exists before attempting to rename it.</p><p id="343909646#z51ikn6_249"><span class="control" id="343909646#z51ikn6_259">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_250"><pre><code class="language-bash">curl -k -X PUT https://localhost:8443/rename</code></pre></div><p id="343909646#z51ikn6_251"><span class="control" id="343909646#z51ikn6_260">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_252"><pre><code class="language-json">{
  &quot;message&quot;: &quot;File renamed successfully.&quot;
}</code></pre></div><p id="343909646#z51ikn6_253"><span class="control" id="343909646#z51ikn6_261">Post-Rename Read:</span></p><p id="343909646#z51ikn6_254">After renaming, attempting to read <span class="inline-code" id="343909646#z51ikn6_262">data.txt</span> will result in a 404 error unless you update the endpoints accordingly.</p></li></ol></section><section><h4 id="343909646#security-considerations" data-toc="security-considerations#8-File-System-Module.md-security-considerations">Security Considerations</h4><ul class="list" id="343909646#z51ikn6_263" start="1"><li class="list-item" id="343909646#z51ikn6_265"><p id="343909646#z51ikn6_268"><span class="control" id="343909646#z51ikn6_269">Self-Signed Certificates:</span> The above setup uses self-signed certificates, which are suitable for development and testing. Browsers will display a security warning when accessing the server. For production environments, obtain certificates from a trusted Certificate Authority (CA) like Let's Encrypt (<a href="https://letsencrypt.org/">https://letsencrypt.org/</a>).</p></li><li class="list-item" id="343909646#z51ikn6_266"><p id="343909646#z51ikn6_271"><span class="control" id="343909646#z51ikn6_272">Data Validation:</span> The current implementation does not include data validation. In a production setting, validate and sanitize incoming data to prevent security vulnerabilities.</p></li><li class="list-item" id="343909646#z51ikn6_267"><p id="343909646#z51ikn6_273"><span class="control" id="343909646#z51ikn6_274">Error Handling:</span> Enhanced error handling can be implemented to provide more detailed responses and logging.</p></li></ul></section></section></section><section><h2 id="343909646#additional-crud-operations-example" data-toc="additional-crud-operations-example#8-File-System-Module.md-additional-crud-operations-example">Additional CRUD Operations Example</h2><p id="343909646#z51ikn6_275">To further expand the server's capabilities, you can add more granular CRUD operations based on file names or manage multiple files within the <span class="inline-code" id="343909646#z51ikn6_277">data</span> directory.</p><section><h3 id="343909646#example-crud-operations-with-dynamic-file-names" data-toc="example-crud-operations-with-dynamic-file-names#8-File-System-Module.md-example-crud-operations-with-dynamic-file-names">Example: CRUD Operations with Dynamic File Names</h3><div class="detached code-block" id="343909646#z51ikn6_278"><pre><code class="language-ts">import * as https from 'https';
import * as fs from 'fs';
import * as path from 'path';
import { IncomingMessage, ServerResponse } from 'http';
import { URL } from 'url';

// Define the path to the data directory
const dataDir = path.join(__dirname, 'data');

// Ensure the data directory exists
if (!fs.existsSync(dataDir)) {
  fs.mkdirSync(dataDir, { recursive: true });
  console.log('Data directory created.');
}

// Define SSL certificates
const options = {
  key: fs.readFileSync(path.join(__dirname, '..', 'server-key.pem')),
  cert: fs.readFileSync(path.join(__dirname, '..', 'server-cert.pem'))
};

// Utility function to parse JSON body
const parseRequestBody = (req: IncomingMessage): Promise&lt;any&gt; =&gt; {
  return new Promise((resolve, reject) =&gt; {
    let body = '';
    req.on('data', chunk =&gt; {
      body += chunk.toString();
    });
    req.on('end', () =&gt; {
      try {
        const parsed = JSON.parse(body);
        resolve(parsed);
      } catch (err) {
        reject(err);
      }
    });
  });
};

// Create HTTPS server
const server = https.createServer(options, async (req: IncomingMessage, res: ServerResponse) =&gt; {
  const parsedUrl = new URL(req.url || '', `https://${req.headers.host}`);
  const pathname = parsedUrl.pathname;
  const method = req.method;

  // Set CORS headers (optional, for API usage)
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

  // Handle preflight requests
  if (method === 'OPTIONS') {
    res.writeHead(204);
    res.end();
    return;
  }

  // Route: /file?name=filename.txt
  const fileName = parsedUrl.searchParams.get('name');
  if (!fileName) {
    res.writeHead(400, { 'Content-Type': 'application/json' });
    res.end(JSON.stringify({ error: 'File name is required as a query parameter (e.g., ?name=filename.txt)' }));
    return;
  }

  const filePath = path.join(dataDir, fileName);

  // Routing based on method
  switch (method) {
    case 'GET':
      // Read File
      fs.readFile(filePath, 'utf-8', (err, data) =&gt; {
        if (err) {
          res.writeHead(404, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ error: 'File not found.' }));
        } else {
          res.writeHead(200, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ content: data }));
        }
      });
      break;

    case 'POST':
      // Create File
      try {
        const body = await parseRequestBody(req);
        fs.writeFile(filePath, body.content, (err) =&gt; {
          if (err) {
            res.writeHead(500, { 'Content-Type': 'application/json' });
            res.end(JSON.stringify({ error: 'Failed to write data.' }));
          } else {
            res.writeHead(201, { 'Content-Type': 'application/json' });
            res.end(JSON.stringify({ message: 'Data saved successfully.' }));
          }
        });
      } catch (error) {
        res.writeHead(400, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ error: 'Invalid JSON data.' }));
      }
      break;

    case 'PUT':
      // Update File by Appending
      try {
        const body = await parseRequestBody(req);
        fs.appendFile(filePath, body.content, (err) =&gt; {
          if (err) {
            res.writeHead(500, { 'Content-Type': 'application/json' });
            res.end(JSON.stringify({ error: 'Failed to update data.' }));
          } else {
            res.writeHead(200, { 'Content-Type': 'application/json' });
            res.end(JSON.stringify({ message: 'Data updated successfully.' }));
          }
        });
      } catch (error) {
        res.writeHead(400, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ error: 'Invalid JSON data.' }));
      }
      break;

    case 'DELETE':
      // Delete File
      fs.unlink(filePath, (err) =&gt; {
        if (err) {
          res.writeHead(404, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ error: 'File not found.' }));
        } else {
          res.writeHead(200, { 'Content-Type': 'application/json' });
          res.end(JSON.stringify({ message: 'File deleted successfully.' }));
        }
      });
      break;

    default:
      res.writeHead(405, { 'Content-Type': 'application/json' });
      res.end(JSON.stringify({ error: 'Method not allowed.' }));
      break;
  }
});

// Listen on port 8443 (using a non-privileged port for development)
const PORT = process.env.PORT || 8443;
server.listen(PORT, () =&gt; {
  console.log(`HTTPS server is running on https://localhost:${PORT}`);
});</code></pre></div><section><h4 id="343909646#explanation" data-toc="explanation#8-File-System-Module.md-explanation">Explanation:</h4><ol class="list list-decimal" id="343909646#z51ikn6_282" type="1" start="1"><li class="list-item" id="343909646#z51ikn6_283"><p id="343909646#z51ikn6_288"><span class="control" id="343909646#z51ikn6_290">Dynamic File Handling:</span></p><ul class="list" id="343909646#z51ikn6_289" start="1"><li class="list-item" id="343909646#z51ikn6_291"><p><span class="control" id="343909646#z51ikn6_292">Query Parameter:</span> The server expects a <span class="inline-code" id="343909646#z51ikn6_293">name</span> query parameter to specify the file name (e.g., <span class="inline-code" id="343909646#z51ikn6_294">?name=example.txt</span>).</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_284"><p id="343909646#z51ikn6_295"><span class="control" id="343909646#z51ikn6_297">HTTP Methods:</span></p><ul class="list" id="343909646#z51ikn6_296" start="1"><li class="list-item" id="343909646#z51ikn6_298"><p><span class="control" id="343909646#z51ikn6_302">GET:</span> Reads the specified file.</p></li><li class="list-item" id="343909646#z51ikn6_299"><p><span class="control" id="343909646#z51ikn6_303">POST:</span> Creates a new file with the provided content.</p></li><li class="list-item" id="343909646#z51ikn6_300"><p><span class="control" id="343909646#z51ikn6_304">PUT:</span> Appends content to the existing file.</p></li><li class="list-item" id="343909646#z51ikn6_301"><p><span class="control" id="343909646#z51ikn6_305">DELETE:</span> Deletes the specified file.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_285"><p id="343909646#z51ikn6_306"><span class="control" id="343909646#z51ikn6_308">Data Directory:</span></p><ul class="list" id="343909646#z51ikn6_307" start="1"><li class="list-item" id="343909646#z51ikn6_309"><p>Ensures the <span class="inline-code" id="343909646#z51ikn6_310">./src/data</span> directory exists upon server startup.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_286"><p id="343909646#z51ikn6_311"><span class="control" id="343909646#z51ikn6_313">JSON Parsing:</span></p><ul class="list" id="343909646#z51ikn6_312" start="1"><li class="list-item" id="343909646#z51ikn6_314"><p>Implements a utility function <span class="inline-code" id="343909646#z51ikn6_315">parseRequestBody</span> to parse JSON data from the request body.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_287"><p id="343909646#z51ikn6_316"><span class="control" id="343909646#z51ikn6_318">CORS Support:</span></p><ul class="list" id="343909646#z51ikn6_317" start="1"><li class="list-item" id="343909646#z51ikn6_319"><p>Allows cross-origin requests, which is beneficial for API consumption from different domains.</p></li></ul></li></ol></section><section><h4 id="343909646#interacting-with-the-enhanced-server" data-toc="interacting-with-the-enhanced-server#8-File-System-Module.md-interacting-with-the-enhanced-server">Interacting with the Enhanced Server</h4><ol class="list list-decimal" id="343909646#z51ikn6_320" type="1" start="1"><li class="list-item" id="343909646#z51ikn6_321"><p id="343909646#z51ikn6_327"><span class="control" id="343909646#z51ikn6_332">Create a New File (<span class="inline-code" id="343909646#z51ikn6_333">POST /file?name=example.txt</span>)</span></p><p id="343909646#z51ikn6_328"><span class="control" id="343909646#z51ikn6_334">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_329"><pre><code class="language-bash">curl -k -X POST https://localhost:8443/file?name=example.txt \
  -H &quot;Content-Type: application/json&quot; \
  -d '{&quot;content&quot;: &quot;This is the initial content.&quot;}'</code></pre></div><p id="343909646#z51ikn6_330"><span class="control" id="343909646#z51ikn6_335">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_331"><pre><code class="language-json">{
  &quot;message&quot;: &quot;Data saved successfully.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_322"><p id="343909646#z51ikn6_336"><span class="control" id="343909646#z51ikn6_341">Read the File (<span class="inline-code" id="343909646#z51ikn6_342">GET /file?name=example.txt</span>)</span></p><p id="343909646#z51ikn6_337"><span class="control" id="343909646#z51ikn6_343">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_338"><pre><code class="language-bash">curl -k https://localhost:8443/file?name=example.txt</code></pre></div><p id="343909646#z51ikn6_339"><span class="control" id="343909646#z51ikn6_344">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_340"><pre><code class="language-json">{
  &quot;content&quot;: &quot;This is the initial content.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_323"><p id="343909646#z51ikn6_345"><span class="control" id="343909646#z51ikn6_350">Update the File by Appending Data (<span class="inline-code" id="343909646#z51ikn6_351">PUT /file?name=example.txt</span>)</span></p><p id="343909646#z51ikn6_346"><span class="control" id="343909646#z51ikn6_352">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_347"><pre><code class="language-bash">curl -k -X PUT https://localhost:8443/file?name=example.txt \
  -H &quot;Content-Type: application/json&quot; \
  -d '{&quot;content&quot;: &quot; Appended content.&quot;}'</code></pre></div><p id="343909646#z51ikn6_348"><span class="control" id="343909646#z51ikn6_353">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_349"><pre><code class="language-json">{
  &quot;message&quot;: &quot;Data updated successfully.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_324"><p id="343909646#z51ikn6_354"><span class="control" id="343909646#z51ikn6_359">Read the Updated File (<span class="inline-code" id="343909646#z51ikn6_360">GET /file?name=example.txt</span>)</span></p><p id="343909646#z51ikn6_355"><span class="control" id="343909646#z51ikn6_361">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_356"><pre><code class="language-bash">curl -k https://localhost:8443/file?name=example.txt</code></pre></div><p id="343909646#z51ikn6_357"><span class="control" id="343909646#z51ikn6_362">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_358"><pre><code class="language-json">{
  &quot;content&quot;: &quot;This is the initial content. Appended content.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_325"><p id="343909646#z51ikn6_363"><span class="control" id="343909646#z51ikn6_368">Delete the File (<span class="inline-code" id="343909646#z51ikn6_369">DELETE /file?name=example.txt</span>)</span></p><p id="343909646#z51ikn6_364"><span class="control" id="343909646#z51ikn6_370">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_365"><pre><code class="language-bash">curl -k -X DELETE https://localhost:8443/file?name=example.txt</code></pre></div><p id="343909646#z51ikn6_366"><span class="control" id="343909646#z51ikn6_371">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_367"><pre><code class="language-json">{
  &quot;message&quot;: &quot;File deleted successfully.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_326"><p id="343909646#z51ikn6_372"><span class="control" id="343909646#z51ikn6_374">Error Handling:</span></p><ul class="list" id="343909646#z51ikn6_373" start="1"><li class="list-item" id="343909646#z51ikn6_375"><p id="343909646#z51ikn6_378"><span class="control" id="343909646#z51ikn6_383">Missing File Name:</span></p><p id="343909646#z51ikn6_379"><span class="control" id="343909646#z51ikn6_384">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_380"><pre><code class="language-bash">curl -k https://localhost:8443/file</code></pre></div><p id="343909646#z51ikn6_381"><span class="control" id="343909646#z51ikn6_385">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_382"><pre><code class="language-json">{
  &quot;error&quot;: &quot;File name is required as a query parameter (e.g., ?name=filename.txt)&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_376"><p id="343909646#z51ikn6_386"><span class="control" id="343909646#z51ikn6_391">File Not Found:</span></p><p id="343909646#z51ikn6_387"><span class="control" id="343909646#z51ikn6_392">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_388"><pre><code class="language-bash">curl -k https://localhost:8443/file?name=nonexistent.txt</code></pre></div><p id="343909646#z51ikn6_389"><span class="control" id="343909646#z51ikn6_393">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_390"><pre><code class="language-json">{
  &quot;error&quot;: &quot;File not found.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_377"><p id="343909646#z51ikn6_394"><span class="control" id="343909646#z51ikn6_399">Invalid JSON Data:</span></p><p id="343909646#z51ikn6_395"><span class="control" id="343909646#z51ikn6_400">Request:</span></p><div class="detached code-block" id="343909646#z51ikn6_396"><pre><code class="language-bash">curl -k -X POST https://localhost:8443/file?name=example.txt \
  -H &quot;Content-Type: application/json&quot; \
  -d 'Invalid JSON'</code></pre></div><p id="343909646#z51ikn6_397"><span class="control" id="343909646#z51ikn6_401">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_398"><pre><code class="language-json">{
  &quot;error&quot;: &quot;Invalid JSON data.&quot;
}</code></pre></div></li></ul></li></ol></section><section><h4 id="343909646#security-considerations" data-toc="security-considerations#8-File-System-Module.md-security-considerations">Security Considerations</h4><ul class="list" id="343909646#z51ikn6_402" start="1"><li class="list-item" id="343909646#z51ikn6_404"><p id="343909646#z51ikn6_408"><span class="control" id="343909646#z51ikn6_410">Input Validation:</span></p><ul class="list" id="343909646#z51ikn6_409" start="1"><li class="list-item" id="343909646#z51ikn6_411"><p>Validate the <span class="inline-code" id="343909646#z51ikn6_413">name</span> query parameter to prevent directory traversal attacks (e.g., using <span class="inline-code" id="343909646#z51ikn6_414">../</span> to access unauthorized directories).</p></li><li class="list-item" id="343909646#z51ikn6_412"><p>Implement checks to ensure that only permitted file types are accessed or manipulated.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_405"><p id="343909646#z51ikn6_415"><span class="control" id="343909646#z51ikn6_417">Authentication &amp; Authorization:</span></p><ul class="list" id="343909646#z51ikn6_416" start="1"><li class="list-item" id="343909646#z51ikn6_418"><p>Implement authentication mechanisms to restrict access to the file operations.</p></li><li class="list-item" id="343909646#z51ikn6_419"><p>Use authorization to control what actions authenticated users can perform.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_406"><p id="343909646#z51ikn6_420"><span class="control" id="343909646#z51ikn6_422">Error Messages:</span></p><ul class="list" id="343909646#z51ikn6_421" start="1"><li class="list-item" id="343909646#z51ikn6_423"><p>Avoid exposing sensitive information in error messages. Provide generic error responses to prevent information leakage.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_407"><p id="343909646#z51ikn6_424"><span class="control" id="343909646#z51ikn6_426">Rate Limiting:</span></p><ul class="list" id="343909646#z51ikn6_425" start="1"><li class="list-item" id="343909646#z51ikn6_427"><p>Implement rate limiting to prevent abuse of the API endpoints.</p></li></ul></li></ul></section></section></section><section><h2 id="343909646#final-checklist" data-toc="final-checklist#8-File-System-Module.md-final-checklist">Final Checklist</h2><p id="343909646#z51ikn6_428">Before running your enhanced server, ensure the following:</p><ol class="list list-decimal" id="343909646#z51ikn6_429" type="1" start="1"><li class="list-item" id="343909646#z51ikn6_431"><p id="343909646#z51ikn6_439"><span class="control" id="343909646#z51ikn6_441">File Existence:</span></p><ul class="list" id="343909646#z51ikn6_440" start="1"><li class="list-item" id="343909646#z51ikn6_442"><p><span class="inline-code" id="343909646#z51ikn6_444">src/index.ts</span> exists and contains the updated TypeScript code.</p></li><li class="list-item" id="343909646#z51ikn6_443"><p><span class="inline-code" id="343909646#z51ikn6_445">src/data</span> directory is created automatically when the server starts.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_432"><p id="343909646#z51ikn6_446"><span class="control" id="343909646#z51ikn6_448">Dependencies Installed:</span></p><ul class="list" id="343909646#z51ikn6_447" start="1"><li class="list-item" id="343909646#z51ikn6_449"><p>Run <span class="inline-code" id="343909646#z51ikn6_450">npm install</span> to ensure all dependencies are installed.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_433"><p id="343909646#z51ikn6_451"><span class="control" id="343909646#z51ikn6_453">TypeScript Configuration:</span></p><ul class="list" id="343909646#z51ikn6_452" start="1"><li class="list-item" id="343909646#z51ikn6_454"><p><span class="inline-code" id="343909646#z51ikn6_455">tsconfig.json</span> is properly configured as shown above.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_434"><p id="343909646#z51ikn6_456"><span class="control" id="343909646#z51ikn6_458">SSL Certificates:</span></p><ul class="list" id="343909646#z51ikn6_457" start="1"><li class="list-item" id="343909646#z51ikn6_459"><p>Ensure <span class="inline-code" id="343909646#z51ikn6_460">server-key.pem</span> and <span class="inline-code" id="343909646#z51ikn6_461">server-cert.pem</span> are placed in the project root (<span class="inline-code" id="343909646#z51ikn6_462">..</span> relative to <span class="inline-code" id="343909646#z51ikn6_463">src/index.ts</span>).</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_435"><p id="343909646#z51ikn6_464"><span class="control" id="343909646#z51ikn6_466">Scripts Set Up:</span></p><ul class="list" id="343909646#z51ikn6_465" start="1"><li class="list-item" id="343909646#z51ikn6_467"><p><span class="inline-code" id="343909646#z51ikn6_468">package.json</span> has the necessary scripts (<span class="inline-code" id="343909646#z51ikn6_469">start</span>, <span class="inline-code" id="343909646#z51ikn6_470">build</span>, <span class="inline-code" id="343909646#z51ikn6_471">serve</span>).</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_436"><p id="343909646#z51ikn6_472"><span class="control" id="343909646#z51ikn6_474">Run the Server Correctly:</span></p><ul class="list" id="343909646#z51ikn6_473" start="1"><li class="list-item" id="343909646#z51ikn6_475"><p>Use <span class="inline-code" id="343909646#z51ikn6_476">npm run start</span> to execute your server with <span class="inline-code" id="343909646#z51ikn6_477">tsx</span>.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_437"><p id="343909646#z51ikn6_478"><span class="control" id="343909646#z51ikn6_480">Permissions:</span></p><ul class="list" id="343909646#z51ikn6_479" start="1"><li class="list-item" id="343909646#z51ikn6_481"><p>Using port <span class="inline-code" id="343909646#z51ikn6_482">8443</span> avoids the need for administrative rights. Change the port only if necessary.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_438"><p id="343909646#z51ikn6_483"><span class="control" id="343909646#z51ikn6_485">Environment Variables:</span></p><ul class="list" id="343909646#z51ikn6_484" start="1"><li class="list-item" id="343909646#z51ikn6_486"><p>If using environment variables for configuration, ensure they're correctly set before running the server.</p></li></ul></li></ol></section><section><h2 id="343909646#running-the-server" data-toc="running-the-server#8-File-System-Module.md-running-the-server">Running the Server</h2><ol class="list list-decimal" id="343909646#z51ikn6_487" type="1" start="1"><li class="list-item" id="343909646#z51ikn6_489"><p id="343909646#z51ikn6_492"><span class="control" id="343909646#z51ikn6_494">Start the Server:</span></p><div class="detached code-block" id="343909646#z51ikn6_493"><pre><code class="language-bash">npm run start</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_490"><p id="343909646#z51ikn6_495"><span class="control" id="343909646#z51ikn6_497">Expected Output:</span></p><div class="detached code-block" id="343909646#z51ikn6_496"><pre><code class="language-none">Data directory created.
HTTPS server is running on https://localhost:8443</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_491"><p id="343909646#z51ikn6_498"><span class="control" id="343909646#z51ikn6_500">Interact with the Server:</span></p><ul class="list" id="343909646#z51ikn6_499" start="1"><li class="list-item" id="343909646#z51ikn6_501"><p id="343909646#z51ikn6_503"><span class="control" id="343909646#z51ikn6_507">Accessing <span class="inline-code" id="343909646#z51ikn6_508">/</span> to Read an Empty File:</span></p><div class="detached code-block" id="343909646#z51ikn6_504"><pre><code class="language-bash">curl -k https://localhost:8443/</code></pre></div><p id="343909646#z51ikn6_505"><span class="control" id="343909646#z51ikn6_509">Response:</span></p><div class="detached code-block" id="343909646#z51ikn6_506"><pre><code class="language-json">{
  &quot;message&quot;: &quot;File is empty or does not exist.&quot;
}</code></pre></div></li><li class="list-item" id="343909646#z51ikn6_502"><p id="343909646#z51ikn6_510"><span class="control" id="343909646#z51ikn6_512">Creating, Reading, Updating, Deleting, and Renaming Files:</span></p><ul class="list" id="343909646#z51ikn6_511" start="1"><li class="list-item" id="343909646#z51ikn6_513"><p>Use the provided endpoints (<span class="inline-code" id="343909646#z51ikn6_514">/create</span>, <span class="inline-code" id="343909646#z51ikn6_515">/read</span>, <span class="inline-code" id="343909646#z51ikn6_516">/update</span>, <span class="inline-code" id="343909646#z51ikn6_517">/delete</span>, <span class="inline-code" id="343909646#z51ikn6_518">/rename</span>) with appropriate HTTP methods as demonstrated in the examples above.</p></li></ul></li></ul></li></ol></section><section><h2 id="343909646#troubleshooting-tips" data-toc="troubleshooting-tips#8-File-System-Module.md-troubleshooting-tips">Troubleshooting Tips</h2><p id="343909646#z51ikn6_519">If you encounter issues while running the server, consider the following troubleshooting steps:</p><section><h3 id="343909646#1-permission-denied-or-eacces-error-on-port-443" data-toc="1-permission-denied-or-eacces-error-on-port-443#8-File-System-Module.md-1-permission-denied-or-eacces-error-on-port-443">1. &quot;Permission Denied&quot; or &quot;EACCES&quot; Error on Port 443</h3><ul class="list" id="343909646#z51ikn6_527" start="1"><li class="list-item" id="343909646#z51ikn6_529"><p><span class="control" id="343909646#z51ikn6_531">Cause:</span> Binding to port <span class="inline-code" id="343909646#z51ikn6_532">443</span> requires elevated privileges.</p></li><li class="list-item" id="343909646#z51ikn6_530"><p><span class="control" id="343909646#z51ikn6_533">Solution:</span></p><ul class="list" id="343909646#z51ikn6_534" start="1"><li class="list-item" id="343909646#z51ikn6_535"><p><span class="control" id="343909646#z51ikn6_537">Use a Higher Port:</span> Change to a port like <span class="inline-code" id="343909646#z51ikn6_538">8443</span> for development.</p></li><li class="list-item" id="343909646#z51ikn6_536"><p><span class="control" id="343909646#z51ikn6_539">Run as Administrator:</span> If you must use port <span class="inline-code" id="343909646#z51ikn6_540">443</span>, run your terminal or command prompt with administrative rights.</p></li></ul></li></ul></section><section><h3 id="343909646#2-module-not-found-error" data-toc="2-module-not-found-error#8-File-System-Module.md-2-module-not-found-error">2. &quot;Module Not Found&quot; Error</h3><ul class="list" id="343909646#z51ikn6_542" start="1"><li class="list-item" id="343909646#z51ikn6_544"><p><span class="control" id="343909646#z51ikn6_546">Cause:</span> Node.js (or <span class="inline-code" id="343909646#z51ikn6_547">tsx</span>) can't locate the specified module or file.</p></li><li class="list-item" id="343909646#z51ikn6_545"><p><span class="control" id="343909646#z51ikn6_548">Solution:</span></p><ul class="list" id="343909646#z51ikn6_549" start="1"><li class="list-item" id="343909646#z51ikn6_550"><p><span class="control" id="343909646#z51ikn6_553">Verify File Paths:</span> Ensure that all file paths in your code are correct.</p></li><li class="list-item" id="343909646#z51ikn6_551"><p><span class="control" id="343909646#z51ikn6_554">Check File Extensions:</span> Ensure that your TypeScript files have the <span class="inline-code" id="343909646#z51ikn6_555">.ts</span> extension.</p></li><li class="list-item" id="343909646#z51ikn6_552"><p><span class="control" id="343909646#z51ikn6_556">Run from Correct Directory:</span> Execute the server from the project root where <span class="inline-code" id="343909646#z51ikn6_557">package.json</span> is located.</p></li></ul></li></ul></section><section><h3 id="343909646#3-ssl-certificate-errors-in-browser" data-toc="3-ssl-certificate-errors-in-browser#8-File-System-Module.md-3-ssl-certificate-errors-in-browser">3. SSL Certificate Errors in Browser</h3><ul class="list" id="343909646#z51ikn6_559" start="1"><li class="list-item" id="343909646#z51ikn6_561"><p><span class="control" id="343909646#z51ikn6_563">Cause:</span> Self-signed certificates are not trusted by browsers.</p></li><li class="list-item" id="343909646#z51ikn6_562"><p><span class="control" id="343909646#z51ikn6_564">Solution:</span></p><ul class="list" id="343909646#z51ikn6_565" start="1"><li class="list-item" id="343909646#z51ikn6_566"><p>For development, proceed by accepting the risk in the browser.</p></li><li class="list-item" id="343909646#z51ikn6_567"><p>For production, obtain certificates from a trusted CA like Let's Encrypt (<a href="https://letsencrypt.org/">https://letsencrypt.org/</a>).</p></li></ul></li></ul></section><section><h3 id="343909646#4-json-parsing-errors" data-toc="4-json-parsing-errors#8-File-System-Module.md-4-json-parsing-errors">4. JSON Parsing Errors</h3><ul class="list" id="343909646#z51ikn6_570" start="1"><li class="list-item" id="343909646#z51ikn6_572"><p><span class="control" id="343909646#z51ikn6_574">Cause:</span> Sending invalid JSON data in the request body.</p></li><li class="list-item" id="343909646#z51ikn6_573"><p><span class="control" id="343909646#z51ikn6_575">Solution:</span></p><ul class="list" id="343909646#z51ikn6_576" start="1"><li class="list-item" id="343909646#z51ikn6_577"><p>Ensure that the data sent in <span class="inline-code" id="343909646#z51ikn6_579">POST</span> and <span class="inline-code" id="343909646#z51ikn6_580">PUT</span> requests is valid JSON.</p></li><li class="list-item" id="343909646#z51ikn6_578"><p>Use tools like Postman to format your requests correctly.</p></li></ul></li></ul></section><section><h3 id="343909646#5-file-not-found-errors" data-toc="5-file-not-found-errors#8-File-System-Module.md-5-file-not-found-errors">5. File Not Found Errors</h3><ul class="list" id="343909646#z51ikn6_582" start="1"><li class="list-item" id="343909646#z51ikn6_584"><p><span class="control" id="343909646#z51ikn6_586">Cause:</span> Attempting to read or manipulate a file that doesn't exist.</p></li><li class="list-item" id="343909646#z51ikn6_585"><p><span class="control" id="343909646#z51ikn6_587">Solution:</span></p><ul class="list" id="343909646#z51ikn6_588" start="1"><li class="list-item" id="343909646#z51ikn6_589"><p>Ensure that the file exists before performing operations.</p></li><li class="list-item" id="343909646#z51ikn6_590"><p>Use appropriate error handling to manage such scenarios gracefully.</p></li></ul></li></ul></section><section><h3 id="343909646#6-cors-issues" data-toc="6-cors-issues#8-File-System-Module.md-6-cors-issues">6. CORS Issues</h3><ul class="list" id="343909646#z51ikn6_592" start="1"><li class="list-item" id="343909646#z51ikn6_595"><p><span class="control" id="343909646#z51ikn6_597">Cause:</span> Cross-Origin Resource Sharing (CORS) restrictions.</p></li><li class="list-item" id="343909646#z51ikn6_596"><p><span class="control" id="343909646#z51ikn6_598">Solution:</span></p><ul class="list" id="343909646#z51ikn6_599" start="1"><li class="list-item" id="343909646#z51ikn6_600"><p>Ensure that the server sets the appropriate CORS headers as shown in the example.</p></li><li class="list-item" id="343909646#z51ikn6_601"><p>Adjust the headers based on your security requirements.</p></li></ul></li></ul></section></section><section><h2 id="343909646#security-best-practices" data-toc="security-best-practices#8-File-System-Module.md-security-best-practices">Security Best Practices</h2><p id="343909646#z51ikn6_602">While implementing file operations, it's crucial to adhere to security best practices to protect your server and data.</p><section><h3 id="343909646#1-input-validation" data-toc="1-input-validation#8-File-System-Module.md-1-input-validation">1. Input Validation</h3><ul class="list" id="343909646#z51ikn6_610" start="1"><li class="list-item" id="343909646#z51ikn6_612"><p id="343909646#z51ikn6_614"><span class="control" id="343909646#z51ikn6_616">Sanitize File Names:</span></p><ul class="list" id="343909646#z51ikn6_615" start="1"><li class="list-item" id="343909646#z51ikn6_617"><p>Prevent directory traversal by validating and sanitizing the <span class="inline-code" id="343909646#z51ikn6_619">name</span> query parameter.</p></li><li class="list-item" id="343909646#z51ikn6_618"><p>Reject file names containing <span class="inline-code" id="343909646#z51ikn6_620">../</span> or other potentially malicious patterns.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_613"><p id="343909646#z51ikn6_621"><span class="control" id="343909646#z51ikn6_623">Restrict File Types:</span></p><ul class="list" id="343909646#z51ikn6_622" start="1"><li class="list-item" id="343909646#z51ikn6_624"><p>Allow only specific file types to be created or manipulated.</p></li></ul></li></ul></section><section><h3 id="343909646#2-authentication-authorization" data-toc="2-authentication-authorization#8-File-System-Module.md-2-authentication-authorization">2. Authentication &amp; Authorization</h3><ul class="list" id="343909646#z51ikn6_626" start="1"><li class="list-item" id="343909646#z51ikn6_628"><p id="343909646#z51ikn6_630"><span class="control" id="343909646#z51ikn6_632">Implement Authentication:</span></p><ul class="list" id="343909646#z51ikn6_631" start="1"><li class="list-item" id="343909646#z51ikn6_633"><p>Use authentication mechanisms (e.g., JWT, OAuth) to restrict access to authorized users.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_629"><p id="343909646#z51ikn6_634"><span class="control" id="343909646#z51ikn6_636">Role-Based Access Control (RBAC):</span></p><ul class="list" id="343909646#z51ikn6_635" start="1"><li class="list-item" id="343909646#z51ikn6_637"><p>Define roles and permissions to control what actions authenticated users can perform.</p></li></ul></li></ul></section><section><h3 id="343909646#3-error-handling" data-toc="3-error-handling#8-File-System-Module.md-3-error-handling">3. Error Handling</h3><ul class="list" id="343909646#z51ikn6_639" start="1"><li class="list-item" id="343909646#z51ikn6_641"><p><span class="control" id="343909646#z51ikn6_642">Avoid Detailed Error Messages:</span></p><ul class="list" id="343909646#z51ikn6_643" start="1"><li class="list-item" id="343909646#z51ikn6_644"><p>Do not expose stack traces or sensitive error details to clients.</p></li><li class="list-item" id="343909646#z51ikn6_645"><p>Log detailed errors on the server side while sending generic messages to clients.</p></li></ul></li></ul></section><section><h3 id="343909646#4-rate-limiting" data-toc="4-rate-limiting#8-File-System-Module.md-4-rate-limiting">4. Rate Limiting</h3><ul class="list" id="343909646#z51ikn6_647" start="1"><li class="list-item" id="343909646#z51ikn6_649"><p><span class="control" id="343909646#z51ikn6_650">Prevent Abuse:</span></p><ul class="list" id="343909646#z51ikn6_651" start="1"><li class="list-item" id="343909646#z51ikn6_652"><p>Implement rate limiting to restrict the number of requests a client can make within a specific timeframe.</p></li></ul></li></ul></section><section><h3 id="343909646#5-secure-data-storage" data-toc="5-secure-data-storage#8-File-System-Module.md-5-secure-data-storage">5. Secure Data Storage</h3><ul class="list" id="343909646#z51ikn6_654" start="1"><li class="list-item" id="343909646#z51ikn6_656"><p><span class="control" id="343909646#z51ikn6_657">Protect Sensitive Data:</span></p><ul class="list" id="343909646#z51ikn6_658" start="1"><li class="list-item" id="343909646#z51ikn6_659"><p>Encrypt sensitive data stored in files.</p></li><li class="list-item" id="343909646#z51ikn6_660"><p>Set appropriate file permissions to restrict unauthorized access.</p></li></ul></li></ul></section><section><h3 id="343909646#6-regular-updates" data-toc="6-regular-updates#8-File-System-Module.md-6-regular-updates">6. Regular Updates</h3><ul class="list" id="343909646#z51ikn6_662" start="1"><li class="list-item" id="343909646#z51ikn6_665"><p id="343909646#z51ikn6_667"><span class="control" id="343909646#z51ikn6_669">Keep Dependencies Updated:</span></p><ul class="list" id="343909646#z51ikn6_668" start="1"><li class="list-item" id="343909646#z51ikn6_670"><p>Regularly update Node.js and all dependencies to patch known vulnerabilities.</p></li></ul></li><li class="list-item" id="343909646#z51ikn6_666"><p id="343909646#z51ikn6_671"><span class="control" id="343909646#z51ikn6_673">Monitor Security Advisories:</span></p><ul class="list" id="343909646#z51ikn6_672" start="1"><li class="list-item" id="343909646#z51ikn6_674"><p>Stay informed about security advisories related to the tools and libraries you use.</p></li></ul></li></ul></section></section><section><h2 id="343909646#conclusion" data-toc="conclusion#8-File-System-Module.md-conclusion">Conclusion</h2><p id="343909646#z51ikn6_675">By following the steps outlined above, you can create a robust and secure HTTPS server in Node.js that performs comprehensive CRUD operations on files within the <span class="inline-code" id="343909646#z51ikn6_677">./src/data</span> directory. This setup is ideal for development and testing purposes. For production environments, ensure that you implement additional security measures and obtain trusted SSL certificates.</p><p id="343909646#z51ikn6_676">If you encounter any specific issues or have further questions, feel free to ask for more detailed assistance!</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-916870042">9. Node.js Events</h1><p id="-916870042#-e9plna_3">Node.js is built around an <span class="control" id="-916870042#-e9plna_14">event-driven architecture</span>, which is one of its core strengths. Events play a significant role in Node.js by enabling asynchronous and non-blocking communication between different parts of an application. The <span class="inline-code" id="-916870042#-e9plna_15">EventEmitter</span> class, part of the <span class="inline-code" id="-916870042#-e9plna_16">events</span> module, allows you to create, emit, and listen for events in a Node.js application.</p><p id="-916870042#-e9plna_4">In this section, we'll explore how Node.js events work, how to create and use custom events, and practical examples of their usage.</p><section><h2 id="-916870042#what-are-events-in-node-js" data-toc="what-are-events-in-node-js#9-Node-js-Events.md-what-are-events-in-node-js">What are Events in Node.js?</h2><p id="-916870042#-e9plna_17">In Node.js, an event refers to a specific action or occurrence, such as a user request, a timer completion, or the availability of data. The system &quot;emits&quot; these events, and functions called <span class="control" id="-916870042#-e9plna_19">listeners</span> or <span class="control" id="-916870042#-e9plna_20">handlers</span> react to them.</p><p id="-916870042#-e9plna_18">Node.js provides the <span class="inline-code" id="-916870042#-e9plna_21">events</span> module, which includes the <span class="inline-code" id="-916870042#-e9plna_22">EventEmitter</span> class. Objects created from <span class="inline-code" id="-916870042#-e9plna_23">EventEmitter</span> can trigger and handle various events. This allows asynchronous, event-based programming, where actions happen in response to certain triggers rather than sequential execution.</p></section><section><h2 id="-916870042#the-eventemitter-class" data-toc="the-eventemitter-class#9-Node-js-Events.md-the-eventemitter-class">The EventEmitter Class</h2><p id="-916870042#-e9plna_24">The <span class="inline-code" id="-916870042#-e9plna_29">EventEmitter</span> class is the core of event handling in Node.js. It allows you to:</p><ul class="list" id="-916870042#-e9plna_25" start="1"><li class="list-item" id="-916870042#-e9plna_30"><p>Register event listeners</p></li><li class="list-item" id="-916870042#-e9plna_31"><p>Emit (trigger) events</p></li><li class="list-item" id="-916870042#-e9plna_32"><p>Remove event listeners</p></li></ul><p id="-916870042#-e9plna_26">The basic pattern for working with <span class="inline-code" id="-916870042#-e9plna_33">EventEmitter</span> involves creating an event emitter instance, defining listeners for specific events, and emitting those events when needed.</p><section><h3 id="-916870042#example-basic-usage-of-eventemitter" data-toc="example-basic-usage-of-eventemitter#9-Node-js-Events.md-example-basic-usage-of-eventemitter">Example: Basic Usage of EventEmitter</h3><div class="detached code-block" id="-916870042#-e9plna_34"><pre><code class="language-javascript">import { EventEmitter } from 'events';

// Create an instance of EventEmitter
const eventEmitter = new EventEmitter();

// Define a listener for the 'greet' event
eventEmitter.on('greet', (name) =&gt; {
  console.log(`Hello, ${name}!`);
});

// Emit the 'greet' event
eventEmitter.emit('greet', 'Alice');  // Output: Hello, Alice!</code></pre></div></section><section><h3 id="-916870042#explanation" data-toc="explanation#9-Node-js-Events.md-explanation">Explanation:</h3><ul class="list" id="-916870042#-e9plna_35" start="1"><li class="list-item" id="-916870042#-e9plna_36"><p><span class="control" id="-916870042#-e9plna_38"><span class="inline-code" id="-916870042#-e9plna_40">eventEmitter.on()</span></span>: Registers a listener for the <span class="inline-code" id="-916870042#-e9plna_39">greet</span> event.</p></li><li class="list-item" id="-916870042#-e9plna_37"><p><span class="control" id="-916870042#-e9plna_41"><span class="inline-code" id="-916870042#-e9plna_43">eventEmitter.emit()</span></span>: Emits (triggers) the <span class="inline-code" id="-916870042#-e9plna_42">greet</span> event, causing the registered listener to execute.</p></li></ul></section></section><section><h2 id="-916870042#registering-multiple-event-listeners" data-toc="registering-multiple-event-listeners#9-Node-js-Events.md-registering-multiple-event-listeners">Registering Multiple Event Listeners</h2><p id="-916870042#-e9plna_44">You can register multiple listeners for the same event. Each listener will be executed in the order in which it was registered.</p><section><h3 id="-916870042#example-multiple-event-listeners" data-toc="example-multiple-event-listeners#9-Node-js-Events.md-example-multiple-event-listeners">Example: Multiple Event Listeners</h3><div class="detached code-block" id="-916870042#-e9plna_46"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register multiple listeners for the same event
eventEmitter.on('greet', (name) =&gt; {
  console.log(`Listener 1: Hello, ${name}!`);
});

eventEmitter.on('greet', (name) =&gt; {
  console.log(`Listener 2: How are you, ${name}?`);
});

// Emit the 'greet' event
eventEmitter.emit('greet', 'Bob');

// Output:
// Listener 1: Hello, Bob!
// Listener 2: How are you, Bob?</code></pre></div></section></section><section><h2 id="-916870042#handling-event-with-arguments" data-toc="handling-event-with-arguments#9-Node-js-Events.md-handling-event-with-arguments">Handling Event with Arguments</h2><p id="-916870042#-e9plna_47">When emitting an event, you can pass additional arguments to the listeners. The arguments can be used to customize the event's behavior.</p><section><h3 id="-916870042#example-passing-arguments-to-event-handlers" data-toc="example-passing-arguments-to-event-handlers#9-Node-js-Events.md-example-passing-arguments-to-event-handlers">Example: Passing Arguments to Event Handlers</h3><div class="detached code-block" id="-916870042#-e9plna_49"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register a listener with multiple arguments
eventEmitter.on('status', (code, message) =&gt; {
  console.log(`Status Code: ${code}, Message: ${message}`);
});

// Emit the 'status' event with arguments
eventEmitter.emit('status', 200, 'OK');  // Output: Status Code: 200, Message: OK</code></pre></div></section></section><section><h2 id="-916870042#one-time-event-listeners" data-toc="one-time-event-listeners#9-Node-js-Events.md-one-time-event-listeners">One-Time Event Listeners</h2><p id="-916870042#-e9plna_50">Sometimes, you may want a listener to respond to an event only once. The <span class="inline-code" id="-916870042#-e9plna_52">once()</span> method allows you to register a listener that is automatically removed after it is triggered for the first time.</p><section><h3 id="-916870042#example-one-time-event-listener" data-toc="example-one-time-event-listener#9-Node-js-Events.md-example-one-time-event-listener">Example: One-Time Event Listener</h3><div class="detached code-block" id="-916870042#-e9plna_53"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register a one-time listener for the 'greet' event
eventEmitter.once('greet', (name) =&gt; {
  console.log(`Hello for the first and only time, ${name}!`);
});

// Emit the 'greet' event twice
eventEmitter.emit('greet', 'Charlie');  // Output: Hello for the first and only time, Charlie!
eventEmitter.emit('greet', 'Charlie');  // No output, listener is removed after the first emit</code></pre></div></section></section><section><h2 id="-916870042#removing-event-listeners" data-toc="removing-event-listeners#9-Node-js-Events.md-removing-event-listeners">Removing Event Listeners</h2><p id="-916870042#-e9plna_54">To remove a specific event listener, use the <span class="inline-code" id="-916870042#-e9plna_56">removeListener()</span> or <span class="inline-code" id="-916870042#-e9plna_57">off()</span> methods. These methods allow you to remove a previously registered listener.</p><section><h3 id="-916870042#example-removing-event-listeners" data-toc="example-removing-event-listeners#9-Node-js-Events.md-example-removing-event-listeners">Example: Removing Event Listeners</h3><div class="detached code-block" id="-916870042#-e9plna_58"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

const greetListener = (name: string) =&gt; {
  console.log(`Hello, ${name}!`);
};

// Register the listener
eventEmitter.on('greet', greetListener);

// Emit the 'greet' event
eventEmitter.emit('greet', 'David');  // Output: Hello, David!

// Remove the listener
eventEmitter.off('greet', greetListener);

// Emit the 'greet' event again (no output this time)
eventEmitter.emit('greet', 'David');</code></pre></div></section></section><section><h2 id="-916870042#eventemitter-inheritance" data-toc="eventemitter-inheritance#9-Node-js-Events.md-eventemitter-inheritance">EventEmitter Inheritance</h2><p id="-916870042#-e9plna_59">You can inherit from the <span class="inline-code" id="-916870042#-e9plna_61">EventEmitter</span> class to create custom classes that emit events. This is useful when you want to add event-driven behavior to your own objects.</p><section><h3 id="-916870042#example-custom-class-inheriting-eventemitter" data-toc="example-custom-class-inheriting-eventemitter#9-Node-js-Events.md-example-custom-class-inheriting-eventemitter">Example: Custom Class Inheriting EventEmitter</h3><div class="detached code-block" id="-916870042#-e9plna_62"><pre><code class="language-javascript">import { EventEmitter } from 'events';

class MyEmitter extends EventEmitter {
  log(message: string) {
    console.log(message);
    this.emit('logged', { message });
  }
}

const myEmitter = new MyEmitter();

// Register a listener for the 'logged' event
myEmitter.on('logged', (data) =&gt; {
  console.log(`Event emitted with message: ${data.message}`);
});

// Call the custom method which emits the 'logged' event
myEmitter.log('This is a custom event');  // Output:
                                          // This is a custom event
                                          // Event emitted with message: This is a custom event</code></pre></div></section></section><section><h2 id="-916870042#handling-errors-in-event-emitters" data-toc="handling-errors-in-event-emitters#9-Node-js-Events.md-handling-errors-in-event-emitters">Handling Errors in Event Emitters</h2><p id="-916870042#-e9plna_63">When an error occurs within an event emitter, it&rsquo;s a common practice to emit an <span class="inline-code" id="-916870042#-e9plna_65">'error'</span> event. If there are no listeners for the <span class="inline-code" id="-916870042#-e9plna_66">'error'</span> event, Node.js will throw the error and crash the program. Always ensure there is a listener for error events when emitting errors.</p><section><h3 id="-916870042#example-emitting-and-handling-errors" data-toc="example-emitting-and-handling-errors#9-Node-js-Events.md-example-emitting-and-handling-errors">Example: Emitting and Handling Errors</h3><div class="detached code-block" id="-916870042#-e9plna_67"><pre><code class="language-javascript">import { EventEmitter } from 'events';

const eventEmitter = new EventEmitter();

// Register an error event listener
eventEmitter.on('error', (err) =&gt; {
  console.error('Error occurred:', err);
});

// Emit an error event
eventEmitter.emit('error', new Error('Something went wrong!'));

// Output: Error occurred: Error: Something went wrong!</code></pre></div></section></section><section><h2 id="-916870042#built-in-node-js-event-emitters" data-toc="built-in-node-js-event-emitters#9-Node-js-Events.md-built-in-node-js-event-emitters">Built-in Node.js Event Emitters</h2><p id="-916870042#-e9plna_68">Many Node.js core modules use the <span class="inline-code" id="-916870042#-e9plna_71">EventEmitter</span> class internally to handle asynchronous operations. Some examples include:</p><ul class="list" id="-916870042#-e9plna_69" start="1"><li class="list-item" id="-916870042#-e9plna_72"><p><span class="control" id="-916870042#-e9plna_75"><span class="inline-code" id="-916870042#-e9plna_76">http</span></span>: The HTTP module uses events to handle incoming requests and responses.</p></li><li class="list-item" id="-916870042#-e9plna_73"><p><span class="control" id="-916870042#-e9plna_77"><span class="inline-code" id="-916870042#-e9plna_78">net</span></span>: The Networking module uses events for managing socket connections.</p></li><li class="list-item" id="-916870042#-e9plna_74"><p><span class="control" id="-916870042#-e9plna_79"><span class="inline-code" id="-916870042#-e9plna_80">fs</span></span>: The File System module emits events when files are opened, read, or closed.</p></li></ul><section><h3 id="-916870042#example-using-events-in-the-http-module" data-toc="example-using-events-in-the-http-module#9-Node-js-Events.md-example-using-events-in-the-http-module">Example: Using Events in the http Module</h3><div class="detached code-block" id="-916870042#-e9plna_82"><pre><code class="language-javascript">import * as http from 'http';

const server = http.createServer((req, res) =&gt; {
  res.writeHead(200, { 'Content-Type': 'text/plain' });
  res.end('Hello, Event-Driven World!');
});

// Register a listener for the 'connection' event
server.on('connection', () =&gt; {
  console.log('New connection established');
});

// Start the server
server.listen(3000, () =&gt; {
  console.log('Server listening on http://localhost:3000');
});</code></pre></div></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1267330066">10. Node.js Errors</h1><p id="1267330066#p42ma0_3">Error handling is an essential part of building reliable applications, and Node.js provides several mechanisms for dealing with errors in an efficient way. By understanding the different types of errors and how to handle them, you can write more robust applications.</p><p id="1267330066#p42ma0_4">Node.js uses both synchronous and asynchronous error handling mechanisms. Since Node.js is event-driven and non-blocking, errors can occur in both synchronous code (where they can be caught immediately) and asynchronous code (where error handling is more complex).</p><p id="1267330066#p42ma0_5">In this section, we will cover:</p><ul class="list" id="1267330066#p42ma0_6" start="1"><li class="list-item" id="1267330066#p42ma0_15"><p>Common types of errors in Node.js</p></li><li class="list-item" id="1267330066#p42ma0_16"><p>Error handling in both synchronous and asynchronous code</p></li><li class="list-item" id="1267330066#p42ma0_17"><p>The <span class="inline-code" id="1267330066#p42ma0_19">Error</span> object and custom error classes</p></li><li class="list-item" id="1267330066#p42ma0_18"><p>Best practices for error handling</p></li></ul><section><h2 id="1267330066#a-types-of-errors-in-node-js" data-toc="a-types-of-errors-in-node-js#10-Node-js-Errors.md-a-types-of-errors-in-node-js">a. Types of Errors in Node.js</h2><p id="1267330066#p42ma0_20">In Node.js, errors can generally be categorized into several types:</p><ol class="list list-decimal" id="1267330066#p42ma0_21" type="1" start="1"><li class="list-item" id="1267330066#p42ma0_22"><p><span class="control" id="1267330066#p42ma0_25">Operational Errors</span>: Errors that occur during the normal operation of a program. These include network issues, file not found errors, permission errors, etc.</p></li><li class="list-item" id="1267330066#p42ma0_23"><p><span class="control" id="1267330066#p42ma0_26">Programmer Errors</span>: Errors caused by bugs in the code, such as accessing an undefined variable or calling a function that doesn&rsquo;t exist.</p></li><li class="list-item" id="1267330066#p42ma0_24"><p><span class="control" id="1267330066#p42ma0_27">System Errors</span>: Errors that occur due to issues outside of the application, such as hardware failures or network problems.</p></li></ol></section><section><h2 id="1267330066#b-the-error-object" data-toc="b-the-error-object#10-Node-js-Errors.md-b-the-error-object">b. The Error Object</h2><p id="1267330066#p42ma0_29">In Node.js, all errors are represented as instances of the built-in <span class="inline-code" id="1267330066#p42ma0_33">Error</span> class. The <span class="inline-code" id="1267330066#p42ma0_34">Error</span> object provides information about what went wrong and can be thrown and caught using the <span class="inline-code" id="1267330066#p42ma0_35">try/catch</span> mechanism in synchronous code.</p><section><h3 id="1267330066#example-throwing-and-catching-errors" data-toc="example-throwing-and-catching-errors#10-Node-js-Errors.md-example-throwing-and-catching-errors">Example: Throwing and Catching Errors</h3><div class="detached code-block" id="1267330066#p42ma0_36"><pre><code class="language-javascript">try {
  throw new Error('Something went wrong!');
} catch (err) {
  console.error('Caught an error:', err.message);
}</code></pre></div></section><section><h3 id="1267330066#properties-of-the-error-object" data-toc="properties-of-the-error-object#10-Node-js-Errors.md-properties-of-the-error-object">Properties of the Error Object:</h3><ul class="list" id="1267330066#p42ma0_38" start="1"><li class="list-item" id="1267330066#p42ma0_40"><p><span class="control" id="1267330066#p42ma0_43"><span class="inline-code" id="1267330066#p42ma0_44">message</span></span>: A human-readable description of the error.</p></li><li class="list-item" id="1267330066#p42ma0_41"><p><span class="control" id="1267330066#p42ma0_45"><span class="inline-code" id="1267330066#p42ma0_47">name</span></span>: The name of the error (defaults to <span class="inline-code" id="1267330066#p42ma0_46">'Error'</span>).</p></li><li class="list-item" id="1267330066#p42ma0_42"><p><span class="control" id="1267330066#p42ma0_48"><span class="inline-code" id="1267330066#p42ma0_49">stack</span></span>: A stack trace that shows where the error occurred in the code.</p></li></ul></section></section><section><h2 id="1267330066#c-handling-synchronous-errors" data-toc="c-handling-synchronous-errors#10-Node-js-Errors.md-c-handling-synchronous-errors">c. Handling Synchronous Errors</h2><p id="1267330066#p42ma0_50">Synchronous code runs in a blocking fashion, so errors can be caught immediately using <span class="inline-code" id="1267330066#p42ma0_52">try/catch</span> blocks.</p><section><h3 id="1267330066#example-handling-synchronous-errors" data-toc="example-handling-synchronous-errors#10-Node-js-Errors.md-example-handling-synchronous-errors">Example: Handling Synchronous Errors</h3><div class="detached code-block" id="1267330066#p42ma0_53"><pre><code class="language-javascript">try {
  // Some synchronous code that could throw an error
  const result = JSON.parse('{ malformed JSON }');
} catch (err) {
  console.error('Error occurred during parsing:', err.message);
}</code></pre></div><p id="1267330066#p42ma0_54">In synchronous code, <span class="inline-code" id="1267330066#p42ma0_55">try/catch</span> blocks are straightforward to use and help to prevent the application from crashing.</p></section></section><section><h2 id="1267330066#d-handling-asynchronous-errors" data-toc="d-handling-asynchronous-errors#10-Node-js-Errors.md-d-handling-asynchronous-errors">d. Handling Asynchronous Errors</h2><p id="1267330066#p42ma0_56">Handling errors in asynchronous code is more challenging because of Node.js's non-blocking nature. There are several patterns for handling errors in asynchronous operations, such as callbacks, promises, and <span class="inline-code" id="1267330066#p42ma0_60">async/await</span>.</p><section><h3 id="1267330066#1-error-handling-in-callbacks" data-toc="1-error-handling-in-callbacks#10-Node-js-Errors.md-1-error-handling-in-callbacks">1. Error Handling in Callbacks</h3><p id="1267330066#p42ma0_61">When working with callbacks, errors are typically passed as the first argument to the callback function. This is often referred to as the &quot;error-first&quot; callback pattern.</p><div class="detached code-block" id="1267330066#p42ma0_62"><pre><code class="language-javascript">import * as fs from 'fs';

// Example: Handling errors in a callback
fs.readFile('nonexistentfile.txt', 'utf-8', (err, data) =&gt; {
  if (err) {
    console.error('Error reading file:', err.message);
    return;
  }
  console.log('File content:', data);
});</code></pre></div></section><section><h3 id="1267330066#2-error-handling-in-promises" data-toc="2-error-handling-in-promises#10-Node-js-Errors.md-2-error-handling-in-promises">2. Error Handling in Promises</h3><p id="1267330066#p42ma0_63">When using promises, errors can be caught using <span class="inline-code" id="1267330066#p42ma0_65">.catch()</span>.</p><div class="detached code-block" id="1267330066#p42ma0_64"><pre><code class="language-javascript">// Example: Handling errors in a promise
const asyncOperation = new Promise((resolve, reject) =&gt; {
  const errorOccurred = true;
  if (errorOccurred) {
    reject(new Error('Something went wrong!'));
  } else {
    resolve('Operation succeeded');
  }
});

asyncOperation
  .then((result) =&gt; {
    console.log(result);
  })
  .catch((err) =&gt; {
    console.error('Error in promise:', err.message);
  });</code></pre></div></section><section><h3 id="1267330066#3-error-handling-with-async-await" data-toc="3-error-handling-with-async-await#10-Node-js-Errors.md-3-error-handling-with-async-await">3. Error Handling with async/await</h3><p id="1267330066#p42ma0_67">With <span class="inline-code" id="1267330066#p42ma0_70">async/await</span>, error handling is similar to synchronous code. You can use <span class="inline-code" id="1267330066#p42ma0_71">try/catch</span> blocks to handle errors in asynchronous code.</p><div class="detached code-block" id="1267330066#p42ma0_68"><pre><code class="language-javascript">async function readFileAsync() {
  try {
    const data = await fs.promises.readFile('nonexistentfile.txt', 'utf-8');
    console.log('File content:', data);
  } catch (err) {
    console.error('Error reading file:', err.message);
  }
}

readFileAsync();</code></pre></div></section></section><section><h2 id="1267330066#e-custom-error-classes" data-toc="e-custom-error-classes#10-Node-js-Errors.md-e-custom-error-classes">e. Custom Error Classes</h2><p id="1267330066#p42ma0_72">Node.js allows you to create custom error classes that extend the built-in <span class="inline-code" id="1267330066#p42ma0_75">Error</span> class. This can be useful for defining specific error types and improving error categorization.</p><section><h3 id="1267330066#example-creating-a-custom-error-class" data-toc="example-creating-a-custom-error-class#10-Node-js-Errors.md-example-creating-a-custom-error-class">Example: Creating a Custom Error Class</h3><div class="detached code-block" id="1267330066#p42ma0_76"><pre><code class="language-javascript">class ValidationError extends Error {
  constructor(message: string) {
    super(message);
    this.name = 'ValidationError';
  }
}

try {
  throw new ValidationError('Invalid input data');
} catch (err) {
  if (err instanceof ValidationError) {
    console.error('Caught a validation error:', err.message);
  }
}</code></pre></div></section><section><h3 id="1267330066#explanation" data-toc="explanation#10-Node-js-Errors.md-explanation">Explanation:</h3><ul class="list" id="1267330066#p42ma0_77" start="1"><li class="list-item" id="1267330066#p42ma0_78"><p><span class="control" id="1267330066#p42ma0_79"><span class="inline-code" id="1267330066#p42ma0_81">ValidationError</span></span>: This custom error class inherits from the <span class="inline-code" id="1267330066#p42ma0_80">Error</span> class and can be used to signal validation errors.</p></li></ul></section></section><section><h2 id="1267330066#f-uncaught-exceptions" data-toc="f-uncaught-exceptions#10-Node-js-Errors.md-f-uncaught-exceptions">f. Uncaught Exceptions</h2><p id="1267330066#p42ma0_82">When an error occurs but is not caught by any error-handling code, Node.js emits an <span class="inline-code" id="1267330066#p42ma0_85">uncaughtException</span> event. Unhandled errors can cause the application to crash. You can listen for <span class="inline-code" id="1267330066#p42ma0_86">uncaughtException</span> events to log the error, clean up resources, and exit the application gracefully.</p><section><h3 id="1267330066#example-handling-uncaught-exceptions" data-toc="example-handling-uncaught-exceptions#10-Node-js-Errors.md-example-handling-uncaught-exceptions">Example: Handling Uncaught Exceptions</h3><div class="detached code-block" id="1267330066#p42ma0_87"><pre><code class="language-javascript">process.on('uncaughtException', (err) =&gt; {
  console.error('Uncaught exception:', err.message);
  process.exit(1);  // Exit the process after handling the error
});

// Simulate an uncaught exception
throw new Error('This is an uncaught exception');</code></pre></div></section><section><h3 id="1267330066#warning" data-toc="warning#10-Node-js-Errors.md-warning">Warning:</h3><ul class="list" id="1267330066#p42ma0_88" start="1"><li class="list-item" id="1267330066#p42ma0_89"><p>Catching <span class="inline-code" id="1267330066#p42ma0_90">uncaughtException</span> should be done cautiously. It's better to handle errors locally in the code, rather than relying on this global handler, as catching an uncaught exception could leave your application in an inconsistent state.</p></li></ul></section></section><section><h2 id="1267330066#g-unhandled-promise-rejections" data-toc="g-unhandled-promise-rejections#10-Node-js-Errors.md-g-unhandled-promise-rejections">g. Unhandled Promise Rejections</h2><p id="1267330066#p42ma0_91">In Node.js, when a promise is rejected and no <span class="inline-code" id="1267330066#p42ma0_93">.catch()</span> handler is provided, the runtime emits an <span class="inline-code" id="1267330066#p42ma0_94">unhandledRejection</span> event. Failing to handle promise rejections can lead to memory leaks or unintended behavior.</p><section><h3 id="1267330066#example-handling-unhandled-promise-rejections" data-toc="example-handling-unhandled-promise-rejections#10-Node-js-Errors.md-example-handling-unhandled-promise-rejections">Example: Handling Unhandled Promise Rejections</h3><div class="detached code-block" id="1267330066#p42ma0_95"><pre><code class="language-javascript">process.on('unhandledRejection', (reason, promise) =&gt; {
  console.error('Unhandled promise rejection:', reason);
  // Optionally exit the process
  process.exit(1);
});

// Simulate an unhandled promise rejection
new Promise((_, reject) =&gt; reject(new Error('This promise was rejected but not handled')));</code></pre></div></section></section><section><h2 id="1267330066#h-best-practices-for-error-handling-in-node-js" data-toc="h-best-practices-for-error-handling-in-node-js#10-Node-js-Errors.md-h-best-practices-for-error-handling-in-node-js">h. Best Practices for Error Handling in Node.js</h2><ol class="list list-decimal" id="1267330066#p42ma0_96" type="1" start="1"><li class="list-item" id="1267330066#p42ma0_98"><p><span class="control" id="1267330066#p42ma0_104">Handle Errors Explicitly</span>: Always handle errors explicitly in your code using <span class="inline-code" id="1267330066#p42ma0_105">try/catch</span>, <span class="inline-code" id="1267330066#p42ma0_106">.catch()</span>, or callbacks.</p></li><li class="list-item" id="1267330066#p42ma0_99"><p><span class="control" id="1267330066#p42ma0_107">Fail Fast</span>: When encountering critical errors, especially programmer errors (like referencing an undefined variable), fail fast by crashing the application and logging the issue.</p></li><li class="list-item" id="1267330066#p42ma0_100"><p><span class="control" id="1267330066#p42ma0_108">Graceful Shutdown</span>: When handling errors, especially in production, gracefully shut down the application after logging the error to avoid further corruption or inconsistent states.</p></li><li class="list-item" id="1267330066#p42ma0_101"><p><span class="control" id="1267330066#p42ma0_109">Use Custom Error Classes</span>: Create custom error classes for specific categories of errors to make it easier to catch and handle them appropriately.</p></li><li class="list-item" id="1267330066#p42ma0_102"><p><span class="control" id="1267330066#p42ma0_110">Log Errors</span>: Log errors in a consistent and informative format to help with debugging and post-mortem analysis.</p></li><li class="list-item" id="1267330066#p42ma0_103"><p><span class="control" id="1267330066#p42ma0_111">Avoid Using <span class="inline-code" id="1267330066#p42ma0_112">process.exit()</span> Recklessly</span>: Exiting the process abruptly without proper cleanup (e.g., closing database connections) can cause issues. Always ensure a graceful shutdown when exiting due to errors.</p></li></ol></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1051841038">11. Node intergration with Databases</h1><section><h2 id="-1051841038#introduction-to-node-js-integration-with-databases" data-toc="introduction-to-node-js-integration-with-databases#11-Node-intergration-with-Databases.md-introduction-to-node-js-integration-with-databases">Introduction to Node.js Integration with Databases</h2><p id="-1051841038#l1m2p4_7">Node.js is a powerful, event-driven JavaScript runtime that excels in building fast and scalable network applications. One of its core strengths lies in its ability to seamlessly integrate with a variety of databases, both relational (SQL-based) and non-relational (NoSQL-based). Databases are fundamental to almost every application, as they store, retrieve, and manipulate the data that powers web services, APIs, and applications.</p><p id="-1051841038#l1m2p4_8">Integrating Node.js with databases is crucial for building robust applications that require data persistence, user authentication, analytics, and more. Whether you're developing a simple CRUD (Create, Read, Update, Delete) application or a complex enterprise-grade system, understanding how to work with databases in Node.js is essential.</p></section><section><h2 id="-1051841038#why-use-node-js-with-databases" data-toc="why-use-node-js-with-databases#11-Node-intergration-with-Databases.md-why-use-node-js-with-databases">Why Use Node.js with Databases?</h2><p id="-1051841038#l1m2p4_9">Node.js's non-blocking, asynchronous nature makes it an excellent choice for database integration, especially for I/O-heavy tasks like querying databases, where it can handle many concurrent operations without being bogged down by waiting for responses. Here's why Node.js pairs well with databases:</p><ol class="list list-decimal" id="-1051841038#l1m2p4_10" type="1" start="1"><li class="list-item" id="-1051841038#l1m2p4_11"><p><span class="control" id="-1051841038#l1m2p4_15">Asynchronous Operations</span>: Node.js's asynchronous design allows multiple database queries to run in parallel without blocking the main event loop, resulting in faster performance and scalability.</p></li><li class="list-item" id="-1051841038#l1m2p4_12"><p><span class="control" id="-1051841038#l1m2p4_16">Support for Multiple Databases</span>: Node.js supports a wide variety of databases, including: </p><ul class="list" id="-1051841038#l1m2p4_17" start="1"><li class="list-item" id="-1051841038#l1m2p4_18"><p><span class="control" id="-1051841038#l1m2p4_20">Relational Databases</span> (SQL): MySQL, PostgreSQL, Microsoft SQL Server (MSSQL), SQLite, etc.</p></li><li class="list-item" id="-1051841038#l1m2p4_19"><p><span class="control" id="-1051841038#l1m2p4_21">Non-relational Databases</span> (NoSQL): MongoDB, Redis, CouchDB, etc.</p></li></ul></li><li class="list-item" id="-1051841038#l1m2p4_13"><p><span class="control" id="-1051841038#l1m2p4_22">Active Ecosystem</span>: The Node.js ecosystem has many libraries and ORM (Object Relational Mapping) tools that make it easier to interact with databases, such as <span class="inline-code" id="-1051841038#l1m2p4_23">mongoose</span> for MongoDB, <span class="inline-code" id="-1051841038#l1m2p4_24">sequelize</span> for SQL databases, and <span class="inline-code" id="-1051841038#l1m2p4_25">TypeORM</span> for various databases.</p></li><li class="list-item" id="-1051841038#l1m2p4_14"><p><span class="control" id="-1051841038#l1m2p4_26">JSON and JavaScript Compatibility</span>: With JSON as a common data format and JavaScript used across the stack, integration between Node.js and NoSQL databases (like MongoDB) is often seamless, reducing the need for complex data transformation.</p></li></ol></section><section><h2 id="-1051841038#types-of-databases-you-can-use-with-node-js" data-toc="types-of-databases-you-can-use-with-node-js#11-Node-intergration-with-Databases.md-types-of-databases-you-can-use-with-node-js">Types of Databases You Can Use with Node.js</h2><section><h3 id="-1051841038#1-relational-databases-sql-based" data-toc="1-relational-databases-sql-based#11-Node-intergration-with-Databases.md-1-relational-databases-sql-based">1. Relational Databases (SQL-based)</h3><p id="-1051841038#l1m2p4_30">Relational databases store data in structured formats like tables with predefined schemas. SQL (Structured Query Language) is used to interact with the data.</p><ul class="list" id="-1051841038#l1m2p4_31" start="1"><li class="list-item" id="-1051841038#l1m2p4_33"><p><span class="control" id="-1051841038#l1m2p4_37">MySQL</span>: One of the most popular open-source databases used for web applications. It is known for its reliability and scalability.</p></li><li class="list-item" id="-1051841038#l1m2p4_34"><p><span class="control" id="-1051841038#l1m2p4_38">PostgreSQL</span>: A powerful, open-source object-relational database known for its extensibility, standards compliance, and strong support for complex queries.</p></li><li class="list-item" id="-1051841038#l1m2p4_35"><p><span class="control" id="-1051841038#l1m2p4_39">Microsoft SQL Server (MSSQL)</span>: A robust enterprise-grade relational database management system from Microsoft, commonly used in large organizations.</p></li><li class="list-item" id="-1051841038#l1m2p4_36"><p><span class="control" id="-1051841038#l1m2p4_40">SQLite</span>: A lightweight, self-contained SQL database engine often used for local storage in smaller applications or development environments.</p></li></ul></section><section><h3 id="-1051841038#2-non-relational-databases-nosql-based" data-toc="2-non-relational-databases-nosql-based#11-Node-intergration-with-Databases.md-2-non-relational-databases-nosql-based">2. Non-relational Databases (NoSQL-based)</h3><p id="-1051841038#l1m2p4_42">NoSQL databases are designed to handle unstructured or semi-structured data and are known for their flexibility, scalability, and high performance.</p><ul class="list" id="-1051841038#l1m2p4_43" start="1"><li class="list-item" id="-1051841038#l1m2p4_45"><p><span class="control" id="-1051841038#l1m2p4_48">MongoDB</span>: A document-based NoSQL database where data is stored in flexible, JSON-like documents. It is highly scalable and ideal for handling large volumes of unstructured data.</p></li><li class="list-item" id="-1051841038#l1m2p4_46"><p><span class="control" id="-1051841038#l1m2p4_49">Redis</span>: An in-memory key-value store known for its blazing-fast read/write performance, often used for caching and real-time data processing.</p></li><li class="list-item" id="-1051841038#l1m2p4_47"><p><span class="control" id="-1051841038#l1m2p4_50">CouchDB</span>: Another document-based NoSQL database, CouchDB uses a distributed architecture and stores data as JSON documents, making it suitable for distributed systems.</p></li></ul></section></section><section><h2 id="-1051841038#node-js-database-integration-approaches" data-toc="node-js-database-integration-approaches#11-Node-intergration-with-Databases.md-node-js-database-integration-approaches">Node.js Database Integration Approaches</h2><p id="-1051841038#l1m2p4_51">There are two main approaches for integrating Node.js with databases:</p><section><h3 id="-1051841038#1-using-query-builders-and-raw-queries" data-toc="1-using-query-builders-and-raw-queries#11-Node-intergration-with-Databases.md-1-using-query-builders-and-raw-queries">1. Using Query Builders and Raw Queries</h3><p id="-1051841038#l1m2p4_54">For developers who prefer greater control over SQL queries or who need to work directly with database-specific features, raw queries or query builders like <span class="control" id="-1051841038#l1m2p4_57">Knex.js</span> are great options. These allow developers to write SQL queries directly or through a builder that generates SQL dynamically.</p><section><h4 id="-1051841038#example-raw-query-with-mysql" data-toc="example-raw-query-with-mysql#11-Node-intergration-with-Databases.md-example-raw-query-with-mysql">Example: Raw Query with MySQL</h4><div class="detached code-block" id="-1051841038#l1m2p4_58"><pre><code class="language-javascript">const mysql = require('mysql2/promise');

async function fetchTodos() {
  const connection = await mysql.createConnection({ /* connection details */ });
  const [rows] = await connection.execute('SELECT * FROM todos');
  return rows;
}</code></pre></div></section></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1587952552">11.1 Node.js Database Integration Approaches</h1><p id="1587952552#ydw27m_3">There are two main approaches for integrating Node.js with databases:</p><section><h2 id="1587952552#1-using-query-builders-and-raw-queries" data-toc="1-using-query-builders-and-raw-queries#Node-js-Database-Integration-Approaches.md-1-using-query-builders-and-raw-queries">1. Using Query Builders and Raw Queries</h2><p id="1587952552#ydw27m_7">For developers who prefer greater control over SQL queries or who need to work directly with database-specific features, raw queries or query builders like <span class="control" id="1587952552#ydw27m_10">Knex.js</span> are great options. These allow developers to write SQL queries directly or through a builder that generates SQL dynamically.</p><section><h3 id="1587952552#example-raw-query-with-mysql" data-toc="example-raw-query-with-mysql#Node-js-Database-Integration-Approaches.md-example-raw-query-with-mysql">Example: Raw Query with MySQL</h3><div class="detached code-block" id="1587952552#ydw27m_11"><pre><code class="language-ts">const mysql = require('mysql2/promise');

async function fetchTodos() {
  const connection = await mysql.createConnection({ /* connection details */ });
  const [rows] = await connection.execute('SELECT * FROM todos');
  return rows;
}</code></pre></div></section></section><section><h2 id="1587952552#2-using-orm-object-relational-mapping" data-toc="2-using-orm-object-relational-mapping#Node-js-Database-Integration-Approaches.md-2-using-orm-object-relational-mapping">2. Using ORM (Object-Relational Mapping)</h2><p id="1587952552#ydw27m_13">ORMs abstract database interactions, allowing developers to work with objects and models instead of raw SQL queries. This approach is particularly useful for those who want to avoid writing raw SQL and focus on the business logic.</p><p id="1587952552#ydw27m_14">Popular Node.js ORMs:</p><ul class="list" id="1587952552#ydw27m_15" start="1"><li class="list-item" id="1587952552#ydw27m_17"><p><span class="control" id="1587952552#ydw27m_21">Drizzle</span>: It&rsquo;s the only ORM with both relational and SQL-like query APIs, providing you the best of both worlds when it comes to accessing your relational data.</p></li><li class="list-item" id="1587952552#ydw27m_18"><p><span class="control" id="1587952552#ydw27m_22">Sequelize</span>: A promise-based ORM for MySQL, PostgreSQL, and SQLite that provides a comprehensive set of features, including model definition, associations, and transactions.</p></li><li class="list-item" id="1587952552#ydw27m_19"><p><span class="control" id="1587952552#ydw27m_23">TypeORM</span>: A versatile ORM that supports a wide variety of databases, including MySQL, PostgreSQL, SQLite, and MongoDB. It works well with TypeScript and supports decorators for defining models.</p></li><li class="list-item" id="1587952552#ydw27m_20"><p><span class="control" id="1587952552#ydw27m_24">Mongoose</span>: A popular ODM (Object Data Modeling) library for MongoDB that allows for defining schemas, models, and relationships in a simple and efficient way.</p></li></ul></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1791252104">MSSQL</h1><div class="container"><figure class="image-container"><img class="center image image-size" id="1791252104#-alycvs_3" alt="mssql" title="mssql" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/mssql.png" width="800" height="800"><figcaption class="center-text">mssql</figcaption></figure></div><section><h2 id="1791252104#msql-todo-crud-app" data-toc="msql-todo-crud-app#MSSQL-Server.md-msql-todo-crud-app">MSQL Todo CRUD App</h2><section><h3 id="1791252104#prerequisites" data-toc="prerequisites#MSSQL-Server.md-prerequisites">Prerequisites</h3><p id="1791252104#-alycvs_8">Make sure you have SQL Schema for <span class="inline-code" id="1791252104#-alycvs_12">todo_tbl</span>: Here&rsquo;s the schema that corresponds to the table used in this code:</p><div class="detached code-block" id="1791252104#-alycvs_9"><pre><code class="language-sql">CREATE TABLE todo_tbl (
  id INT IDENTITY(1,1) PRIMARY KEY,         -- IDENTITY is used for auto-increment in MSSQL
  task NVARCHAR(255) NOT NULL,              -- NVARCHAR is used for variable-length Unicode strings
  completed BIT DEFAULT 0,                  -- BIT is used for boolean-like columns (0 = false, 1 = true)
  created_at DATETIME DEFAULT GETDATE()     -- DATETIME for timestamps, GETDATE() returns current timestamp
);</code></pre></div><section><h4 id="1791252104#step-1-install-dependencies" data-toc="step-1-install-dependencies#MSSQL-Server.md-step-1-install-dependencies">Step 1: Install Dependencies</h4><div class="detached code-block" id="1791252104#-alycvs_13"><pre><code class="language-bash">npm install mssql 
npm install typescript @types/node @types/mssql --save-dev</code></pre></div></section></section><section><h3 id="1791252104#step-2-configure-mssql-connection-and-implement-crud-functions" data-toc="step-2-configure-mssql-connection-and-implement-crud-functions#MSSQL-Server.md-step-2-configure-mssql-connection-and-implement-crud-functions">** Step 2: Configure MSSQL Connection and Implement CRUD Functions**</h3><p id="1791252104#-alycvs_14">Create a TypeScript file to handle database operations.</p><ol class="list list-decimal" id="1791252104#-alycvs_15" type="1" start="1"><li class="list-item" id="1791252104#-alycvs_18"><p><span class="control" id="1791252104#-alycvs_19">Create <span class="inline-code" id="1791252104#-alycvs_20">index.ts</span></span></p></li></ol><div class="detached code-block" id="1791252104#-alycvs_16"><pre><code class="language-javascript">import sql from 'mssql';

// MSSQL Connection Configuration
const config: sql.config = {
  user: 'sa', // Replace with your SQL Server username
  password: '@StrongPassword', // Replace with your SQL Server password
  server: 'localhost', // Server name or IP address
  database: 'todo_db',
  options: {
    encrypt: false, // Set to true if you're using Azure or SSL
    trustServerCertificate: true, // Change to true for local dev / self-signed certs
  },
  pool: {
    max: 10,
    min: 0,
    idleTimeoutMillis: 30000,
  },
};

// Initialize Connection Pool
const poolPromise: Promise&lt;sql.ConnectionPool&gt; = new sql.ConnectionPool(config)
  .connect()
  .then((pool: sql.ConnectionPool) =&gt; {
    console.log('Connected to MSSQL');
    return pool;
  })
  .catch((err: Error) =&gt; {
    console.error('Database Connection Failed! Bad Config: ', err);
    throw err;
  });

// Pool and Request Initialization (Extracted)
let pool: sql.ConnectionPool;
let request: sql.Request;

async function initDBConnection(): Promise&lt;void&gt; {
  pool = await poolPromise;
  request = pool.request(); // Reuse the same request object for all operations
}

// Create a new Todo in `todo_tbl`
async function createTodo(task: string, completed: boolean): Promise&lt;void&gt; {
  try {
    request.input('task', sql.NVarChar(255), task);
    request.input('completed', sql.Bit, completed);
    const result: sql.IResult&lt;{ id: number }&gt; = await request.query(
      'INSERT INTO todo_tbl (task, completed, created_at) VALUES (@task, @completed, GETDATE()); SELECT SCOPE_IDENTITY() as id;'
    );
    console.log('Todo Created with ID:', result.recordset[0].id);
  } catch (err: any) {
    console.error('Error creating todo:', err);
  }
}

// Fetch all Todos from `todo_tbl`
async function fetchAllTodos(): Promise&lt;void&gt; {
  try {
    const result: sql.IResult&lt;any&gt; = await request.query('SELECT * FROM todo_tbl');
    console.log('All Todos:', result.recordset);
  } catch (err: any) {
    console.error('Error fetching todos:', err);
  }
}

// Fetch Todo by ID from `todo_tbl`
async function fetchTodoById(id: number): Promise&lt;void&gt; {
  try {
    request.input('id', sql.Int, id);
    const result: sql.IResult&lt;any&gt; = await request.query('SELECT * FROM todo_tbl WHERE id = @id');
    
    if (result.recordset.length &gt; 0) {
      console.log('Todo:', result.recordset[0]);
    } else {
      console.log(`Todo with ID ${id} not found.`);
    }
  } catch (err: any) {
    console.error('Error fetching todo by ID:', err);
  }
}

// Delete Todo by ID from `todo_tbl`
async function deleteTodoById(id: number): Promise&lt;void&gt; {
  try {
    request.input('id', sql.Int, id);
    const result: sql.IResult&lt;any&gt; = await request.query('DELETE FROM todo_tbl WHERE id = @id');
    
    if (result.rowsAffected[0] &gt; 0) {
      console.log(`Todo deleted with ID: ${id}`);
    } else {
      console.log(`No Todo found with ID: ${id}`);
    }
  } catch (err: any) {
    console.error('Error deleting todo:', err);
  }
}

// Execute CRUD operations
(async () =&gt; {
  try {
    await initDBConnection(); // Initialize the pool and request
    await createTodo('Learn MSSQL', false);
    await fetchAllTodos();
    await fetchTodoById(1);
    await deleteTodoById(1);
    await fetchAllTodos(); // To verify deletion
  } catch (err) {
    console.error('Error during CRUD operations:', err);
  }
})();</code></pre></div><section><h4 id="1791252104#step-3-run-the-app" data-toc="step-3-run-the-app#MSSQL-Server.md-step-3-run-the-app">Step 3: Run the App</h4><div class="detached code-block" id="1791252104#-alycvs_21"><pre><code class="language-bash">npm run dev</code></pre></div></section></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1620389036">PostgreSQL</h1><div class="container"><figure class="image-container"><img class="center image image-size" id="-1620389036#-h4f4g4_3" alt="postgres" title="postgres" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/postgres.png" width="2048" height="2042"><figcaption class="center-text">postgres</figcaption></figure></div><section><h2 id="-1620389036#mysql-todo-crud-app" data-toc="mysql-todo-crud-app#POSTGRESQL.md-mysql-todo-crud-app">MySQL Todo CRUD App</h2><section><h3 id="-1620389036#prerequisites" data-toc="prerequisites#POSTGRESQL.md-prerequisites">Prerequisites</h3><p id="-1620389036#-h4f4g4_7">Make sure you have SQL Schema for <span class="inline-code" id="-1620389036#-h4f4g4_13">todo_tbl</span>: Here&rsquo;s the schema that corresponds to the table used in this code:</p><div class="detached code-block" id="-1620389036#-h4f4g4_8"><pre><code class="language-sql">CREATE TABLE todo_tbl (
  id SERIAL PRIMARY KEY,              -- SERIAL auto-increments the ID
  task VARCHAR(255) NOT NULL,         -- Task is a string with a max length of 255 characters
  completed BOOLEAN DEFAULT FALSE,    -- Boolean, default is FALSE
  created_at TIMESTAMPTZ DEFAULT NOW()  -- Timestamp with timezone, defaulting to the current timestamp
);</code></pre></div><section><h4 id="-1620389036#step-1-install-dependencies" data-toc="step-1-install-dependencies#POSTGRESQL.md-step-1-install-dependencies">Step 1: Install Dependencies</h4><div class="detached code-block" id="-1620389036#-h4f4g4_14"><pre><code class="language-bash">npm install pg 
npm install typescript @types/node @types/pg --save-dev</code></pre></div><p id="-1620389036#-h4f4g4_15">download the PostgresSQL Server (<a href="https://www.postgresql.org/download/">https://www.postgresql.org/download/</a>)</p></section><section><h4 id="-1620389036#step-2-postgresql-connection-and-crud-functions" data-toc="step-2-postgresql-connection-and-crud-functions#POSTGRESQL.md-step-2-postgresql-connection-and-crud-functions">Step 2: PostgreSQL Connection and CRUD Functions</h4><p id="-1620389036#-h4f4g4_17">Create a file <span class="inline-code" id="-1620389036#-h4f4g4_19">index.ts</span>.</p><div class="detached code-block" id="-1620389036#-h4f4g4_18"><pre><code class="language-javascript">import { Pool } from 'pg';

// PostgreSQL Connection
const pool = new Pool({
  user: 'admin',
  host: 'localhost',
  database: 'todo_db',
  password: '@StrongPassword',
  port: 5432,
});

// Create a new Todo item in the `todo_tbl` table
async function createTodo(task: string, completed: boolean) {
  const result = await pool.query(
    'INSERT INTO todo_tbl (task, completed, created_at) VALUES ($1, $2, NOW()) RETURNING *',
    [task, completed]
  );
  console.log('Todo Created:', result.rows[0]);
}

// Fetch all Todos from the `todo_tbl` table
async function fetchAllTodos() {
  const result = await pool.query('SELECT * FROM todo_tbl');
  console.log('All Todos:', result.rows);
}

// Fetch a Todo by ID from the `todo_tbl` table
async function fetchTodoById(id: number) {
  const result = await pool.query('SELECT * FROM todo_tbl WHERE id = $1', [id]);
  console.log('Todo by ID:', result.rows[0]);
}

// Delete a Todo by ID from the `todo_tbl` table
async function deleteTodoById(id: number) {
  await pool.query('DELETE FROM todo_tbl WHERE id = $1', [id]);
  console.log('Todo deleted with ID:', id);
}

// Execute CRUD operations
(async () =&gt; {
  await createTodo('Learn PostgreSQL', false);
  await fetchAllTodos();
  await fetchTodoById(1);
  // await deleteTodoById(1);
})();</code></pre></div></section><section><h4 id="-1620389036#step-3-run-the-app" data-toc="step-3-run-the-app#POSTGRESQL.md-step-3-run-the-app">Step 3: Run the App</h4><div class="detached code-block" id="-1620389036#-h4f4g4_20"><pre><code class="language-bash">npm run dev</code></pre></div></section></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="73844866">MySQL</h1><div class="container"><figure class="image-container"><img class="center image image-size" id="73844866#yd8jmg_3" alt="mysql" title="mysql" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/mysql.png" width="2048" height="1064"><figcaption class="center-text">mysql</figcaption></figure></div><section><h2 id="73844866#mysql-todo-crud-app" data-toc="mysql-todo-crud-app#MYSQL.md-mysql-todo-crud-app">MySQL Todo CRUD App</h2><section><h3 id="73844866#prerequisites" data-toc="prerequisites#MYSQL.md-prerequisites">Prerequisites</h3><p id="73844866#yd8jmg_7">Make sure you have SQL Schema for <span class="inline-code" id="73844866#yd8jmg_13">todo_tbl</span>: Here&rsquo;s the schema that corresponds to the table used in this code:</p><div class="detached code-block" id="73844866#yd8jmg_8"><pre><code class="language-sql">CREATE TABLE todo_tbl (
    id INT IDENTITY(1,1) PRIMARY KEY,
    task NVARCHAR(255) NOT NULL,
    completed BIT NOT NULL,
    created_at DATETIME DEFAULT GETDATE()
);</code></pre></div><section><h4 id="73844866#step-1-install-dependencies" data-toc="step-1-install-dependencies#MYSQL.md-step-1-install-dependencies">Step 1: Install Dependencies</h4><div class="detached code-block" id="73844866#yd8jmg_14"><pre><code class="language-bash">npm install mysql2 typescript @types/node</code></pre></div><p id="73844866#yd8jmg_15">download MySQL Server (<a href="https://dev.mysql.com/downloads/installer/">https://dev.mysql.com/downloads/installer/</a>)</p></section><section><h4 id="73844866#step-2-mysql-connection-and-crud-functions" data-toc="step-2-mysql-connection-and-crud-functions#MYSQL.md-step-2-mysql-connection-and-crud-functions">Step 2: MySQL Connection and CRUD Functions</h4><p id="73844866#yd8jmg_17">Create a file <span class="inline-code" id="73844866#yd8jmg_19">mysql-todo.ts</span>.</p><div class="detached code-block" id="73844866#yd8jmg_18"><pre><code class="language-javascript">import mysql, { PoolOptions, RowDataPacket, ResultSetHeader } from 'mysql2/promise';

// Define connection pool options
const access: PoolOptions = {
  host: 'localhost',
  user: 'admin',
  password: '@StrongPassword',
  database: 'todo_db',
};

// Create a connection pool
const pool = mysql.createPool(access);

// CRUD Operations using `todo_tbl`

// Create a Todo item in `todo_tbl`
async function createTodo(task: string, completed: boolean) {
  const [result] = await pool.execute&lt;ResultSetHeader&gt;(
    'INSERT INTO todo_tbl (task, completed, created_at) VALUES (?, ?, NOW())', 
    [task, completed]
  );
  console.log('Todo Created:', result);
}

// Fetch all Todos from `todo_tbl`
async function fetchAllTodos() {
  const [todos] = await pool.query&lt;RowDataPacket[]&gt;(
    'SELECT * FROM todo_tbl'
  );
  console.log('All Todos:', todos);
}

// Fetch Todo by ID from `todo_tbl`
async function fetchTodoById(id: number) {
  const [todo] = await pool.query&lt;RowDataPacket[]&gt;(
    'SELECT * FROM todo_tbl WHERE id = ?', 
    [id]
  );
  console.log('Todo by ID:', todo[0]);
}

// Delete Todo by ID from `todo_tbl`
async function deleteTodoById(id: number) {
  const [result] = await pool.execute&lt;ResultSetHeader&gt;(
    'DELETE FROM todo_tbl WHERE id = ?', 
    [id]
  );
  console.log('Todo deleted with ID:', id);
}

// Execute CRUD operations
(async () =&gt; {
  try {
    await createTodo('Learn TypeScript', false);
    await createTodo('Learn JavaScript', false);
    await createTodo('Learn C#', false);
    await fetchAllTodos();
    // Uncomment the following lines if you want to fetch or delete by ID
    // await fetchTodoById(1);
    // await deleteTodoById(1);
  } catch (error) {
    console.error('Error:', error);
  }
})();</code></pre></div></section><section><h4 id="73844866#step-3-run-the-app" data-toc="step-3-run-the-app#MYSQL.md-step-3-run-the-app">Step 3: Run the App</h4><div class="detached code-block" id="73844866#yd8jmg_20"><pre><code class="language-bash">npm run dev</code></pre></div></section></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1954237522">MongoDB</h1><div class="container"><figure class="image-container"><img class="center image image-size" id="1954237522#z7r76fc_3" alt="mongodb" title="mongodb" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/mongodb.svg" width="800" height="800"><figcaption class="center-text">mongodb</figcaption></figure></div><section><h2 id="1954237522#mongodb-todo-crud-app" data-toc="mongodb-todo-crud-app#MONGODB.md-mongodb-todo-crud-app">MongoDB Todo CRUD App</h2><section><h3 id="1954237522#prerequisites" data-toc="prerequisites#MONGODB.md-prerequisites">Prerequisites</h3><ol class="list list-decimal" id="1954237522#z7r76fc_12" type="1" start="1"><li class="list-item" id="1954237522#z7r76fc_15"><p id="1954237522#z7r76fc_17"><span class="control" id="1954237522#z7r76fc_19">Install MongoDB</span>:</p><ul class="list" id="1954237522#z7r76fc_18" start="1"><li class="list-item" id="1954237522#z7r76fc_20"><p>Download and install MongoDB (<a href="https://www.mongodb.com/try/download/community">https://www.mongodb.com/try/download/community</a>) and ensure it's running on your local machine.</p></li><li class="list-item" id="1954237522#z7r76fc_21"><p>Alternatively, you can use a cloud MongoDB service like MongoDB Atlas (<a href="https://www.mongodb.com/atlas">https://www.mongodb.com/atlas</a>).</p></li></ul></li><li class="list-item" id="1954237522#z7r76fc_16"><p id="1954237522#z7r76fc_24"><span class="control" id="1954237522#z7r76fc_26">Install Dependencies</span>:</p><ul class="list" id="1954237522#z7r76fc_25" start="1"><li class="list-item" id="1954237522#z7r76fc_27"><p>You'll need <span class="inline-code" id="1954237522#z7r76fc_28">mongodb</span> and TypeScript-related dependencies.</p></li></ul></li></ol><div class="detached code-block" id="1954237522#z7r76fc_13"><pre><code class="language-bash">npm install mongodb typescript @types/node</code></pre></div></section><section><h3 id="1954237522#mongodb-schema" data-toc="mongodb-schema#MONGODB.md-mongodb-schema">MongoDB Schema</h3><p id="1954237522#z7r76fc_30">Unlike MySQL, MongoDB doesn't require a predefined schema. A document in the <span class="inline-code" id="1954237522#z7r76fc_35">todo_tbl</span> collection might look like this:</p><div class="detached code-block" id="1954237522#z7r76fc_31"><pre><code class="language-json">{
  &quot;_id&quot;: ObjectId(&quot;6139db485f13b720f07b7a71&quot;),
  &quot;task&quot;: &quot;Learn TypeScript&quot;,
  &quot;completed&quot;: false,
  &quot;created_at&quot;: ISODate(&quot;2021-09-09T10:20:00Z&quot;)
}</code></pre></div><p id="1954237522#z7r76fc_32">MongoDB will automatically create the collection and documents as needed.</p></section><section><h3 id="1954237522#step-1-create-mongodb-crud-app" data-toc="step-1-create-mongodb-crud-app#MONGODB.md-step-1-create-mongodb-crud-app">Step 1: Create MongoDB CRUD App</h3><p id="1954237522#z7r76fc_37">Create a file named <span class="inline-code" id="1954237522#z7r76fc_41">mongodb-todo.ts</span>.</p><div class="detached code-block" id="1954237522#z7r76fc_38"><pre><code class="language-javascript">import { MongoClient, ObjectId } from 'mongodb';

// Encode special characters in the password
const encodedPassword = encodeURIComponent('@StrongPassword');

//'mongodb://admin:@StrongPassword@localhost:27017/todo_db?authSource=admin'

// MongoDB connection string
const uri = `mongodb://admin:${encodedPassword}@localhost:27017/todo_db?authSource=admin`;

// MongoDB database and collection
const dbName = 'todo_db';
const collectionName = 'todo_collection';  // Changed collection name to `todo_collection`

// Initialize MongoDB client with proper options
const client = new MongoClient(uri);

async function connectToMongoDB() {
  try {
    await client.connect();
    console.log('Connected to MongoDB');
  } catch (error:any) {
    console.error('Error connecting to MongoDB:', error.message);
    throw error;
  }
}

// Create a new Todo item in `todo_collection`
async function createTodo(task: string, completed: boolean) {
  try {
    const db = client.db(dbName);
    const collection = db.collection(collectionName);
    const result = await collection.insertOne({
      task,
      completed,
      created_at: new Date(),
    });
    console.log('Todo Created:', result.insertedId);
  } catch (error:any) {
    console.error('Error creating todo:', error.message);
  }
}

// Fetch all Todos from `todo_collection`
async function fetchAllTodos() {
  try {
    const db = client.db(dbName);
    const collection = db.collection(collectionName);
    const todos = await collection.find({}).toArray();
    console.log('All Todos:', todos);
  } catch (error:any) {
    console.error('Error fetching todos:', error.message);
  }
}

// Fetch a Todo by ID from `todo_collection`
async function fetchTodoById(id: string) {
  try {
    const db = client.db(dbName);
    const collection = db.collection(collectionName);
    const todo = await collection.findOne({ _id: new ObjectId(id) });
    if (todo) {
      console.log('Todo by ID:', todo);
    } else {
      console.log(`Todo with ID ${id} not found.`);
    }
  } catch (error:any) {
    console.error('Error fetching todo by ID:', error.message);
  }
}

// Delete a Todo by ID from `todo_collection`
async function deleteTodoById(id: string) {
  try {
    const db = client.db(dbName);
    const collection = db.collection(collectionName);
    const result = await collection.deleteOne({ _id: new ObjectId(id) });
    if (result.deletedCount &gt; 0) {
      console.log(`Todo deleted with ID: ${id}`);
    } else {
      console.log(`No Todo found with ID: ${id}`);
    }
  } catch (error:any) {
    console.error('Error deleting todo:', error.message);
  }
}

// Run MongoDB CRUD Operations
(async () =&gt; {
  try {
    await connectToMongoDB();

    // Example operations (uncomment to test)

    // await createTodo('Learn MongoDB', false);
    // await createTodo('Learn JavaScript', false);
    // await createTodo('Learn TypeScript', false);

    await fetchAllTodos();

    // Example ID (replace with an actual ID from your database)
    // const exampleId = '6139db485f13b720f07b7a71'; // Replace with a valid ObjectId
    // await fetchTodoById(exampleId);

    // Uncomment to delete by ID
    // await deleteTodoById(exampleId);

    // await fetchAllTodos();
  } catch (error:any) {
    console.error('Error:', error.message);
  } finally {
    await client.close(); // Ensure MongoDB client is closed when done
  }
})();</code></pre></div></section><section><h3 id="1954237522#step-2-run-the-app" data-toc="step-2-run-the-app#MONGODB.md-step-2-run-the-app">Step 2: Run the App</h3><div class="detached code-block" id="1954237522#z7r76fc_43"><pre><code class="language-bash">npx ts-node mongodb-todo.ts</code></pre></div></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1580950209">12. Worker Threads in Node.JS (Multithreading)</h1><section><h2 id="-1580950209#overview" data-toc="overview#12-Multithreading-with-worker-threads.md-overview">Overview</h2><p id="-1580950209#-vea8hx_8"><span class="control" id="-1580950209#-vea8hx_9">Node.js</span> runs the javascript code using only a single thread, which means only one statement can be executed at a time. However, Nodejs itself is multithreaded and supplies hidden threads in js using the <span class="control" id="-1580950209#-vea8hx_10">libuv library</span>, which handles operations like network requests or reading a file from a disk. Nodejs introduced the <span class="control" id="-1580950209#-vea8hx_11">worker threads module</span>, which allows us to create <span class="inline-code" id="-1580950209#-vea8hx_12">multiple tasks in parallel</span> and execute those tasks. These worker threads divide CPU-bound tasks to many workers for optimization and do not block the main thread.</p></section><section><h2 id="-1580950209#introduction" data-toc="introduction#12-Multithreading-with-worker-threads.md-introduction">Introduction</h2><ul class="list" id="-1580950209#-vea8hx_13" start="1"><li class="list-item" id="-1580950209#-vea8hx_14"><p>Threads are like a small process: they have their instruction pointer and can conduct one Javascript task at a time. Threads reside within a process's memory and they don't have their memory. The execution of threads is similar to that of processes.</p></li><li class="list-item" id="-1580950209#-vea8hx_15"><p>Javascript is single-threaded by default which means only one thread is available to perform all the operations. This was the main drawback of the javascript which led to the implementation of server-side Asynchronous I/O, which would reduce the race among the thread in a multithreading environment.</p></li><li class="list-item" id="-1580950209#-vea8hx_16"><p>Lets us now see how javascript has evolved. Javascript has introduced a new concept to prevent the limitation we are facing, that is, Web Workers. Web Workers (threads in js) are mainly used to perform CPU-intensive Javascript tasks. They can perform long-running tasks without affecting or blocking the main execution thread.</p></li><li class="list-item" id="-1580950209#-vea8hx_17"><p>Using a Constructor, we can create a worker object, which will run a js file. This js file includes code to run the worker thread; these workers run in some other global context that is different from the current window. However, Node.js built-in asynchronous I/O operations are more efficient than Workers can be. Web workers are not of much help with I/O-intensive work.</p></li></ul></section><section><h2 id="-1580950209#need-for-parallel-processing" data-toc="need-for-parallel-processing#12-Multithreading-with-worker-threads.md-need-for-parallel-processing">Need for Parallel Processing</h2><p id="-1580950209#-vea8hx_18">Imagine if we do CPU-intensive tasks synchronously, such as a loop with a large number of iterations, fetching data from an API or external resource, and handling file system I/O. This will create a large block of synchronous code that will block the rest of the code. Meanwhile, if another request is sent, it will be waiting for a much larger period before the response is sent back to the user.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1580950209#-vea8hx_19" alt="event_loop.png" title="event_loop.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/event_loop.png" width="1700" height="1162"><figcaption class="center-text">event_loop.png</figcaption></figure></div><p id="-1580950209#-vea8hx_20">Hence, there is a need for parallel computation where the incoming requests don't have to wait. But due to the single-threaded nature of Node.js, the main loop can take up only one task at a time. Hence worker threads are required to provide the parallel computation. The event loop takes on the synchronous part of all the processes, and the time taking asynchronous part is assigned to a worker thread provided by the <span class="control" id="-1580950209#-vea8hx_21">libuv.</span> The threads then parallel execute the asynchronous task in the background and respond to the event loop once the process is completed.</p></section><section><h2 id="-1580950209#worker-threads-in-node-js" data-toc="worker-threads-in-node-js#12-Multithreading-with-worker-threads.md-worker-threads-in-node-js">Worker Threads in Node JS</h2><p id="-1580950209#-vea8hx_22">When a Node.js process is executed, it runs:</p><ul class="list" id="-1580950209#-vea8hx_23" start="1"><li class="list-item" id="-1580950209#-vea8hx_29"><p><span class="control" id="-1580950209#-vea8hx_34">One Process:</span> It is the Node.js global object that can be accessed from anywhere and has details about what&rsquo;s being executed at a time.</p></li><li class="list-item" id="-1580950209#-vea8hx_30"><p><span class="control" id="-1580950209#-vea8hx_35">One Thread:</span> Javascript being single-threaded, has only one main thread for the execution of tasks at a given time.</p></li><li class="list-item" id="-1580950209#-vea8hx_31"><p><span class="control" id="-1580950209#-vea8hx_36">One Event Loop:</span> This plays an important role in the asynchronous nature and non-blocking I/O of Node.js, by offloading tasks to the system kernel whenever possible through promises, callbacks and async/ await.</p></li><li class="list-item" id="-1580950209#-vea8hx_32"><p><span class="control" id="-1580950209#-vea8hx_37">One JS Engine Instance:</span> This is a computer program that executes js code.</p></li><li class="list-item" id="-1580950209#-vea8hx_33"><p><span class="control" id="-1580950209#-vea8hx_38">One Node.js Instance:</span> This is a computer program that executes Node.js code.</p></li></ul><p id="-1580950209#-vea8hx_24">In simple words, Node runs on <span class="control" id="-1580950209#-vea8hx_39">one main thread</span>, and there can only be a single task executing at a time in the event loop. However, there is a downside: if we have CPU-intensive code, like reading a file from the disk or any complex calculations in a large dataset, then this can block the main thread and hence another process from being executed.</p><p id="-1580950209#-vea8hx_25">A function is known as <span class="control" id="-1580950209#-vea8hx_40">blocking</span> if the main event loop must wait until it has finished executing the following command. A <span class="control" id="-1580950209#-vea8hx_41"><span class="emphasis" id="-1580950209#-vea8hx_43">Non-blocking function</span></span> will allow the main event loop to continue executing further code and alerts the main loop once it has finished by calling a <span class="emphasis" id="-1580950209#-vea8hx_42">callback</span>.</p><p id="-1580950209#-vea8hx_26">It&rsquo;s important to differentiate between <span class="emphasis" id="-1580950209#-vea8hx_44">CPU operations</span> and <span class="emphasis" id="-1580950209#-vea8hx_45">I/O (input/output) operations</span>, as only I/O operations are run <span class="emphasis" id="-1580950209#-vea8hx_46">concurrently because they are executed asynchronously</span>. So the main <span class="emphasis" id="-1580950209#-vea8hx_47">goal of Worker threads in js is to enhance the performance of CPU-intensive operations</span>, <span class="emphasis" id="-1580950209#-vea8hx_48"><span class="control" id="-1580950209#-vea8hx_49">and not I/O operations</span></span>.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1580950209#-vea8hx_27" alt="threads.png" title="threads.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/threads.png" width="1700" height="804"><figcaption class="center-text">threads.png</figcaption></figure></div><section><h3 id="-1580950209#hence-worker-threads-in-js-have-the-following-properties" data-toc="hence-worker-threads-in-js-have-the-following-properties#12-Multithreading-with-worker-threads.md-hence-worker-threads-in-js-have-the-following-properties">Hence worker threads in js have the following properties:</h3><ol class="list list-decimal" id="-1580950209#-vea8hx_50" type="1" start="1"><li class="list-item" id="-1580950209#-vea8hx_51"><p>One process</p></li><li class="list-item" id="-1580950209#-vea8hx_52"><p>Multiple threads</p></li><li class="list-item" id="-1580950209#-vea8hx_53"><p>One event loop per thread</p></li><li class="list-item" id="-1580950209#-vea8hx_54"><p>One JS Engine Instance per thread</p></li><li class="list-item" id="-1580950209#-vea8hx_55"><p>One Node.js Instance per thread</p></li></ol></section></section><section><h2 id="-1580950209#how-do-worker-threads-work" data-toc="how-do-worker-threads-work#12-Multithreading-with-worker-threads.md-how-do-worker-threads-work">How do Worker Threads Work?</h2><p id="-1580950209#-vea8hx_56">Worker threads in js were submitted as an experimental feature in Node.js version v10, but they became stable in version v12 of Node.js. Worker threads provide us with APIs to deal with CPU-intensive tasks without blocking the main thread; hence they maintain the responsive application. Unlike clusters or child_process, worker threads share memory among themselves by transferring ArrayBuffer instances.</p><p id="-1580950209#-vea8hx_57">The worker thread gives CPU-intensive tasks to another thread while keeping the main thread available to new user requests. When we create a new worker thread, it is associated with a new event loop, so the main thread's event loop can take any further requests.</p><p id="-1580950209#-vea8hx_58">Worker threads in js don't have any synchronization mechanism like any multi-threaded programming language. Chrome's V8 engine is used to run the Node process. Each worker thread is isolated from other threads. The V8 engine allows us to create isolated V8 runtimes.V8 isolates the instances with their own Javascript heaps and micro-task queues. V8 isolates exist in fully distinct states. Objects from one isolation may not be used in another. The embedder can build several isolates and use them in different threads at the same time. At any given time, only one thread can enter an isolate.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1580950209#-vea8hx_59" alt="workerthreads.png" title="workerthreads.png" src="D:/curiculum/Node-Typescript-Docs/Writerside/images/workerthreads.png" width="1700" height="1217"><figcaption class="center-text">workerthreads.png</figcaption></figure></div></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-956173336">12.1 Implementing worker threads</h1><p id="-956173336#opakj6_3">To utilize worker threads in Node.js using TypeScript and TSX, follow the steps below.</p><section><h2 id="-956173336#project-setup" data-toc="project-setup#Implementing-worker-threads.md-project-setup">Project Setup</h2><ol class="list list-decimal" id="-956173336#opakj6_11" type="1" start="1"><li class="list-item" id="-956173336#opakj6_12"><p id="-956173336#opakj6_17"><span class="control" id="-956173336#opakj6_20">Initialize the Project:</span></p><p id="-956173336#opakj6_18">Create a new directory for your project and initialize it with <span class="inline-code" id="-956173336#opakj6_21">npm</span>.</p><div class="detached code-block" id="-956173336#opakj6_19"><pre><code class="language-bash">mkdir worker-threads-ts
cd worker-threads-ts
npm init -y</code></pre></div></li><li class="list-item" id="-956173336#opakj6_13"><p id="-956173336#opakj6_22"><span class="control" id="-956173336#opakj6_25">Install Dependencies:</span></p><p id="-956173336#opakj6_23">Install the necessary dependencies, including TypeScript and TSX.</p><div class="detached code-block" id="-956173336#opakj6_24"><pre><code class="language-bash">npm install typescript tsx --save-dev</code></pre></div></li><li class="list-item" id="-956173336#opakj6_14"><p id="-956173336#opakj6_26"><span class="control" id="-956173336#opakj6_31">Initialize TypeScript Configuration:</span></p><p id="-956173336#opakj6_27">Generate a <span class="inline-code" id="-956173336#opakj6_32">tsconfig.json</span> file with the following command:</p><div class="detached code-block" id="-956173336#opakj6_28"><pre><code class="language-bash">npx tsc --init</code></pre></div><p id="-956173336#opakj6_29">Update the <span class="inline-code" id="-956173336#opakj6_33">tsconfig.json</span> to support ES Modules and other necessary settings:</p><div class="detached code-block" id="-956173336#opakj6_30"><pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES2020&quot;,
    &quot;module&quot;: &quot;ESNext&quot;,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;outDir&quot;: &quot;./dist&quot;,
    &quot;rootDir&quot;: &quot;./src&quot;,
    &quot;strict&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;forceConsistentCasingInFileNames&quot;: true,
    &quot;skipLibCheck&quot;: true
  },
  &quot;include&quot;: [&quot;src&quot;]
}</code></pre></div></li><li class="list-item" id="-956173336#opakj6_15"><p id="-956173336#opakj6_34"><span class="control" id="-956173336#opakj6_37">Update <span class="inline-code" id="-956173336#opakj6_38">package.json</span>:</span></p><p id="-956173336#opakj6_35">Add a script to run your TypeScript files using TSX.</p><div class="detached code-block" id="-956173336#opakj6_36"><pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;tsx src/main.ts&quot;
  }
}</code></pre></div></li><li class="list-item" id="-956173336#opakj6_16"><p id="-956173336#opakj6_39"><span class="control" id="-956173336#opakj6_42">Project Structure:</span></p><p id="-956173336#opakj6_40">Create a <span class="inline-code" id="-956173336#opakj6_43">src</span> directory to house your TypeScript files.</p><div class="detached code-block" id="-956173336#opakj6_41"><pre><code class="language-bash">mkdir src</code></pre></div></li></ol></section><section><h2 id="-956173336#basic-worker-thread-example" data-toc="basic-worker-thread-example#Implementing-worker-threads.md-basic-worker-thread-example">Basic Worker Thread Example</h2><p id="-956173336#opakj6_44">Below is a simple example demonstrating how to create a worker thread that executes a separate TypeScript file.</p><p id="-956173336#opakj6_45"><span class="control" id="-956173336#opakj6_54">1. Create the Worker Script (<span class="inline-code" id="-956173336#opakj6_55">worker.ts</span>):</span></p><div class="detached code-block" id="-956173336#opakj6_46"><pre><code class="language-javascript">// src/worker.ts
import { parentPort } from 'worker_threads';

// Define the type of tasks the worker can handle
type Task = number;

// Function to calculate factorial
function factorial(n: number): number {
  if (n === 0 || n === 1) return 1;
  return n * factorial(n - 1);
}

// Listen for messages from the main thread
parentPort?.on('message', (task: Task) =&gt; {
  console.log(`Worker received task: ${task}`);
  
  const result = factorial(task);
  
  // Send the result back to the main thread
  parentPort?.postMessage(result);
});</code></pre></div><p id="-956173336#opakj6_47"><span class="control" id="-956173336#opakj6_56">2. Create the Main Script (<span class="inline-code" id="-956173336#opakj6_57">main.ts</span>):</span></p><div class="detached code-block" id="-956173336#opakj6_48"><pre><code class="language-javascript">// src/main.ts
import { Worker } from 'worker_threads';
import path from 'path';
import { fileURLToPath } from 'url';

// Helper to get __dirname in ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Define the type for worker results
type WorkerResult = number;

// Function to run a worker
function runWorker(task: number): Promise&lt;WorkerResult&gt; {
  return new Promise((resolve, reject) =&gt; {
    const workerPath = path.resolve(__dirname, './worker.ts');
    const worker = new Worker(workerPath, {
      // Specify the TypeScript file; TSX handles transpilation
      // No additional execArgv needed for TSX
    });

    // Send task to the worker
    worker.postMessage(task);

    // Listen for messages from the worker
    worker.on('message', (result: WorkerResult) =&gt; {
      resolve(result);
    });

    // Handle errors
    worker.on('error', reject);

    // Handle worker exit
    worker.on('exit', (code) =&gt; {
      if (code !== 0)
        reject(new Error(`Worker stopped with exit code ${code}`));
    });
  });
}

// Example usage
async function main() {
  const number = 10;
  console.log(`Calculating factorial of ${number} in worker thread...`);

  try {
    const result = await runWorker(number);
    console.log(`Factorial of ${number} is ${result}`);
  } catch (err) {
    console.error(err);
  }
}

main();</code></pre></div><p id="-956173336#opakj6_49"><span class="control" id="-956173336#opakj6_58">3. Run the Application:</span></p><p id="-956173336#opakj6_50">Execute the following command to run the main script using the <span class="inline-code" id="-956173336#opakj6_59">start</span> script defined in <span class="inline-code" id="-956173336#opakj6_60">package.json</span>:</p><div class="detached code-block" id="-956173336#opakj6_51"><pre><code class="language-bash">npm run start</code></pre></div><p id="-956173336#opakj6_52"><span class="control" id="-956173336#opakj6_61">Output:</span></p><div class="detached code-block" id="-956173336#opakj6_53"><pre><code class="language-none">Calculating factorial of 10 in worker thread...
Worker received task: 10
Factorial of 10 is 3628800</code></pre></div></section><section><h2 id="-956173336#explanation" data-toc="explanation#Implementing-worker-threads.md-explanation">Explanation:</h2><ul class="list" id="-956173336#opakj6_62" start="1"><li class="list-item" id="-956173336#opakj6_63"><p id="-956173336#opakj6_65"><span class="control" id="-956173336#opakj6_67">worker.ts:</span></p><ul class="list" id="-956173336#opakj6_66" start="1"><li class="list-item" id="-956173336#opakj6_68"><p>Uses TypeScript's type annotations for better type safety.</p></li><li class="list-item" id="-956173336#opakj6_69"><p>Listens for messages (<span class="inline-code" id="-956173336#opakj6_71">Task</span> type) from the main thread.</p></li><li class="list-item" id="-956173336#opakj6_70"><p>Calculates the factorial of the received number and sends the result back.</p></li></ul></li><li class="list-item" id="-956173336#opakj6_64"><p id="-956173336#opakj6_72"><span class="control" id="-956173336#opakj6_74">main.ts:</span></p><ul class="list" id="-956173336#opakj6_73" start="1"><li class="list-item" id="-956173336#opakj6_75"><p>Creates a new worker thread by instantiating the <span class="inline-code" id="-956173336#opakj6_79">Worker</span> class with the path to <span class="inline-code" id="-956173336#opakj6_80">worker.ts</span>.</p></li><li class="list-item" id="-956173336#opakj6_76"><p>Sends a number to the worker thread to compute its factorial.</p></li><li class="list-item" id="-956173336#opakj6_77"><p>Awaits the result and logs it to the console.</p></li><li class="list-item" id="-956173336#opakj6_78"><p>Includes error handling for worker errors and exit codes.</p></li></ul></li></ul></section><section><h2 id="-956173336#communication-between-main-thread-and-worker" data-toc="communication-between-main-thread-and-worker#Implementing-worker-threads.md-communication-between-main-thread-and-worker">Communication Between Main Thread and Worker</h2><p id="-956173336#opakj6_81">Worker threads communicate with the main thread using messages. They can send and receive messages using the <span class="inline-code" id="-956173336#opakj6_83">postMessage</span> method and the <span class="inline-code" id="-956173336#opakj6_84">message</span> event.</p><section><h3 id="-956173336#example-sending-and-receiving-multiple-messages" data-toc="example-sending-and-receiving-multiple-messages#Implementing-worker-threads.md-example-sending-and-receiving-multiple-messages">Example: Sending and Receiving Multiple Messages</h3><p id="-956173336#opakj6_85"><span class="control" id="-956173336#opakj6_93">1. Update <span class="inline-code" id="-956173336#opakj6_94">worker.ts</span> to Handle Multiple Tasks:</span></p><div class="detached code-block" id="-956173336#opakj6_86"><pre><code class="language-javascript">// src/worker.ts
import { parentPort } from 'worker_threads';

// Define the types for tasks and messages
type Task = number | 'exit';
type Message = number;

// Function to calculate factorial
function factorial(n: number): number {
  if (n === 0 || n === 1) return 1;
  return n * factorial(n - 1);
}

// Listen for messages from the main thread
parentPort?.on('message', (task: Task) =&gt; {
  if (task === 'exit') {
    parentPort?.close();
  } else {
    console.log(`Worker received task: ${task}`);
    const result = factorial(task);
    parentPort?.postMessage(result);
  }
});</code></pre></div><p id="-956173336#opakj6_87"><span class="control" id="-956173336#opakj6_95">2. Update <span class="inline-code" id="-956173336#opakj6_96">main.ts</span> to Send Multiple Tasks:</span></p><div class="detached code-block" id="-956173336#opakj6_88"><pre><code class="language-javascript">// src/main.ts
import { Worker } from 'worker_threads';
import path from 'path';
import { fileURLToPath } from 'url';

// Helper to get __dirname in ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Define the type for worker results
type WorkerResult = number;

// Function to run a worker
function runWorker(task: number | 'exit'): Promise&lt;WorkerResult&gt; {
  return new Promise((resolve, reject) =&gt; {
    const workerPath = path.resolve(__dirname, './worker.ts');
    const worker = new Worker(workerPath, {
      // Specify the TypeScript file; TSX handles transpilation
    });

    // Send task to the worker
    worker.postMessage(task);

    // Listen for messages from the worker
    worker.on('message', (result: WorkerResult) =&gt; {
      resolve(result);
    });

    // Handle errors
    worker.on('error', reject);

    // Handle worker exit
    worker.on('exit', (code) =&gt; {
      if (code !== 0)
        reject(new Error(`Worker stopped with exit code ${code}`));
    });
  });
}

// Example usage
async function main() {
  const tasks: number[] = [5, 7, 10];
  const promises = tasks.map(runWorker);

  try {
    const results = await Promise.all(promises);
    tasks.forEach((task, index) =&gt; {
      console.log(`Factorial of ${task} is ${results[index]}`);
    });
  } catch (err) {
    console.error(err);
  }
}

main();</code></pre></div><p id="-956173336#opakj6_89"><span class="control" id="-956173336#opakj6_97">3. Run the Application:</span></p><div class="detached code-block" id="-956173336#opakj6_90"><pre><code class="language-bash">npm run start</code></pre></div><p id="-956173336#opakj6_91"><span class="control" id="-956173336#opakj6_98">Output:</span></p><div class="detached code-block" id="-956173336#opakj6_92"><pre><code class="language-none">Worker received task: 5
Worker received task: 7
Worker received task: 10
Factorial of 5 is 120
Factorial of 7 is 5040
Factorial of 10 is 3628800</code></pre></div></section></section><section><h2 id="-956173336#explanation" data-toc="explanation#Implementing-worker-threads.md-explanation">Explanation:</h2><ul class="list" id="-956173336#opakj6_99" start="1"><li class="list-item" id="-956173336#opakj6_100"><p id="-956173336#opakj6_102"><span class="control" id="-956173336#opakj6_104">worker.ts:</span></p><ul class="list" id="-956173336#opakj6_103" start="1"><li class="list-item" id="-956173336#opakj6_105"><p>Enhanced to handle multiple tasks by accepting an array of numbers.</p></li><li class="list-item" id="-956173336#opakj6_106"><p>Listens for the <span class="inline-code" id="-956173336#opakj6_107">'exit'</span> message to gracefully close the worker.</p></li></ul></li><li class="list-item" id="-956173336#opakj6_101"><p id="-956173336#opakj6_108"><span class="control" id="-956173336#opakj6_110">main.ts:</span></p><ul class="list" id="-956173336#opakj6_109" start="1"><li class="list-item" id="-956173336#opakj6_111"><p>Sends multiple tasks to separate worker threads by mapping over the <span class="inline-code" id="-956173336#opakj6_113">tasks</span> array.</p></li><li class="list-item" id="-956173336#opakj6_112"><p>Awaits all promises using <span class="inline-code" id="-956173336#opakj6_114">Promise.all</span> and logs each result accordingly.</p></li></ul></li></ul></section><section><h2 id="-956173336#practical-example-cpu-intensive-task" data-toc="practical-example-cpu-intensive-task#Implementing-worker-threads.md-practical-example-cpu-intensive-task">Practical Example: CPU-Intensive Task</h2><p id="-956173336#opakj6_115">To illustrate the benefits of worker threads, let's compare a CPU-intensive task executed in the main thread versus using worker threads.</p><p id="-956173336#opakj6_116"><span class="control" id="-956173336#opakj6_120">Task:</span> Calculate the Fibonacci number for a large <span class="inline-code" id="-956173336#opakj6_121">n</span> (e.g., <span class="inline-code" id="-956173336#opakj6_122">n = 40</span>).</p><section><h3 id="-956173336#1-without-worker-threads-single-threaded" data-toc="1-without-worker-threads-single-threaded#Implementing-worker-threads.md-1-without-worker-threads-single-threaded">1. Without Worker Threads (Single-Threaded)</h3><p id="-956173336#opakj6_123"><span class="control" id="-956173336#opakj6_131">fibonacci.ts:</span></p><div class="detached code-block" id="-956173336#opakj6_124"><pre><code class="language-javascript">// src/fibonacci.ts
function fibonacci(n: number): number {
  if (n &lt;= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

const n = 40;
console.log(`Fibonacci of ${n} is ${fibonacci(n)}`);</code></pre></div><p id="-956173336#opakj6_125"><span class="control" id="-956173336#opakj6_132">Run the Script:</span></p><p id="-956173336#opakj6_126">Execute the script using TSX.</p><div class="detached code-block" id="-956173336#opakj6_127"><pre><code class="language-bash">tsx src/fibonacci.ts</code></pre></div><p id="-956173336#opakj6_128"><span class="control" id="-956173336#opakj6_133">Output:</span></p><div class="detached code-block" id="-956173336#opakj6_129"><pre><code class="language-none">Fibonacci of 40 is 102334155</code></pre></div><p id="-956173336#opakj6_130"><span class="control" id="-956173336#opakj6_134">Note:</span> While this computation is running, the main thread is blocked and cannot handle other tasks.</p></section><section><h3 id="-956173336#2-using-worker-threads-multithreaded" data-toc="2-using-worker-threads-multithreaded#Implementing-worker-threads.md-2-using-worker-threads-multithreaded">2. Using Worker Threads (Multithreaded)</h3><p id="-956173336#opakj6_135"><span class="control" id="-956173336#opakj6_143">worker-fibonacci.ts:</span></p><div class="detached code-block" id="-956173336#opakj6_136"><pre><code class="language-javascript">// src/worker-fibonacci.ts
import { parentPort } from 'worker_threads';

// Function to calculate Fibonacci
function fibonacci(n: number): number {
  if (n &lt;= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

// Listen for messages from the main thread
parentPort?.on('message', (n: number) =&gt; {
  const result = fibonacci(n);
  parentPort?.postMessage(result);
});</code></pre></div><p id="-956173336#opakj6_137"><span class="control" id="-956173336#opakj6_144">main-fibonacci.ts:</span></p><div class="detached code-block" id="-956173336#opakj6_138"><pre><code class="language-javascript">// src/main-fibonacci.ts
import { Worker } from 'worker_threads';
import path from 'path';
import { fileURLToPath } from 'url';

// Helper to get __dirname in ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Define the type for worker results
type WorkerResult = number;

// Function to run the Fibonacci worker
function runFibonacci(n: number): Promise&lt;WorkerResult&gt; {
  return new Promise((resolve, reject) =&gt; {
    const workerPath = path.resolve(__dirname, './worker-fibonacci.ts');
    const worker = new Worker(workerPath, {
      // Specify the TypeScript file; TSX handles transpilation
    });

    // Send task to the worker
    worker.postMessage(n);

    // Listen for messages from the worker
    worker.on('message', (result: WorkerResult) =&gt; {
      resolve(result);
    });

    // Handle errors
    worker.on('error', reject);

    // Handle worker exit
    worker.on('exit', (code) =&gt; {
      if (code !== 0)
        reject(new Error(`Worker stopped with exit code ${code}`));
    });
  });
}

// Example usage
async function main() {
  const n = 40;
  console.log(`Calculating Fibonacci of ${n} using worker thread...`);

  const fibPromise = runFibonacci(n);
  
  // Meanwhile, main thread can perform other tasks
  console.log('Main thread is free to perform other tasks.');

  try {
    const result = await fibPromise;
    console.log(`Fibonacci of ${n} is ${result}`);
  } catch (err) {
    console.error(err);
  }
}

main();</code></pre></div><p id="-956173336#opakj6_139"><span class="control" id="-956173336#opakj6_145">3. Run the Script:</span></p><div class="detached code-block" id="-956173336#opakj6_140"><pre><code class="language-bash">tsx src/main-fibonacci.ts</code></pre></div><p id="-956173336#opakj6_141"><span class="control" id="-956173336#opakj6_146">Output:</span></p><div class="detached code-block" id="-956173336#opakj6_142"><pre><code class="language-none">Calculating Fibonacci of 40 using worker thread...
Main thread is free to perform other tasks.
Fibonacci of 40 is 102334155</code></pre></div></section><section><h3 id="-956173336#explanation" data-toc="explanation#Implementing-worker-threads.md-explanation">Explanation:</h3><ul class="list" id="-956173336#opakj6_147" start="1"><li class="list-item" id="-956173336#opakj6_148"><p id="-956173336#opakj6_150"><span class="control" id="-956173336#opakj6_152">Single-Threaded Approach:</span></p><ul class="list" id="-956173336#opakj6_151" start="1"><li class="list-item" id="-956173336#opakj6_153"><p>The main thread is blocked while calculating the Fibonacci number, making the application unresponsive during the computation.</p></li></ul></li><li class="list-item" id="-956173336#opakj6_149"><p id="-956173336#opakj6_154"><span class="control" id="-956173336#opakj6_156">Worker Thread Approach:</span></p><ul class="list" id="-956173336#opakj6_155" start="1"><li class="list-item" id="-956173336#opakj6_157"><p>The computation is offloaded to a worker thread.</p></li><li class="list-item" id="-956173336#opakj6_158"><p>The main thread remains free to handle other tasks, enhancing responsiveness and efficiency.</p></li></ul></li></ul></section></section><section><h2 id="-956173336#conclusion" data-toc="conclusion#Implementing-worker-threads.md-conclusion">Conclusion</h2><p id="-956173336#opakj6_159">Worker threads in Node.js provide a powerful way to handle CPU-intensive tasks without blocking the main event loop. By leveraging multithreading with TypeScript and TSX, applications can achieve better performance, efficient resource utilization, and improved scalability. Understanding and implementing worker threads is essential for building high-performance Node.js applications that can handle a wide range of workloads effectively.</p></section></article></div></section></div></body></html>